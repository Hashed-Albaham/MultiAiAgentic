This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
agent-orchestrator-hub/.gitignore
agent-orchestrator-hub/components.json
agent-orchestrator-hub/eslint.config.js
agent-orchestrator-hub/github_bat.bat
agent-orchestrator-hub/index.html
agent-orchestrator-hub/package.json
agent-orchestrator-hub/postcss.config.js
agent-orchestrator-hub/public/favicon.ico
agent-orchestrator-hub/public/placeholder.svg
agent-orchestrator-hub/public/pwa-192.png
agent-orchestrator-hub/public/pwa-512.png
agent-orchestrator-hub/public/robots.txt
agent-orchestrator-hub/README.md
agent-orchestrator-hub/src/App.css
agent-orchestrator-hub/src/App.tsx
agent-orchestrator-hub/src/components/AgentCard.tsx
agent-orchestrator-hub/src/components/AgentFormDialog.tsx
agent-orchestrator-hub/src/components/AppLayout.tsx
agent-orchestrator-hub/src/components/AppSidebar.tsx
agent-orchestrator-hub/src/components/NavLink.tsx
agent-orchestrator-hub/src/components/PageHeader.tsx
agent-orchestrator-hub/src/components/pipeline/AgentNode.tsx
agent-orchestrator-hub/src/components/pipeline/CustomEdge.tsx
agent-orchestrator-hub/src/components/pipeline/ExecutionPanel.tsx
agent-orchestrator-hub/src/components/ui/accordion.tsx
agent-orchestrator-hub/src/components/ui/alert-dialog.tsx
agent-orchestrator-hub/src/components/ui/alert.tsx
agent-orchestrator-hub/src/components/ui/aspect-ratio.tsx
agent-orchestrator-hub/src/components/ui/avatar.tsx
agent-orchestrator-hub/src/components/ui/badge.tsx
agent-orchestrator-hub/src/components/ui/breadcrumb.tsx
agent-orchestrator-hub/src/components/ui/button.tsx
agent-orchestrator-hub/src/components/ui/calendar.tsx
agent-orchestrator-hub/src/components/ui/card.tsx
agent-orchestrator-hub/src/components/ui/carousel.tsx
agent-orchestrator-hub/src/components/ui/chart.tsx
agent-orchestrator-hub/src/components/ui/checkbox.tsx
agent-orchestrator-hub/src/components/ui/collapsible.tsx
agent-orchestrator-hub/src/components/ui/command.tsx
agent-orchestrator-hub/src/components/ui/context-menu.tsx
agent-orchestrator-hub/src/components/ui/dialog.tsx
agent-orchestrator-hub/src/components/ui/drawer.tsx
agent-orchestrator-hub/src/components/ui/dropdown-menu.tsx
agent-orchestrator-hub/src/components/ui/form.tsx
agent-orchestrator-hub/src/components/ui/hover-card.tsx
agent-orchestrator-hub/src/components/ui/input-otp.tsx
agent-orchestrator-hub/src/components/ui/input.tsx
agent-orchestrator-hub/src/components/ui/label.tsx
agent-orchestrator-hub/src/components/ui/menubar.tsx
agent-orchestrator-hub/src/components/ui/navigation-menu.tsx
agent-orchestrator-hub/src/components/ui/pagination.tsx
agent-orchestrator-hub/src/components/ui/popover.tsx
agent-orchestrator-hub/src/components/ui/progress.tsx
agent-orchestrator-hub/src/components/ui/radio-group.tsx
agent-orchestrator-hub/src/components/ui/resizable.tsx
agent-orchestrator-hub/src/components/ui/scroll-area.tsx
agent-orchestrator-hub/src/components/ui/select.tsx
agent-orchestrator-hub/src/components/ui/separator.tsx
agent-orchestrator-hub/src/components/ui/sheet.tsx
agent-orchestrator-hub/src/components/ui/sidebar.tsx
agent-orchestrator-hub/src/components/ui/skeleton.tsx
agent-orchestrator-hub/src/components/ui/slider.tsx
agent-orchestrator-hub/src/components/ui/sonner.tsx
agent-orchestrator-hub/src/components/ui/switch.tsx
agent-orchestrator-hub/src/components/ui/table.tsx
agent-orchestrator-hub/src/components/ui/tabs.tsx
agent-orchestrator-hub/src/components/ui/textarea.tsx
agent-orchestrator-hub/src/components/ui/toast.tsx
agent-orchestrator-hub/src/components/ui/toaster.tsx
agent-orchestrator-hub/src/components/ui/toggle-group.tsx
agent-orchestrator-hub/src/components/ui/toggle.tsx
agent-orchestrator-hub/src/components/ui/tooltip.tsx
agent-orchestrator-hub/src/components/ui/use-toast.ts
agent-orchestrator-hub/src/hooks/use-mobile.tsx
agent-orchestrator-hub/src/hooks/use-toast.ts
agent-orchestrator-hub/src/index.css
agent-orchestrator-hub/src/lib/aiService.ts
agent-orchestrator-hub/src/lib/engine/dag-resolver.ts
agent-orchestrator-hub/src/lib/engine/pipeline-executor.ts
agent-orchestrator-hub/src/lib/utils.ts
agent-orchestrator-hub/src/main.tsx
agent-orchestrator-hub/src/pages/AgentsPage.tsx
agent-orchestrator-hub/src/pages/ApiDocsPage.tsx
agent-orchestrator-hub/src/pages/ChatPage.tsx
agent-orchestrator-hub/src/pages/ComparePage.tsx
agent-orchestrator-hub/src/pages/DialoguePage.tsx
agent-orchestrator-hub/src/pages/Index.tsx
agent-orchestrator-hub/src/pages/NotFound.tsx
agent-orchestrator-hub/src/pages/PipelinePage.tsx
agent-orchestrator-hub/src/pages/SettingsPage.tsx
agent-orchestrator-hub/src/store/agentStore.ts
agent-orchestrator-hub/src/store/apiKeyStore.ts
agent-orchestrator-hub/src/store/i18nStore.ts
agent-orchestrator-hub/src/test/agentStore.test.ts
agent-orchestrator-hub/src/test/example.test.ts
agent-orchestrator-hub/src/test/setup.ts
agent-orchestrator-hub/src/test/types.test.ts
agent-orchestrator-hub/src/types/index.ts
agent-orchestrator-hub/src/vite-env.d.ts
agent-orchestrator-hub/tailwind.config.ts
agent-orchestrator-hub/tsconfig.app.json
agent-orchestrator-hub/tsconfig.json
agent-orchestrator-hub/tsconfig.node.json
agent-orchestrator-hub/vite.config.ts
agent-orchestrator-hub/vitest.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="agent-orchestrator-hub/src/store/i18nStore.ts">
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export type Locale = 'ar' | 'en';

interface I18nStore {
    locale: Locale;
    setLocale: (locale: Locale) => void;
    toggleLocale: () => void;
    t: (key: string) => string;
    dir: () => 'rtl' | 'ltr';
}

const translations: Record<string, Record<Locale, string>> = {
    // ===== Ø¹Ø§Ù… =====
    'app.title': { ar: 'Ù…Ø±ÙƒØ² ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡', en: 'Agent Orchestrator Hub' },
    'app.settings': { ar: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', en: 'Settings' },
    'app.agents': { ar: 'Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡', en: 'Agents' },
    'app.chat': { ar: 'Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©', en: 'Chat' },
    'app.compare': { ar: 'Ù…Ù‚Ø§Ø±Ù†Ø©', en: 'Compare' },
    'app.dialogue': { ar: 'Ø­ÙˆØ§Ø±', en: 'Dialogue' },
    'app.pipeline': { ar: 'Pipeline', en: 'Pipeline' },
    'app.language': { ar: 'English', en: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },

    // ===== Pipeline =====
    'pipeline.title': { ar: 'Ù…Ø­Ø±Ø± Pipeline', en: 'Pipeline Editor' },
    'pipeline.subtitle': { ar: 'ØµÙ…Ù… Ù…Ø³Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨ÙŠÙ† Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø¨ØµØ±ÙŠØ§Ù‹', en: 'Visually design message flow between agents' },
    'pipeline.name': { ar: 'Ø§Ø³Ù… Pipeline...', en: 'Pipeline name...' },
    'pipeline.input': { ar: 'Ø§Ù„Ù…Ø¯Ø®Ù„:', en: 'Input:' },
    'pipeline.inputPlaceholder': { ar: 'Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¯Ø®Ù„ Ø£ÙˆÙ„ Ø¹Ù‚Ø¯Ø©...', en: 'Enter text for the first node...' },
    'pipeline.addAgent': { ar: 'â• Ø£Ø¶Ù ÙˆÙƒÙŠÙ„Ø§Ù‹', en: 'â• Add Agent' },
    'pipeline.saved': { ar: 'ğŸ“ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©', en: 'ğŸ“ Saved' },
    'pipeline.noAgents': { ar: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆÙƒÙ„Ø§Ø¡. Ø£Ù†Ø´Ø¦ ÙˆÙƒÙŠÙ„Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹.', en: 'No agents. Create one first.' },
    'pipeline.clear': { ar: 'Ù…Ø³Ø­', en: 'Clear' },
    'pipeline.run': { ar: 'ØªØ´ØºÙŠÙ„', en: 'Run' },
    'pipeline.save': { ar: 'Ø­ÙØ¸', en: 'Save' },
    'pipeline.emptyTitle': { ar: 'Ø§Ø¨Ø¯Ø£ Ø¨Ù†Ø§Ø¡ Ù…Ø³Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„', en: 'Start building message flow' },
    'pipeline.emptyDesc': { ar: 'Ø£Ø¶Ù ÙˆÙƒÙ„Ø§Ø¡ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø«Ù… Ø§Ø±Ø¨Ø·Ù‡Ù… Ø¨Ø£Ø³Ù‡Ù… Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', en: 'Add agents from the list and connect them with arrows' },
    'pipeline.emptyHint1': { ar: 'â— Ø£Ø®Ø¶Ø± = Ø¥Ø®Ø±Ø§Ø¬ | â— ÙˆØ±Ø¯ÙŠ = Ø¥Ø¯Ø®Ø§Ù„', en: 'â— Green = Output | â— Pink = Input' },
    'pipeline.emptyHint2': { ar: 'ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆØ±Ø§Øª! Ø¹Ù†Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø³ÙŠÙØ³Ø£Ù„Ùƒ Ø¹Ù† Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª', en: 'ğŸ’¡ You can create loops! You\'ll be asked for iteration count at runtime' },

    // ===== Edge Conditions =====
    'edge.always': { ar: 'Ø¯Ø§Ø¦Ù…Ø§Ù‹', en: 'Always' },
    'edge.onSuccess': { ar: 'Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­', en: 'On Success' },
    'edge.onError': { ar: 'Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£', en: 'On Error' },
    'edge.conditional': { ar: 'Ø´Ø±Ø·ÙŠ', en: 'Conditional' },
    'edge.deleteEdge': { ar: 'Ø­Ø°Ù Ø§Ù„Ø±Ø§Ø¨Ø·', en: 'Delete Edge' },
    'edge.changeCondition': { ar: 'ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ø±Ø·', en: 'Change Condition' },
    'edge.expression': { ar: 'Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ø´Ø±Ø·ÙŠ', en: 'Condition Expression' },
    'edge.expressionHint': { ar: 'Ù…Ø«Ø§Ù„: ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ "Ù†Ø¬Ø­" Ø£Ùˆ Ø§Ù„Ø·ÙˆÙ„ > 100', en: 'Ex: contains "success" or length > 100' },
    'edge.expressionSave': { ar: 'Ø­ÙØ¸', en: 'Save' },

    // ===== Loop =====
    'loop.detected': { ar: 'ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø¯ÙˆØ±Ø© (Loop)', en: 'Loop Detected' },
    'loop.desc': { ar: 'ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· ÙŠÙØ³Ø¨Ø¨ Ø¯ÙˆØ±Ø©. Ø­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª Ø£Ùˆ Ø£Ù„ØºÙ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·.', en: 'Contains a cyclic edge. Set iterations or remove the edges.' },
    'loop.backEdges': { ar: 'ğŸ”„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ø¯ÙˆØ±Ø©:', en: 'ğŸ”„ Back edges causing loop:' },
    'loop.iterations': { ar: 'Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª (1-10):', en: 'Iterations (1-10):' },
    'loop.iterationHint': { ar: 'Ø³ÙŠØªÙ… ØªÙ†ÙÙŠØ° ÙƒÙ„ Ø§Ù„Ø¹Ù‚Ø¯ {n} Ù…Ø±Ø©', en: 'All nodes will execute {n} times' },
    'loop.cancel': { ar: 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø© (Ø­Ø°Ù Ø§Ù„Ø±ÙˆØ§Ø¨Ø·)', en: 'Cancel Loop (remove edges)' },
    'loop.confirm': { ar: 'ØªØ´ØºÙŠÙ„', en: 'Run' },
    'loop.badge': { ar: 'Ø¯ÙˆØ±Ø©', en: 'Loop' },

    // ===== Node =====
    'node.delete': { ar: 'Ø­Ø°Ù Ø§Ù„Ø¹Ù‚Ø¯Ø©', en: 'Delete Node' },
    'node.replace': { ar: 'Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ÙˆÙƒÙŠÙ„', en: 'Replace Agent' },
    'node.replaceWith': { ar: 'Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¨Ù€:', en: 'Replace with:' },
    'node.noOthers': { ar: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆÙƒÙ„Ø§Ø¡ Ø¢Ø®Ø±ÙŠÙ†', en: 'No other agents' },

    // ===== Execution Panel =====
    'exec.log': { ar: 'ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°', en: 'ğŸ“Š Execution Log' },
    'exec.running': { ar: 'Ø¬Ø§Ø±ÙŠ...', en: 'Running...' },
    'exec.completed': { ar: 'Ù…ÙƒØªÙ…Ù„ âœ…', en: 'Completed âœ…' },
    'exec.failed': { ar: 'ÙØ´Ù„ âŒ', en: 'Failed âŒ' },
    'exec.ready': { ar: 'Ø¬Ø§Ù‡Ø²', en: 'Ready' },
    'exec.level': { ar: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰', en: 'Level' },
    'exec.expandAll': { ar: 'ÙØªØ­ Ø§Ù„ÙƒÙ„', en: 'Expand All' },
    'exec.collapseAll': { ar: 'Ø·ÙŠ Ø§Ù„ÙƒÙ„', en: 'Collapse All' },
    'exec.export': { ar: 'ØªØµØ¯ÙŠØ±', en: 'Export' },
    'exec.copyResult': { ar: 'Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©', en: 'Copy Result' },
    'exec.finalOutput': { ar: 'ğŸ¯ Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ', en: 'ğŸ¯ Final Output' },
    'exec.showInput': { ar: 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¯Ø®Ù„', en: 'Show Input' },
    'exec.hideInput': { ar: 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø¯Ø®Ù„', en: 'Hide Input' },
    'exec.copyOutput': { ar: 'Ù†Ø³Ø® Ø§Ù„Ù…Ø®Ø±Ø¬', en: 'Copy Output' },
    'exec.input': { ar: 'ğŸ“¥ Ø§Ù„Ù…Ø¯Ø®Ù„:', en: 'ğŸ“¥ Input:' },
    'exec.output': { ar: 'ğŸ“¤ Ø§Ù„Ù…Ø®Ø±Ø¬:', en: 'ğŸ“¤ Output:' },

    // ===== Status =====
    'status.pending': { ar: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±', en: 'Pending' },
    'status.running': { ar: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°', en: 'Running' },
    'status.completed': { ar: 'Ù…ÙƒØªÙ…Ù„', en: 'Completed' },
    'status.failed': { ar: 'ÙØ´Ù„', en: 'Failed' },
    'status.skipped': { ar: 'ØªÙ… ØªØ®Ø·ÙŠÙ‡', en: 'Skipped' },

    // ===== Toasts =====
    'toast.copied': { ar: 'ØªÙ… Ø§Ù„Ù†Ø³Ø®', en: 'Copied' },
    'toast.copyFailed': { ar: 'ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®', en: 'Copy failed' },
    'toast.exported': { ar: 'ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬', en: 'Results exported' },
    'toast.saved': { ar: 'ØªÙ… Ø§Ù„Ø­ÙØ¸', en: 'Saved' },
    'toast.updated': { ar: 'ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«', en: 'Updated' },
    'toast.loaded': { ar: 'ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„', en: 'Loaded' },
    'toast.deleted': { ar: 'ØªÙ… Ø§Ù„Ø­Ø°Ù', en: 'Deleted' },
    'toast.cleared': { ar: 'ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù„ÙˆØ­Ø©', en: 'Canvas cleared' },
    'toast.addNodesFirst': { ar: 'Ø£Ø¶Ù Ø¹Ù‚Ø¯Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹', en: 'Add nodes first' },
    'toast.addInputFirst': { ar: 'Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙˆÙ„Ø§Ù‹', en: 'Enter input text first' },
    'toast.pipelineStarted': { ar: 'Ø¨Ø¯Ø¡ ØªÙ†ÙÙŠØ° Pipeline...', en: 'Starting pipeline...' },
    'toast.pipelineSuccess': { ar: 'ØªÙ… ØªÙ†ÙÙŠØ° Pipeline Ø¨Ù†Ø¬Ø§Ø­!', en: 'Pipeline executed successfully!' },
    'toast.pipelineFailed': { ar: 'ÙØ´Ù„ ØªÙ†ÙÙŠØ° Pipeline', en: 'Pipeline execution failed' },
    'toast.loopRemoved': { ar: 'ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ø¯ÙˆØ±Ø©', en: 'Back edges removed' },
    'toast.conditionSaved': { ar: 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø´Ø±Ø·', en: 'Condition saved' },

    // ===== Settings =====
    'settings.title': { ar: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', en: 'Settings' },
    'settings.apiKeys': { ar: 'Ù…ÙØ§ØªÙŠØ­ API', en: 'API Keys' },
    'settings.addKey': { ar: 'Ø¥Ø¶Ø§ÙØ© Ù…ÙØªØ§Ø­', en: 'Add Key' },
    'settings.keyName': { ar: 'Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ§Ø­', en: 'Key Name' },

    // ===== Navigation Sidebar =====
    'nav.dashboard': { ar: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', en: 'Dashboard' },
    'nav.agents': { ar: 'Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡', en: 'Agents' },
    'nav.chat': { ar: 'Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©', en: 'Chat' },
    'nav.pipeline': { ar: 'Pipeline', en: 'Pipeline' },
    'nav.compare': { ar: 'Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©', en: 'Compare' },
    'nav.dialogue': { ar: 'Ø­ÙˆØ§Ø± Ø¢Ù„ÙŠ', en: 'Dialogue' },
    'nav.apiDocs': { ar: 'ØªÙˆØ«ÙŠÙ‚ API', en: 'API Docs' },
    'nav.settings': { ar: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', en: 'Settings' },
    'nav.collapse': { ar: 'Ø·ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©', en: 'Collapse' },

    // ===== Pipeline: Collapsible Panels =====
    'pipeline.agentsPanel': { ar: 'â• Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡', en: 'â• Agents' },
    'pipeline.savedPanel': { ar: 'ğŸ“ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©', en: 'ğŸ“ Saved' },
};

export const useI18nStore = create<I18nStore>()(
    persist(
        (set, get) => ({
            locale: 'ar' as Locale,
            setLocale: (locale: Locale) => set({ locale }),
            toggleLocale: () => set((s) => ({ locale: s.locale === 'ar' ? 'en' : 'ar' })),
            t: (key: string): string => {
                const locale = get().locale;
                return translations[key]?.[locale] || key;
            },
            dir: () => (get().locale === 'ar' ? 'rtl' : 'ltr'),
        }),
        { name: 'i18n-store' }
    )
);
</file>

<file path="agent-orchestrator-hub/.gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="agent-orchestrator-hub/components.json">
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/index.css",
    "baseColor": "slate",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  }
}
</file>

<file path="agent-orchestrator-hub/eslint.config.js">
import js from "@eslint/js";
import globals from "globals";
import reactHooks from "eslint-plugin-react-hooks";
import reactRefresh from "eslint-plugin-react-refresh";
import tseslint from "typescript-eslint";

export default tseslint.config(
  { ignores: ["dist"] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ["**/*.{ts,tsx}"],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    plugins: {
      "react-hooks": reactHooks,
      "react-refresh": reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      "react-refresh/only-export-components": ["warn", { allowConstantExport: true }],
      "@typescript-eslint/no-unused-vars": "off",
    },
  },
);
</file>

<file path="agent-orchestrator-hub/github_bat.bat">
@echo off
setlocal EnableDelayedExpansion

:: ==========================================
:: Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙ‚Ø·)
:: ==========================================
set "REPO_URL=https://github.com/Hashed-Albaham/MultiAiAgentic.git"
set "REPO_NAME=MultiAiAgentic"
set "MY_NAME=Hashed Albaham"
set "MY_EMAIL=Hashedhassanzaeed222@gmail.com"
:: ==========================================

echo [INFO] Starting Process for %REPO_NAME%...

:: 1. Ø¶Ø¨Ø· Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø¨Ø´ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ (ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø§Ù†Ø¸Ù…Ø©)
for /f "tokens=2 delims==" %%I in ('wmic os get localdatetime /value') do set datetime=%%I
set "TIMESTAMP=%datetime:~0,4%-%datetime:~4,2%-%datetime:~6,2% %datetime:~8,2%:%datetime:~10,2%"

:: 2. Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Git
where git >nul 2>nul
if %errorlevel% neq 0 (
    echo [ERROR] Git is not installed!
    pause
    exit /b
)

:: 3. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
if not exist ".git" (
    echo [INIT] Initializing new Git repository...
    git init
)

:: 4. === Ù‡Ø§Ù… Ø¬Ø¯Ø§Ù‹: Ø¶Ø¨Ø· Ù‡ÙˆÙŠØªÙƒ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙ‚Ø· ===
:: Ù‡Ø°Ø§ ÙŠÙ…Ù†Ø¹ Ø¸Ù‡ÙˆØ± Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø¬Ù‡Ø§Ø² (Anass) ÙˆÙŠØ¸Ù‡Ø± Ø§Ø³Ù…Ùƒ Ø£Ù†Øª
echo [CONFIG] Setting user identity to %MY_NAME%...
git config user.name "%MY_NAME%"
git config user.email "%MY_EMAIL%"

:: 5. Ø±Ø¨Ø· Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¨Ø±Ø§Ø¨Ø· GitHub
git remote get-url origin >nul 2>nul
if %errorlevel% neq 0 (
    echo [REMOTE] Adding remote origin...
    git remote add origin %REPO_URL%
) else (
    echo [REMOTE] Origin already exists, ensuring URL is correct...
    git remote set-url origin %REPO_URL%
)

:: 6. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„ÙØ§Øª (Ù…Ø¹ ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©)
echo [ADD] Adding files...
git rm --cached .env >nul 2>nul
git add .

:: 7. Ø¹Ù…Ù„ Ø§Ù„ÙƒÙˆÙ…ÙŠØª (Commit) Ø¨Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
set "COMMIT_MSG=[%REPO_NAME%] Update: %TIMESTAMP%"
echo [COMMIT] Message: %COMMIT_MSG%
git commit -m "%COMMIT_MSG%"

:: 8. Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ GitHub
echo.
echo [PUSH] Uploading to GitHub...
echo ---------------------------------------------------
git branch -M main
git push -u origin main

if %errorlevel% neq 0 (
    echo.
    echo [WARNING] Push failed! 
    echo Possible reasons:
    echo 1. The repository "%REPO_NAME%" does not exist on GitHub.com yet.
    echo    (Please go to GitHub and create an empty repo named MultiAiAgentic first).
    echo 2. Internet connection issue.
    echo 3. Permissions issue (Login required).
) else (
    echo.
    echo [SUCCESS] Done! Your code is live on GitHub as %MY_NAME%.
)

echo.
pause
</file>

<file path="agent-orchestrator-hub/index.html">
<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³ - AI Orchestration</title>
    <meta name="description" content="Ù…Ù†ØµØ© ØªÙ†Ø³ÙŠÙ‚ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠØ© - Multi-Agent AI Orchestration" />
    <meta name="author" content="Wakil Plus" />
    <meta name="theme-color" content="#29a800" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³" />
    <link rel="apple-touch-icon" href="/pwa-192.png" />

    <meta property="og:title" content="ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³ - AI Orchestration" />
    <meta property="og:description" content="Ù…Ù†ØµØ© ØªÙ†Ø³ÙŠÙ‚ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠØ©" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@WakilPlus" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="agent-orchestrator-hub/package.json">
{
  "name": "vite_react_shadcn_ts",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "build:dev": "vite build --mode development",
    "lint": "eslint .",
    "preview": "vite preview",
    "test": "vitest run",
    "test:watch": "vitest"
  },
  "dependencies": {
    "@hookform/resolvers": "^3.10.0",
    "@radix-ui/react-accordion": "^1.2.11",
    "@radix-ui/react-alert-dialog": "^1.1.14",
    "@radix-ui/react-aspect-ratio": "^1.1.7",
    "@radix-ui/react-avatar": "^1.1.10",
    "@radix-ui/react-checkbox": "^1.3.2",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-context-menu": "^2.2.15",
    "@radix-ui/react-dialog": "^1.1.14",
    "@radix-ui/react-dropdown-menu": "^2.1.15",
    "@radix-ui/react-hover-card": "^1.1.14",
    "@radix-ui/react-label": "^2.1.7",
    "@radix-ui/react-menubar": "^1.1.15",
    "@radix-ui/react-navigation-menu": "^1.2.13",
    "@radix-ui/react-popover": "^1.1.14",
    "@radix-ui/react-progress": "^1.1.7",
    "@radix-ui/react-radio-group": "^1.3.7",
    "@radix-ui/react-scroll-area": "^1.2.9",
    "@radix-ui/react-select": "^2.2.5",
    "@radix-ui/react-separator": "^1.1.7",
    "@radix-ui/react-slider": "^1.3.5",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.2.5",
    "@radix-ui/react-tabs": "^1.1.12",
    "@radix-ui/react-toast": "^1.2.14",
    "@radix-ui/react-toggle": "^1.1.9",
    "@radix-ui/react-toggle-group": "^1.1.10",
    "@radix-ui/react-tooltip": "^1.2.7",
    "@tanstack/react-query": "^5.83.0",
    "@xyflow/react": "^12.10.0",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "cmdk": "^1.1.1",
    "date-fns": "^3.6.0",
    "embla-carousel-react": "^8.6.0",
    "framer-motion": "^12.34.0",
    "input-otp": "^1.4.2",
    "lucide-react": "^0.462.0",
    "next-themes": "^0.3.0",
    "react": "^18.3.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.61.1",
    "react-markdown": "^10.1.0",
    "react-resizable-panels": "^2.1.9",
    "react-router-dom": "^6.30.1",
    "recharts": "^2.15.4",
    "sonner": "^1.7.4",
    "tailwind-merge": "^2.6.0",
    "tailwindcss-animate": "^1.0.7",
    "vaul": "^0.9.9",
    "vite-plugin-pwa": "^1.2.0",
    "zod": "^3.25.76",
    "zustand": "^5.0.11"
  },
  "devDependencies": {
    "@eslint/js": "^9.32.0",
    "@tailwindcss/typography": "^0.5.16",
    "@testing-library/jest-dom": "^6.6.0",
    "@testing-library/react": "^16.0.0",
    "@types/node": "^22.16.5",
    "@types/react": "^18.3.23",
    "@types/react-dom": "^18.3.7",
    "@vitejs/plugin-react-swc": "^3.11.0",
    "autoprefixer": "^10.4.21",
    "eslint": "^9.32.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.20",
    "globals": "^15.15.0",
    "jsdom": "^20.0.3",
    "lovable-tagger": "^1.1.13",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.17",
    "typescript": "^5.8.3",
    "typescript-eslint": "^8.38.0",
    "vite": "^5.4.19",
    "vitest": "^3.2.4"
  }
}
</file>

<file path="agent-orchestrator-hub/postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="agent-orchestrator-hub/public/placeholder.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="1200" fill="none"><rect width="1200" height="1200" fill="#EAEAEA" rx="3"/><g opacity=".5"><g opacity=".5"><path fill="#FAFAFA" d="M600.709 736.5c-75.454 0-136.621-61.167-136.621-136.62 0-75.454 61.167-136.621 136.621-136.621 75.453 0 136.62 61.167 136.62 136.621 0 75.453-61.167 136.62-136.62 136.62Z"/><path stroke="#C9C9C9" stroke-width="2.418" d="M600.709 736.5c-75.454 0-136.621-61.167-136.621-136.62 0-75.454 61.167-136.621 136.621-136.621 75.453 0 136.62 61.167 136.62 136.621 0 75.453-61.167 136.62-136.62 136.62Z"/></g><path stroke="url(#a)" stroke-width="2.418" d="M0-1.209h553.581" transform="scale(1 -1) rotate(45 1163.11 91.165)"/><path stroke="url(#b)" stroke-width="2.418" d="M404.846 598.671h391.726"/><path stroke="url(#c)" stroke-width="2.418" d="M599.5 795.742V404.017"/><path stroke="url(#d)" stroke-width="2.418" d="m795.717 796.597-391.441-391.44"/><path fill="#fff" d="M600.709 656.704c-31.384 0-56.825-25.441-56.825-56.824 0-31.384 25.441-56.825 56.825-56.825 31.383 0 56.824 25.441 56.824 56.825 0 31.383-25.441 56.824-56.824 56.824Z"/><g clip-path="url(#e)"><path fill="#666" fill-rule="evenodd" d="M616.426 586.58h-31.434v16.176l3.553-3.554.531-.531h9.068l.074-.074 8.463-8.463h2.565l7.18 7.181V586.58Zm-15.715 14.654 3.698 3.699 1.283 1.282-2.565 2.565-1.282-1.283-5.2-5.199h-6.066l-5.514 5.514-.073.073v2.876a2.418 2.418 0 0 0 2.418 2.418h26.598a2.418 2.418 0 0 0 2.418-2.418v-8.317l-8.463-8.463-7.181 7.181-.071.072Zm-19.347 5.442v4.085a6.045 6.045 0 0 0 6.046 6.045h26.598a6.044 6.044 0 0 0 6.045-6.045v-7.108l1.356-1.355-1.282-1.283-.074-.073v-17.989h-38.689v23.43l-.146.146.146.147Z" clip-rule="evenodd"/></g><path stroke="#C9C9C9" stroke-width="2.418" d="M600.709 656.704c-31.384 0-56.825-25.441-56.825-56.824 0-31.384 25.441-56.825 56.825-56.825 31.383 0 56.824 25.441 56.824 56.825 0 31.383-25.441 56.824-56.824 56.824Z"/></g><defs><linearGradient id="a" x1="554.061" x2="-.48" y1=".083" y2=".087" gradientUnits="userSpaceOnUse"><stop stop-color="#C9C9C9" stop-opacity="0"/><stop offset=".208" stop-color="#C9C9C9"/><stop offset=".792" stop-color="#C9C9C9"/><stop offset="1" stop-color="#C9C9C9" stop-opacity="0"/></linearGradient><linearGradient id="b" x1="796.912" x2="404.507" y1="599.963" y2="599.965" gradientUnits="userSpaceOnUse"><stop stop-color="#C9C9C9" stop-opacity="0"/><stop offset=".208" stop-color="#C9C9C9"/><stop offset=".792" stop-color="#C9C9C9"/><stop offset="1" stop-color="#C9C9C9" stop-opacity="0"/></linearGradient><linearGradient id="c" x1="600.792" x2="600.794" y1="403.677" y2="796.082" gradientUnits="userSpaceOnUse"><stop stop-color="#C9C9C9" stop-opacity="0"/><stop offset=".208" stop-color="#C9C9C9"/><stop offset=".792" stop-color="#C9C9C9"/><stop offset="1" stop-color="#C9C9C9" stop-opacity="0"/></linearGradient><linearGradient id="d" x1="404.85" x2="796.972" y1="403.903" y2="796.02" gradientUnits="userSpaceOnUse"><stop stop-color="#C9C9C9" stop-opacity="0"/><stop offset=".208" stop-color="#C9C9C9"/><stop offset=".792" stop-color="#C9C9C9"/><stop offset="1" stop-color="#C9C9C9" stop-opacity="0"/></linearGradient><clipPath id="e"><path fill="#fff" d="M581.364 580.535h38.689v38.689h-38.689z"/></clipPath></defs></svg>
</file>

<file path="agent-orchestrator-hub/public/robots.txt">
User-agent: Googlebot
Allow: /

User-agent: Bingbot
Allow: /

User-agent: Twitterbot
Allow: /

User-agent: facebookexternalhit
Allow: /

User-agent: *
Allow: /
</file>

<file path="agent-orchestrator-hub/README.md">
# Welcome to your Lovable project

## Project info

**URL**: https://lovable.dev/projects/REPLACE_WITH_PROJECT_ID

## How can I edit this code?

There are several ways of editing your application.

**Use Lovable**

Simply visit the [Lovable Project](https://lovable.dev/projects/REPLACE_WITH_PROJECT_ID) and start prompting.

Changes made via Lovable will be committed automatically to this repo.

**Use your preferred IDE**

If you want to work locally using your own IDE, you can clone this repo and push changes. Pushed changes will also be reflected in Lovable.

The only requirement is having Node.js & npm installed - [install with nvm](https://github.com/nvm-sh/nvm#installing-and-updating)

Follow these steps:

```sh
# Step 1: Clone the repository using the project's Git URL.
git clone <YOUR_GIT_URL>

# Step 2: Navigate to the project directory.
cd <YOUR_PROJECT_NAME>

# Step 3: Install the necessary dependencies.
npm i

# Step 4: Start the development server with auto-reloading and an instant preview.
npm run dev
```

**Edit a file directly in GitHub**

- Navigate to the desired file(s).
- Click the "Edit" button (pencil icon) at the top right of the file view.
- Make your changes and commit the changes.

**Use GitHub Codespaces**

- Navigate to the main page of your repository.
- Click on the "Code" button (green button) near the top right.
- Select the "Codespaces" tab.
- Click on "New codespace" to launch a new Codespace environment.
- Edit files directly within the Codespace and commit and push your changes once you're done.

## What technologies are used for this project?

This project is built with:

- Vite
- TypeScript
- React
- shadcn-ui
- Tailwind CSS

## How can I deploy this project?

Simply open [Lovable](https://lovable.dev/projects/REPLACE_WITH_PROJECT_ID) and click on Share -> Publish.

## Can I connect a custom domain to my Lovable project?

Yes, you can!

To connect a domain, navigate to Project > Settings > Domains and click Connect Domain.

Read more here: [Setting up a custom domain](https://docs.lovable.dev/features/custom-domain#custom-domain)
</file>

<file path="agent-orchestrator-hub/src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="agent-orchestrator-hub/src/App.tsx">
import { Toaster } from "@/components/ui/toaster";
import { Toaster as Sonner } from "@/components/ui/sonner";
import { TooltipProvider } from "@/components/ui/tooltip";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { BrowserRouter, Routes, Route } from "react-router-dom";
import { AppLayout } from "@/components/AppLayout";
import Index from "./pages/Index";
import AgentsPage from "./pages/AgentsPage";
import ChatPage from "./pages/ChatPage";
import PipelinePage from "./pages/PipelinePage";
import ComparePage from "./pages/ComparePage";
import DialoguePage from "./pages/DialoguePage";
import SettingsPage from "./pages/SettingsPage";
import ApiDocsPage from "./pages/ApiDocsPage";
import NotFound from "./pages/NotFound";

const queryClient = new QueryClient();

const App = () => (
  <QueryClientProvider client={queryClient}>
    <TooltipProvider>
      <Toaster />
      <Sonner />
      <BrowserRouter>
        <AppLayout>
          <Routes>
            <Route path="/" element={<Index />} />
            <Route path="/agents" element={<AgentsPage />} />
            <Route path="/chat" element={<ChatPage />} />
            <Route path="/pipeline" element={<PipelinePage />} />
            <Route path="/compare" element={<ComparePage />} />
            <Route path="/dialogue" element={<DialoguePage />} />
            <Route path="/settings" element={<SettingsPage />} />
            <Route path="/api-docs" element={<ApiDocsPage />} />
            <Route path="*" element={<NotFound />} />
          </Routes>
        </AppLayout>
      </BrowserRouter>
    </TooltipProvider>
  </QueryClientProvider>
);

export default App;
</file>

<file path="agent-orchestrator-hub/src/components/AgentCard.tsx">
import { motion } from 'framer-motion';
import { Bot, Pencil, Trash2, MessageSquare } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { useAgentStore } from '@/store/agentStore';
import { AI_PROVIDERS } from '@/types';
import type { Agent } from '@/types';
import { Link } from 'react-router-dom';
import { toast } from 'sonner';

interface AgentCardProps {
  agent: Agent;
  onEdit: (agent: Agent) => void;
}

export function AgentCard({ agent, onEdit }: AgentCardProps) {
  const { deleteAgent } = useAgentStore();
  const provider = AI_PROVIDERS.find((p) => p.id === agent.modelProvider);

  const handleDelete = () => {
    deleteAgent(agent.id);
    toast.success('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙˆÙƒÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');
  };

  return (
    <motion.div
      variants={{ hidden: { opacity: 0, y: 16 }, show: { opacity: 1, y: 0 } }}
      className="glass-card p-5 group hover:border-primary/20 transition-all duration-300"
    >
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center gap-3">
          <div className="w-11 h-11 rounded-xl bg-primary/15 flex items-center justify-center text-xl shrink-0">
            {provider?.icon || 'ğŸ¤–'}
          </div>
          <div className="min-w-0">
            <h3 className="font-semibold text-foreground truncate">{agent.name}</h3>
            <p className="text-xs text-muted-foreground">{provider?.name} Â· {agent.modelId}</p>
          </div>
        </div>
      </div>

      {agent.description && (
        <p className="text-sm text-muted-foreground mb-4 line-clamp-2">{agent.description}</p>
      )}

      <div className="flex items-center gap-2 pt-3 border-t border-border/50">
        <Link to={`/chat?agent=${agent.id}`} className="flex-1">
          <Button variant="ghost" size="sm" className="w-full gap-2 text-primary hover:text-primary hover:bg-primary/10">
            <MessageSquare className="w-3.5 h-3.5" />
            Ù…Ø­Ø§Ø¯Ø«Ø©
          </Button>
        </Link>
        <Button variant="ghost" size="sm" onClick={() => onEdit(agent)} className="gap-1 text-muted-foreground hover:text-foreground">
          <Pencil className="w-3.5 h-3.5" />
        </Button>
        <Button variant="ghost" size="sm" onClick={handleDelete} className="gap-1 text-muted-foreground hover:text-destructive">
          <Trash2 className="w-3.5 h-3.5" />
        </Button>
      </div>
    </motion.div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/components/AgentFormDialog.tsx">
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import {
  Dialog, DialogContent, DialogHeader, DialogTitle,
} from '@/components/ui/dialog';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Label } from '@/components/ui/label';
import {
  Select, SelectContent, SelectItem, SelectTrigger, SelectValue,
} from '@/components/ui/select';
import { useAgentStore } from '@/store/agentStore';
import { useApiKeyStore } from '@/store/apiKeyStore';
import { AI_PROVIDERS, AI_MODELS, type Agent } from '@/types';
import { toast } from 'sonner';
import { useEffect, useState } from 'react';
import { Slider } from '@/components/ui/slider';
import { Key, AlertTriangle } from 'lucide-react';

const schema = z.object({
  name: z.string().min(1, 'Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨'),
  description: z.string().optional(),
  systemPrompt: z.string().min(1, 'System Prompt Ù…Ø·Ù„ÙˆØ¨'),
  modelProvider: z.string().min(1, 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø²ÙˆØ¯'),
  modelId: z.string().min(1, 'Ø§Ø®ØªØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬'),
  temperature: z.number().min(0).max(2),
  maxTokens: z.number().min(100).max(128000),
});

type FormData = z.infer<typeof schema>;

interface Props {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  editAgent?: Agent;
}

export function AgentFormDialog({ open, onOpenChange, editAgent }: Props) {
  const { addAgent, updateAgent } = useAgentStore();
  const { apiKeys, getKeysByProvider } = useApiKeyStore();
  const [selectedKeyId, setSelectedKeyId] = useState<string>('');

  const form = useForm<FormData>({
    resolver: zodResolver(schema),
    defaultValues: {
      name: '',
      description: '',
      systemPrompt: '',
      modelProvider: 'googleai',
      modelId: 'gemini-2.5-flash',
      temperature: 0.7,
      maxTokens: 4096,
    },
  });

  const watchProvider = form.watch('modelProvider');
  const models = AI_MODELS[watchProvider] || [];
  const providerKeys = getKeysByProvider(watchProvider);

  useEffect(() => {
    if (editAgent) {
      form.reset({
        name: editAgent.name,
        description: editAgent.description || '',
        systemPrompt: editAgent.systemPrompt,
        modelProvider: editAgent.modelProvider,
        modelId: editAgent.modelId,
        temperature: editAgent.modelConfig?.temperature ?? 0.7,
        maxTokens: editAgent.modelConfig?.maxTokens ?? 4096,
      });
      setSelectedKeyId(editAgent.apiKeyId || '');
    } else {
      form.reset({
        name: '',
        description: '',
        systemPrompt: '',
        modelProvider: 'googleai',
        modelId: 'gemini-2.5-flash',
        temperature: 0.7,
        maxTokens: 4096,
      });
      setSelectedKeyId('');
    }
  }, [editAgent, open]);

  // Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø²ÙˆØ¯ØŒ Ø§Ø®ØªØ± Ø£ÙˆÙ„ Ù…ÙØªØ§Ø­ Ù…ØªÙˆÙØ± Ø£Ùˆ Ø§ØªØ±Ùƒ ÙØ§Ø±ØºØ§Ù‹
  useEffect(() => {
    const keys = getKeysByProvider(watchProvider);
    if (keys.length > 0 && !keys.find((k) => k.id === selectedKeyId)) {
      setSelectedKeyId(keys[0].id);
    } else if (keys.length === 0) {
      setSelectedKeyId('');
    }
  }, [watchProvider, apiKeys]);

  const onSubmit = (data: FormData) => {
    const payload = {
      name: data.name,
      description: data.description,
      systemPrompt: data.systemPrompt,
      modelProvider: data.modelProvider,
      modelId: data.modelId,
      apiKeyId: selectedKeyId || undefined,
      modelConfig: { temperature: data.temperature, maxTokens: data.maxTokens },
    };
    if (editAgent) {
      updateAgent(editAgent.id, payload);
      toast.success('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙƒÙŠÙ„');
    } else {
      addAgent(payload);
      toast.success('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆÙƒÙŠÙ„');
    }
    onOpenChange(false);
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-lg bg-card border-border">
        <DialogHeader>
          <DialogTitle>{editAgent ? 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆÙƒÙŠÙ„' : 'ÙˆÙƒÙŠÙ„ Ø¬Ø¯ÙŠØ¯'}</DialogTitle>
        </DialogHeader>
        <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
          <div>
            <Label>Ø§Ù„Ø§Ø³Ù…</Label>
            <Input {...form.register('name')} placeholder="Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„" className="bg-secondary border-border mt-1" />
            {form.formState.errors.name && <p className="text-destructive text-xs mt-1">{form.formState.errors.name.message}</p>}
          </div>

          <div>
            <Label>Ø§Ù„ÙˆØµÙ</Label>
            <Input {...form.register('description')} placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ±" className="bg-secondary border-border mt-1" />
          </div>

          <div className="grid grid-cols-2 gap-3">
            <div>
              <Label>Ø§Ù„Ù…Ø²ÙˆØ¯</Label>
              <Select value={watchProvider} onValueChange={(v) => { form.setValue('modelProvider', v); form.setValue('modelId', AI_MODELS[v]?.[0]?.id || ''); }}>
                <SelectTrigger className="bg-secondary border-border mt-1">
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  {AI_PROVIDERS.map((p) => (
                    <SelectItem key={p.id} value={p.id}>{p.icon} {p.name}</SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
            <div>
              <Label>Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</Label>
              <Select value={form.watch('modelId')} onValueChange={(v) => form.setValue('modelId', v)}>
                <SelectTrigger className="bg-secondary border-border mt-1">
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  {models.map((m) => (
                    <SelectItem key={m.id} value={m.id}>{m.name}</SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
          </div>

          {/* Ø§Ø®ØªÙŠØ§Ø± Ù…ÙØªØ§Ø­ API */}
          <div>
            <Label className="flex items-center gap-1.5">
              <Key className="w-3.5 h-3.5" /> Ù…ÙØªØ§Ø­ API
            </Label>
            {providerKeys.length > 0 ? (
              <Select value={selectedKeyId} onValueChange={setSelectedKeyId}>
                <SelectTrigger className="bg-secondary border-border mt-1">
                  <SelectValue placeholder="Ø§Ø®ØªØ± Ù…ÙØªØ§Ø­Ø§Ù‹..." />
                </SelectTrigger>
                <SelectContent>
                  {providerKeys.map((k) => (
                    <SelectItem key={k.id} value={k.id}>
                      {k.label} ({k.key.slice(0, 6)}...{k.key.slice(-4)})
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            ) : (
              <div className="mt-1 p-2.5 rounded-lg bg-chart-4/10 border border-chart-4/20 flex items-center gap-2">
                <AlertTriangle className="w-4 h-4 text-chart-4 shrink-0" />
                <p className="text-xs text-chart-4">
                  Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙØ§ØªÙŠØ­ Ù„Ù€ {AI_PROVIDERS.find((p) => p.id === watchProvider)?.name}. Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ø¥Ø¶Ø§ÙØ© Ù…ÙØªØ§Ø­.
                </p>
              </div>
            )}
          </div>

          <div>
            <Label>System Prompt</Label>
            <Textarea {...form.register('systemPrompt')} placeholder="ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„ÙˆÙƒÙŠÙ„..." rows={4} className="bg-secondary border-border mt-1 resize-none" />
          </div>

          <div>
            <div className="flex justify-between items-center mb-2">
              <Label>Temperature</Label>
              <span className="text-xs text-muted-foreground font-mono">{form.watch('temperature')}</span>
            </div>
            <Slider
              value={[form.watch('temperature')]}
              onValueChange={([v]) => form.setValue('temperature', v)}
              min={0} max={2} step={0.1}
            />
          </div>

          <div className="flex justify-end gap-2 pt-2">
            <Button type="button" variant="ghost" onClick={() => onOpenChange(false)}>Ø¥Ù„ØºØ§Ø¡</Button>
            <Button type="submit">{editAgent ? 'ØªØ­Ø¯ÙŠØ«' : 'Ø¥Ù†Ø´Ø§Ø¡'}</Button>
          </div>
        </form>
      </DialogContent>
    </Dialog>
  );
}
</file>

<file path="agent-orchestrator-hub/src/components/AppLayout.tsx">
import { AppSidebar } from './AppSidebar';

export function AppLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="flex min-h-screen bg-background">
      <AppSidebar />
      <main className="flex-1 overflow-auto min-w-0">
        {children}
      </main>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/components/AppSidebar.tsx">
import { Link, useLocation } from 'react-router-dom';
import {
  LayoutDashboard, Bot, MessageSquare, GitBranch,
  Scale, Zap, Settings, ChevronLeft, ChevronRight,
  MessageCircle, FileCode, Menu, X,
} from 'lucide-react';
import { useState, useEffect } from 'react';
import { cn } from '@/lib/utils';
import { motion, AnimatePresence } from 'framer-motion';
import { useI18nStore } from '@/store/i18nStore';

const navItems = [
  { path: '/', labelKey: 'nav.dashboard', icon: LayoutDashboard },
  { path: '/agents', labelKey: 'nav.agents', icon: Bot },
  { path: '/chat', labelKey: 'nav.chat', icon: MessageSquare },
  { path: '/pipeline', labelKey: 'nav.pipeline', icon: GitBranch },
  { path: '/compare', labelKey: 'nav.compare', icon: Scale },
  { path: '/dialogue', labelKey: 'nav.dialogue', icon: MessageCircle },
  { path: '/api-docs', labelKey: 'nav.apiDocs', icon: FileCode },
  { path: '/settings', labelKey: 'nav.settings', icon: Settings },
];

export function AppSidebar() {
  const location = useLocation();
  const { t, locale } = useI18nStore();
  const [collapsed, setCollapsed] = useState(false);
  const [mobileOpen, setMobileOpen] = useState(false);

  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø±
  useEffect(() => {
    setMobileOpen(false);
  }, [location.pathname]);

  // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
  useEffect(() => {
    const handleResize = () => {
      if (window.innerWidth >= 768) setMobileOpen(false);
    };
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  const navContent = (
    <>
      {/* Logo */}
      <div className="flex items-center gap-3 px-4 h-14 md:h-16 border-b border-sidebar-border shrink-0">
        <div className="w-9 h-9 rounded-lg bg-primary flex items-center justify-center shrink-0">
          <Zap className="w-5 h-5 text-primary-foreground" />
        </div>
        {!collapsed && (
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="overflow-hidden min-w-0">
            <h1 className="text-base md:text-lg font-bold text-foreground whitespace-nowrap">ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³</h1>
            <p className="text-[10px] text-muted-foreground -mt-0.5">AI Orchestration</p>
          </motion.div>
        )}
        {/* Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¬ÙˆØ§Ù„ */}
        <button
          onClick={() => setMobileOpen(false)}
          className="md:hidden ml-auto p-1 rounded-lg hover:bg-sidebar-accent transition-colors"
        >
          <X className="w-5 h-5 text-muted-foreground" />
        </button>
      </div>

      {/* Navigation */}
      <nav className="flex-1 py-3 md:py-4 px-2 space-y-0.5 md:space-y-1 overflow-y-auto">
        {navItems.map((item) => {
          const isActive = location.pathname === item.path;
          return (
            <Link
              key={item.path}
              to={item.path}
              className={cn(
                "flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",
                isActive
                  ? "bg-primary/15 text-primary glow-primary"
                  : "text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"
              )}
            >
              <item.icon className={cn("w-5 h-5 shrink-0", isActive && "text-primary")} />
              {!collapsed && <span className="whitespace-nowrap truncate">{t(item.labelKey)}</span>}
            </Link>
          );
        })}
      </nav>

      {/* Collapse Toggle â€” Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ ÙÙ‚Ø· */}
      <div className="p-2 border-t border-sidebar-border shrink-0 hidden md:block">
        <button
          onClick={() => setCollapsed(!collapsed)}
          className="w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-muted-foreground hover:bg-sidebar-accent transition-colors"
        >
          {collapsed
            ? <ChevronLeft className="w-4 h-4" />
            : <ChevronRight className="w-4 h-4" />
          }
          {!collapsed && <span className="text-xs">{t('nav.collapse')}</span>}
        </button>
      </div>
    </>
  );

  return (
    <>
      {/* ===== Ø²Ø± hamburger Ù„Ù„Ø¬ÙˆØ§Ù„ ===== */}
      <button
        onClick={() => setMobileOpen(true)}
        className="md:hidden fixed top-3 right-3 z-50 w-10 h-10 rounded-xl bg-sidebar border border-sidebar-border flex items-center justify-center shadow-lg hover:bg-sidebar-accent transition-colors"
        aria-label="ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"
      >
        <Menu className="w-5 h-5 text-foreground" />
      </button>

      {/* ===== Sidebar Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ ===== */}
      <motion.aside
        initial={false}
        animate={{ width: collapsed ? 72 : 260 }}
        transition={{ duration: 0.2 }}
        className="h-screen sticky top-0 hidden md:flex flex-col bg-sidebar border-l border-sidebar-border"
      >
        {navContent}
      </motion.aside>

      {/* ===== Drawer Ù„Ù„Ø¬ÙˆØ§Ù„ ===== */}
      <AnimatePresence>
        {mobileOpen && (
          <>
            {/* Overlay */}
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              onClick={() => setMobileOpen(false)}
              className="md:hidden fixed inset-0 z-50 bg-black/60 backdrop-blur-sm"
            />
            {/* Drawer */}
            <motion.aside
              initial={{ x: locale === 'ar' ? 280 : -280, opacity: 0 }}
              animate={{ x: 0, opacity: 1 }}
              exit={{ x: locale === 'ar' ? 280 : -280, opacity: 0 }}
              transition={{ type: 'spring', damping: 25, stiffness: 300 }}
              className={cn(
                "md:hidden fixed top-0 bottom-0 z-50 w-[260px] flex flex-col bg-sidebar border-sidebar-border",
                locale === 'ar' ? 'right-0 border-l' : 'left-0 border-r'
              )}
            >
              {navContent}
            </motion.aside>
          </>
        )}
      </AnimatePresence>
    </>
  );
}
</file>

<file path="agent-orchestrator-hub/src/components/NavLink.tsx">
import { NavLink as RouterNavLink, NavLinkProps } from "react-router-dom";
import { forwardRef } from "react";
import { cn } from "@/lib/utils";

interface NavLinkCompatProps extends Omit<NavLinkProps, "className"> {
  className?: string;
  activeClassName?: string;
  pendingClassName?: string;
}

const NavLink = forwardRef<HTMLAnchorElement, NavLinkCompatProps>(
  ({ className, activeClassName, pendingClassName, to, ...props }, ref) => {
    return (
      <RouterNavLink
        ref={ref}
        to={to}
        className={({ isActive, isPending }) =>
          cn(className, isActive && activeClassName, isPending && pendingClassName)
        }
        {...props}
      />
    );
  },
);

NavLink.displayName = "NavLink";

export { NavLink };
</file>

<file path="agent-orchestrator-hub/src/components/PageHeader.tsx">
import { motion } from 'framer-motion';

interface PageHeaderProps {
  title: string;
  description?: string;
  actions?: React.ReactNode;
}

export function PageHeader({ title, description, actions }: PageHeaderProps) {
  return (
    <motion.div
      initial={{ opacity: 0, y: -10 }}
      animate={{ opacity: 1, y: 0 }}
      className="flex flex-col sm:flex-row sm:items-start justify-between gap-3 mb-6 md:mb-8"
    >
      <div className="min-w-0">
        <h1 className="text-xl md:text-2xl font-bold text-foreground truncate">{title}</h1>
        {description && (
          <p className="text-muted-foreground mt-0.5 md:mt-1 text-xs md:text-sm">{description}</p>
        )}
      </div>
      {actions && <div className="flex items-center gap-2 shrink-0">{actions}</div>}
    </motion.div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/components/pipeline/AgentNode.tsx">
import { Handle, Position, type NodeProps, useReactFlow } from '@xyflow/react';
import { memo, useState } from 'react';
import { cn } from '@/lib/utils';
import { Trash2, RefreshCw, ChevronDown } from 'lucide-react';
import { useAgentStore } from '@/store/agentStore';
import { useI18nStore } from '@/store/i18nStore';
import { AI_PROVIDERS } from '@/types';

interface AgentNodeData {
  label: string;
  provider: string;
  icon: string;
  agentId: string;
  status?: 'pending' | 'running' | 'completed' | 'failed' | 'skipped';
}

const statusStyles: Record<string, string> = {
  pending: 'border-border',
  running: 'border-chart-4 shadow-[0_0_15px_hsl(45,90%,55%,0.3)]',
  completed: 'border-primary shadow-[0_0_15px_hsl(110,100%,33%,0.3)]',
  failed: 'border-destructive shadow-[0_0_15px_hsl(0,72%,51%,0.3)]',
  skipped: 'border-muted-foreground opacity-50',
};

const statusIcons: Record<string, string> = {
  pending: 'â³',
  running: 'âš¡',
  completed: 'âœ“',
  failed: 'âœ—',
};

function AgentNode({ id, data, selected }: NodeProps) {
  const nodeData = data as unknown as AgentNodeData;
  const status = nodeData.status || 'pending';
  const { setNodes, setEdges } = useReactFlow();
  const { agents } = useAgentStore();
  const { t } = useI18nStore();
  const [showReplace, setShowReplace] = useState(false);
  const [showActions, setShowActions] = useState(false);

  // Ø­Ø°Ù Ø§Ù„Ø¹Ù‚Ø¯Ø© + ÙƒÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ØªØµÙ„Ø©
  const handleDelete = (e: React.MouseEvent) => {
    e.stopPropagation();
    setEdges((eds) => eds.filter((edge) => edge.source !== id && edge.target !== id));
    setNodes((nds) => nds.filter((n) => n.id !== id));
  };

  // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ÙˆÙƒÙŠÙ„
  const handleReplace = (agentId: string) => {
    const agent = agents.find((a) => a.id === agentId);
    if (!agent) return;
    const provider = AI_PROVIDERS.find((p) => p.id === agent.modelProvider);
    setNodes((nds) =>
      nds.map((n) =>
        n.id === id
          ? {
            ...n,
            data: {
              ...n.data,
              label: agent.name,
              provider: provider?.name || '',
              icon: provider?.icon || 'ğŸ¤–',
              agentId: agent.id,
              status: 'pending',
            },
          }
          : n
      )
    );
    setShowReplace(false);
  };

  return (
    <div
      className={cn(
        'glass-card px-5 py-4 min-w-[180px] border-2 transition-all duration-300 relative group',
        statusStyles[status] || statusStyles.pending,
        selected && 'ring-2 ring-primary/50'
      )}
      onMouseEnter={() => setShowActions(true)}
      onMouseLeave={() => { setShowActions(false); setShowReplace(false); }}
    >
      {/* Ù…Ù‚Ø¨Ø¶ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */}
      <Handle
        type="target"
        position={Position.Top}
        className="!w-3 !h-3 !bg-primary !border-2 !border-background"
      />

      <div className="flex items-center gap-3">
        <div className={cn(
          'w-10 h-10 rounded-xl flex items-center justify-center text-lg',
          status === 'running' ? 'bg-chart-4/20 animate-pulse' : 'bg-primary/10'
        )}>
          {status === 'running' ? 'âš¡' : nodeData.icon}
        </div>
        <div className="flex-1 min-w-0">
          <p className="text-sm font-bold text-foreground truncate">{nodeData.label}</p>
          <p className="text-[10px] text-muted-foreground">{nodeData.provider}</p>
        </div>
        {status !== 'pending' && (
          <span className={cn(
            'text-xs font-bold',
            status === 'completed' && 'text-primary',
            status === 'failed' && 'text-destructive',
            status === 'running' && 'text-chart-4',
          )}>
            {statusIcons[status]}
          </span>
        )}
      </div>

      {/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… â€” ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ hover */}
      {(showActions || selected) && (
        <div className="absolute -top-2 -left-2 flex gap-0.5 z-10" dir="rtl">
          {/* Ø­Ø°Ù Ø§Ù„Ø¹Ù‚Ø¯Ø© */}
          <button
            onClick={handleDelete}
            className="w-5 h-5 rounded-full bg-destructive/90 hover:bg-destructive flex items-center justify-center shadow-md transition-colors"
            title={t('node.delete')}
          >
            <Trash2 className="w-2.5 h-2.5 text-destructive-foreground" />
          </button>
          {/* Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ÙˆÙƒÙŠÙ„ */}
          <button
            onClick={(e) => { e.stopPropagation(); setShowReplace(!showReplace); }}
            className="w-5 h-5 rounded-full bg-chart-4/90 hover:bg-chart-4 flex items-center justify-center shadow-md transition-colors"
            title={t('node.replace')}
          >
            <RefreshCw className="w-2.5 h-2.5 text-background" />
          </button>
        </div>
      )}

      {/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ */}
      {showReplace && (
        <div className="absolute top-full left-0 mt-1 z-20 min-w-[200px] nodrag nopan">
          <div className="bg-background/95 backdrop-blur-md border border-border rounded-xl shadow-xl p-2 space-y-1 max-h-48 overflow-y-auto" dir="rtl">
            <p className="text-[10px] text-muted-foreground font-semibold px-2 py-1">{t('node.replaceWith')}</p>
            {agents
              .filter((a) => a.id !== nodeData.agentId)
              .map((agent) => {
                const p = AI_PROVIDERS.find((pr) => pr.id === agent.modelProvider);
                return (
                  <button
                    key={agent.id}
                    onClick={(e) => { e.stopPropagation(); handleReplace(agent.id); }}
                    className="w-full flex items-center gap-2 px-2.5 py-1.5 rounded-lg hover:bg-secondary text-xs text-foreground transition-colors text-right"
                  >
                    <span>{p?.icon || 'ğŸ¤–'}</span>
                    <span className="truncate">{agent.name}</span>
                  </button>
                );
              })}
            {agents.filter((a) => a.id !== nodeData.agentId).length === 0 && (
              <p className="text-[10px] text-muted-foreground text-center py-2">{t('node.noOthers')}</p>
            )}
          </div>
        </div>
      )}

      {/* Ù…Ù‚Ø¨Ø¶ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ */}
      <Handle
        type="source"
        position={Position.Bottom}
        className="!w-3 !h-3 !bg-accent !border-2 !border-background"
      />
    </div>
  );
}

export default memo(AgentNode);
</file>

<file path="agent-orchestrator-hub/src/components/pipeline/CustomEdge.tsx">
import { BaseEdge, EdgeLabelRenderer, getBezierPath, type EdgeProps, useReactFlow } from '@xyflow/react';
import { memo, useState, useRef, useEffect } from 'react';
import { Trash2, Settings2, RotateCw, Save } from 'lucide-react';
import { useI18nStore } from '@/store/i18nStore';
import { toast } from 'sonner';

const conditionColors: Record<string, string> = {
  always: 'hsl(110, 100%, 33%)',
  on_success: 'hsl(140, 80%, 40%)',
  on_error: 'hsl(0, 72%, 51%)',
  conditional: 'hsl(45, 90%, 55%)',
};

const conditionOptions = ['always', 'on_success', 'on_error', 'conditional'] as const;

function CustomEdge({
  id,
  sourceX,
  sourceY,
  targetX,
  targetY,
  sourcePosition,
  targetPosition,
  data,
  selected,
}: EdgeProps) {
  const { t } = useI18nStore();
  const condition = (data?.condition as string) || 'always';
  const isLoop = !!(data?.isLoop);
  const loopCount = (data?.loopCount as number) || 0;
  const expression = (data?.expression as string) || '';
  const color = isLoop ? 'hsl(280, 80%, 60%)' : (conditionColors[condition] || conditionColors.always);

  const { setEdges } = useReactFlow();
  const [showMenu, setShowMenu] = useState(false);
  const [showExprInput, setShowExprInput] = useState(false);
  const [exprValue, setExprValue] = useState(expression);
  const inputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    if (showExprInput && inputRef.current) {
      inputRef.current.focus();
    }
  }, [showExprInput]);

  const conditionLabels: Record<string, string> = {
    always: t('edge.always'),
    on_success: t('edge.onSuccess'),
    on_error: t('edge.onError'),
    conditional: t('edge.conditional'),
  };

  const [edgePath, labelX, labelY] = getBezierPath({
    sourceX,
    sourceY,
    sourcePosition,
    targetX,
    targetY,
    targetPosition,
  });

  const handleDelete = (e: React.MouseEvent) => {
    e.stopPropagation();
    setEdges((eds) => eds.filter((edge) => edge.id !== id));
  };

  const cycleCondition = (e: React.MouseEvent) => {
    e.stopPropagation();
    const currentIdx = conditionOptions.indexOf(condition as typeof conditionOptions[number]);
    const nextIdx = (currentIdx + 1) % conditionOptions.length;
    const nextCondition = conditionOptions[nextIdx];
    setEdges((eds) =>
      eds.map((edge) =>
        edge.id === id ? { ...edge, data: { ...edge.data, condition: nextCondition } } : edge
      )
    );
    // Ø¥Ø°Ø§ Ø§Ø®ØªØ±Ù†Ø§ "Ø´Ø±Ø·ÙŠ" Ù†ÙØªØ­ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ø·
    if (nextCondition === 'conditional') {
      setShowExprInput(true);
    }
  };

  const saveExpression = () => {
    setEdges((eds) =>
      eds.map((edge) =>
        edge.id === id ? { ...edge, data: { ...edge.data, expression: exprValue } } : edge
      )
    );
    setShowExprInput(false);
    toast.success(t('toast.conditionSaved'));
  };

  const openExprEditor = (e: React.MouseEvent) => {
    e.stopPropagation();
    setExprValue(expression);
    setShowExprInput(true);
  };

  return (
    <>
      {/* Ø®Ø· Ù…ØªÙˆÙ‡Ø¬ Ø®Ù„ÙÙŠ */}
      <BaseEdge
        id={`${id}-glow`}
        path={edgePath}
        style={{
          stroke: color,
          strokeWidth: selected ? 6 : 4,
          opacity: 0.2,
          filter: 'blur(4px)',
        }}
      />
      {/* Ø§Ù„Ø®Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */}
      <BaseEdge
        id={id}
        path={edgePath}
        style={{
          stroke: color,
          strokeWidth: selected ? 3 : 2,
          strokeDasharray: isLoop ? '4 4' : condition === 'conditional' ? '8 4' : undefined,
        }}
      />
      {/* Ø³Ù‡Ù… Ù…ØªØ­Ø±Ùƒ */}
      <circle r="3" fill={color}>
        <animateMotion dur={isLoop ? '1s' : '2s'} repeatCount="indefinite" path={edgePath} />
      </circle>

      {/* Ø§Ù„ØªØ³Ù…ÙŠØ§Øª ÙˆØ£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */}
      <EdgeLabelRenderer>
        <div
          style={{
            position: 'absolute',
            transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,
            pointerEvents: 'all',
          }}
          className="flex flex-col items-center gap-1"
          onMouseEnter={() => setShowMenu(true)}
          onMouseLeave={() => { if (!showExprInput) setShowMenu(false); }}
        >
          {/* ØªØ³Ù…ÙŠØ© Ø§Ù„Ø­Ø§Ù„Ø© */}
          <span
            style={{
              color,
              background: `${color}15`,
              borderColor: `${color}40`,
            }}
            className="px-2 py-0.5 rounded-full border text-[10px] font-medium cursor-pointer"
            onClick={condition === 'conditional' ? openExprEditor : cycleCondition}
          >
            {isLoop
              ? `ğŸ”„ ${t('loop.badge')} Ã—${loopCount}`
              : expression && condition === 'conditional'
                ? `âš¡ ${expression.slice(0, 20)}${expression.length > 20 ? '...' : ''}`
                : (conditionLabels[condition] || condition)
            }
          </span>

          {/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */}
          {(showMenu || selected) && !showExprInput && (
            <div className="flex gap-0.5 bg-background/90 backdrop-blur rounded-lg border border-border p-0.5 shadow-lg">
              <button onClick={cycleCondition} className="w-5 h-5 flex items-center justify-center rounded hover:bg-secondary transition-colors" title={t('edge.changeCondition')}>
                <Settings2 className="w-3 h-3 text-muted-foreground" />
              </button>
              {condition === 'conditional' && (
                <button onClick={openExprEditor} className="w-5 h-5 flex items-center justify-center rounded hover:bg-chart-4/20 transition-colors" title={t('edge.expression')}>
                  <span className="text-[9px]">âš¡</span>
                </button>
              )}
              <button onClick={handleDelete} className="w-5 h-5 flex items-center justify-center rounded hover:bg-destructive/20 transition-colors" title={t('edge.deleteEdge')}>
                <Trash2 className="w-3 h-3 text-destructive" />
              </button>
            </div>
          )}

          {/* Ù…Ø­Ø±Ø± Ø§Ù„Ø´Ø±Ø· Ø§Ù„Ù…Ø®ØµØµ */}
          {showExprInput && (
            <div
              className="bg-background/95 backdrop-blur-md border border-chart-4/40 rounded-xl shadow-xl p-3 min-w-[220px]"
              onClick={(e) => e.stopPropagation()}
            >
              <p className="text-[10px] font-semibold text-chart-4 mb-1.5">âš¡ {t('edge.expression')}</p>
              <input
                ref={inputRef}
                type="text"
                value={exprValue}
                onChange={(e) => setExprValue(e.target.value)}
                onKeyDown={(e) => { if (e.key === 'Enter') saveExpression(); if (e.key === 'Escape') setShowExprInput(false); }}
                placeholder={t('edge.expressionHint')}
                className="w-full h-7 px-2 text-xs rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-chart-4"
              />
              <div className="flex gap-1 mt-2">
                <button
                  onClick={saveExpression}
                  className="flex-1 h-6 rounded-lg bg-chart-4/20 text-chart-4 text-[10px] font-medium flex items-center justify-center gap-1 hover:bg-chart-4/30 transition-colors"
                >
                  <Save className="w-2.5 h-2.5" /> {t('edge.expressionSave')}
                </button>
                <button
                  onClick={() => setShowExprInput(false)}
                  className="h-6 px-2 rounded-lg bg-secondary text-muted-foreground text-[10px] hover:bg-secondary/80 transition-colors"
                >
                  âœ•
                </button>
              </div>
            </div>
          )}
        </div>
      </EdgeLabelRenderer>
    </>
  );
}

export default memo(CustomEdge);
</file>

<file path="agent-orchestrator-hub/src/components/pipeline/ExecutionPanel.tsx">
import { useState, useRef, useCallback } from 'react';
import { type NodeResult, type ExecutionState } from '@/lib/engine/pipeline-executor';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Progress } from '@/components/ui/progress';
import { Button } from '@/components/ui/button';
import {
  Bot, Clock, Coins, CheckCircle, XCircle, Loader2,
  Copy, Download, ChevronDown, ChevronUp, Eye, EyeOff,
  FileText, GripHorizontal, Minimize2, Maximize2,
} from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';
import { toast } from 'sonner';
import ReactMarkdown from 'react-markdown';

interface ExecutionPanelProps {
  status: 'idle' | 'running' | 'completed' | 'failed';
  currentLevel: number;
  totalLevels: number;
  results: Map<string, NodeResult>;
  finalOutput?: string;
}

const statusConfig = {
  pending: { icon: Clock, color: 'text-muted-foreground', label: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±', bg: 'bg-muted/30' },
  running: { icon: Loader2, color: 'text-chart-4', label: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°', bg: 'bg-chart-4/10' },
  completed: { icon: CheckCircle, color: 'text-primary', label: 'Ù…ÙƒØªÙ…Ù„', bg: 'bg-primary/10' },
  failed: { icon: XCircle, color: 'text-destructive', label: 'ÙØ´Ù„', bg: 'bg-destructive/10' },
  skipped: { icon: Clock, color: 'text-muted-foreground', label: 'ØªÙ… ØªØ®Ø·ÙŠÙ‡', bg: 'bg-muted/30' },
};

function copyToClipboard(text: string) {
  navigator.clipboard.writeText(text).then(() => {
    toast.success('ØªÙ… Ø§Ù„Ù†Ø³Ø®');
  }).catch(() => {
    toast.error('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®');
  });
}

function exportResults(results: Map<string, NodeResult>, finalOutput?: string) {
  const lines: string[] = ['# Ù†ØªØ§Ø¦Ø¬ ØªÙ†ÙÙŠØ° Pipeline', `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date().toLocaleString('ar')}`, ''];

  const arr = Array.from(results.values());
  arr.forEach((r, i) => {
    lines.push(`## ${i + 1}. ${r.agentName} (${statusConfig[r.status]?.label})`);
    if (r.duration) lines.push(`â± Ø§Ù„Ù…Ø¯Ø©: ${(r.duration / 1000).toFixed(1)}s`);
    if (r.tokens) lines.push(`ğŸª™ Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª: ${r.tokens.total}`);
    lines.push('');
    if (r.input) {
      lines.push('### Ø§Ù„Ù…Ø¯Ø®Ù„:');
      lines.push('```');
      lines.push(r.input);
      lines.push('```');
      lines.push('');
    }
    if (r.output) {
      lines.push('### Ø§Ù„Ù…Ø®Ø±Ø¬:');
      lines.push(r.output);
      lines.push('');
    }
    if (r.error) {
      lines.push(`### âŒ Ø®Ø·Ø£: ${r.error}`);
      lines.push('');
    }
    lines.push('---');
    lines.push('');
  });

  if (finalOutput) {
    lines.push('## ğŸ¯ Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');
    lines.push(finalOutput);
  }

  const blob = new Blob([lines.join('\n')], { type: 'text/markdown;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `pipeline-results-${Date.now()}.md`;
  a.click();
  URL.revokeObjectURL(url);
  toast.success('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬');
}

export function ExecutionPanel({ status, currentLevel, totalLevels, results, finalOutput }: ExecutionPanelProps) {
  const progress = totalLevels > 0 ? ((currentLevel + 1) / totalLevels) * 100 : 0;
  const resultArray = Array.from(results.values());

  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());
  const [showFinal, setShowFinal] = useState(true);
  const [showInputNodes, setShowInputNodes] = useState<Set<string>>(new Set());
  const [minimized, setMinimized] = useState(false);

  // ======= Ø³Ø­Ø¨ (Drag) =======
  const [position, setPosition] = useState({ x: 16, y: 16 });
  const dragRef = useRef<HTMLDivElement>(null);
  const isDraggingRef = useRef(false);
  const dragOffsetRef = useRef({ x: 0, y: 0 });

  const handleMouseDown = useCallback((e: React.MouseEvent) => {
    isDraggingRef.current = true;
    const rect = dragRef.current?.parentElement?.getBoundingClientRect();
    if (rect) {
      dragOffsetRef.current = { x: e.clientX - rect.left, y: e.clientY - rect.top };
    }

    const handleMouseMove = (ev: MouseEvent) => {
      if (!isDraggingRef.current) return;
      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù€ parent container
      const parent = dragRef.current?.parentElement?.parentElement;
      if (!parent) return;
      const parentRect = parent.getBoundingClientRect();
      const newX = ev.clientX - parentRect.left - dragOffsetRef.current.x;
      const newY = ev.clientY - parentRect.top - dragOffsetRef.current.y;
      setPosition({
        x: Math.max(0, Math.min(newX, parentRect.width - 100)),
        y: Math.max(0, Math.min(newY, parentRect.height - 50)),
      });
    };

    const handleMouseUp = () => {
      isDraggingRef.current = false;
      document.removeEventListener('mousemove', handleMouseMove);
      document.removeEventListener('mouseup', handleMouseUp);
    };

    document.addEventListener('mousemove', handleMouseMove);
    document.addEventListener('mouseup', handleMouseUp);
  }, []);

  const toggleExpand = (nodeId: string) => {
    setExpandedNodes((prev) => {
      const next = new Set(prev);
      next.has(nodeId) ? next.delete(nodeId) : next.add(nodeId);
      return next;
    });
  };

  const toggleShowInput = (nodeId: string) => {
    setShowInputNodes((prev) => {
      const next = new Set(prev);
      next.has(nodeId) ? next.delete(nodeId) : next.add(nodeId);
      return next;
    });
  };

  const expandAll = () => setExpandedNodes(new Set(resultArray.map((r) => r.nodeId)));
  const collapseAll = () => setExpandedNodes(new Set());

  return (
    <div
      ref={dragRef}
      className="absolute z-50"
      style={{ left: position.x, top: position.y }}
    >
      <div className={`glass-card border border-border/50 shadow-2xl backdrop-blur-xl ${minimized ? 'w-64' : 'w-[420px]'} flex flex-col`}
        style={{ maxHeight: minimized ? 'auto' : '80vh' }}
        dir="rtl"
      >
        {/* Ø´Ø±ÙŠØ· Ø§Ù„Ø³Ø­Ø¨ â€” Header */}
        <div
          className="flex items-center justify-between px-3 py-2 cursor-move select-none border-b border-border/30 bg-secondary/30 rounded-t-xl"
          onMouseDown={handleMouseDown}
        >
          <div className="flex items-center gap-2">
            <GripHorizontal className="w-4 h-4 text-muted-foreground" />
            <p className="text-xs font-bold text-foreground">ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°</p>
          </div>
          <div className="flex items-center gap-1.5">
            <span className={`text-[10px] px-2 py-0.5 rounded-full ${status === 'running' ? 'bg-chart-4/20 text-chart-4' :
                status === 'completed' ? 'bg-primary/20 text-primary' :
                  status === 'failed' ? 'bg-destructive/20 text-destructive' :
                    'bg-muted text-muted-foreground'
              }`}>
              {status === 'running' ? 'Ø¬Ø§Ø±ÙŠ...' : status === 'completed' ? 'Ù…ÙƒØªÙ…Ù„ âœ…' : status === 'failed' ? 'ÙØ´Ù„ âŒ' : 'Ø¬Ø§Ù‡Ø²'}
            </span>
            <button onClick={() => setMinimized(!minimized)} className="p-0.5 rounded hover:bg-secondary transition-colors">
              {minimized ? <Maximize2 className="w-3 h-3 text-muted-foreground" /> : <Minimize2 className="w-3 h-3 text-muted-foreground" />}
            </button>
          </div>
        </div>

        {!minimized && (
          <div className="p-3 space-y-3 flex flex-col flex-1 min-h-0 overflow-hidden">
            {/* Progress */}
            {status !== 'idle' && (
              <div>
                <div className="flex justify-between text-[10px] text-muted-foreground mb-1">
                  <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {currentLevel + 1}/{totalLevels}</span>
                  <span>{Math.round(status === 'completed' ? 100 : progress)}%</span>
                </div>
                <Progress value={status === 'completed' ? 100 : progress} className="h-1.5" />
              </div>
            )}

            {/* Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… */}
            <div className="flex gap-1 flex-wrap">
              <Button variant="ghost" size="sm" onClick={expandAll} className="h-6 text-[10px] px-2 gap-1">
                <ChevronDown className="w-3 h-3" /> ÙØªØ­ Ø§Ù„ÙƒÙ„
              </Button>
              <Button variant="ghost" size="sm" onClick={collapseAll} className="h-6 text-[10px] px-2 gap-1">
                <ChevronUp className="w-3 h-3" /> Ø·ÙŠ Ø§Ù„ÙƒÙ„
              </Button>
              {status === 'completed' && (
                <>
                  <Button variant="ghost" size="sm" onClick={() => exportResults(results, finalOutput)} className="h-6 text-[10px] px-2 gap-1">
                    <Download className="w-3 h-3" /> ØªØµØ¯ÙŠØ±
                  </Button>
                  {finalOutput && (
                    <Button variant="ghost" size="sm" onClick={() => copyToClipboard(finalOutput)} className="h-6 text-[10px] px-2 gap-1">
                      <Copy className="w-3 h-3" /> Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©
                    </Button>
                  )}
                </>
              )}
            </div>

            {/* Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ */}
            {status === 'completed' && finalOutput && (
              <div className="rounded-lg border-2 border-primary/30 bg-primary/5 p-3 shrink-0">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-xs font-bold text-primary flex items-center gap-1">
                    ğŸ¯ Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
                  </span>
                  <div className="flex gap-1">
                    <Button variant="ghost" size="sm" onClick={() => setShowFinal(!showFinal)} className="h-5 w-5 p-0">
                      {showFinal ? <EyeOff className="w-3 h-3" /> : <Eye className="w-3 h-3" />}
                    </Button>
                    <Button variant="ghost" size="sm" onClick={() => copyToClipboard(finalOutput)} className="h-5 w-5 p-0">
                      <Copy className="w-3 h-3" />
                    </Button>
                  </div>
                </div>
                {showFinal && (
                  <div className="text-xs text-foreground prose prose-invert prose-xs max-w-none max-h-40 overflow-y-auto">
                    <ReactMarkdown>{finalOutput}</ReactMarkdown>
                  </div>
                )}
              </div>
            )}

            {/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù‚Ø¯ */}
            <ScrollArea className="flex-1 min-h-0">
              <AnimatePresence>
                {resultArray.map((r) => {
                  const cfg = statusConfig[r.status];
                  const Icon = cfg.icon;
                  const isExpanded = expandedNodes.has(r.nodeId);
                  const isInputShown = showInputNodes.has(r.nodeId);

                  return (
                    <motion.div
                      key={`${r.nodeId}-${r.iteration ?? 0}`}
                      initial={{ opacity: 0, x: -10 }}
                      animate={{ opacity: 1, x: 0 }}
                      className={`mb-2 rounded-lg border border-border/50 overflow-hidden ${cfg.bg}`}
                    >
                      {/* Ø±Ø£Ø³ Ø§Ù„Ø¹Ù‚Ø¯Ø© */}
                      <button
                        onClick={() => toggleExpand(r.nodeId)}
                        className="w-full flex items-center gap-2 p-2.5 text-right hover:bg-secondary/30 transition-colors"
                      >
                        <Icon className={`w-3.5 h-3.5 shrink-0 ${cfg.color} ${r.status === 'running' ? 'animate-spin' : ''}`} />
                        <span className="text-xs font-semibold text-foreground truncate flex-1">
                          {r.agentName}
                          {r.iteration != null && <span className="text-muted-foreground mr-1">(#{r.iteration + 1})</span>}
                        </span>
                        <div className="flex items-center gap-1.5 shrink-0">
                          {r.duration != null && (
                            <span className="text-[10px] text-muted-foreground flex items-center gap-0.5">
                              <Clock className="w-2.5 h-2.5" /> {(r.duration / 1000).toFixed(1)}s
                            </span>
                          )}
                          {r.tokens && (
                            <span className="text-[10px] text-muted-foreground flex items-center gap-0.5">
                              <Coins className="w-2.5 h-2.5" /> {r.tokens.total}
                            </span>
                          )}
                          {isExpanded ? <ChevronUp className="w-3 h-3 text-muted-foreground" /> : <ChevronDown className="w-3 h-3 text-muted-foreground" />}
                        </div>
                      </button>

                      {/* Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø·ÙŠ */}
                      {!isExpanded && r.output && (
                        <p className="text-[10px] text-muted-foreground px-2.5 pb-2 line-clamp-2">{r.output.slice(0, 120)}...</p>
                      )}

                      {/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØ§Ù…Ù„ */}
                      <AnimatePresence>
                        {isExpanded && (
                          <motion.div
                            initial={{ height: 0, opacity: 0 }}
                            animate={{ height: 'auto', opacity: 1 }}
                            exit={{ height: 0, opacity: 0 }}
                            className="border-t border-border/30"
                          >
                            <div className="p-3 space-y-2">
                              <div className="flex gap-1 flex-wrap">
                                {r.input && (
                                  <Button variant="ghost" size="sm" onClick={() => toggleShowInput(r.nodeId)} className="h-5 text-[9px] px-1.5 gap-0.5">
                                    <FileText className="w-2.5 h-2.5" /> {isInputShown ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø¯Ø®Ù„' : 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¯Ø®Ù„'}
                                  </Button>
                                )}
                                {r.output && (
                                  <Button variant="ghost" size="sm" onClick={() => copyToClipboard(r.output)} className="h-5 text-[9px] px-1.5 gap-0.5">
                                    <Copy className="w-2.5 h-2.5" /> Ù†Ø³Ø® Ø§Ù„Ù…Ø®Ø±Ø¬
                                  </Button>
                                )}
                              </div>
                              {isInputShown && r.input && (
                                <div className="rounded bg-background/50 p-2">
                                  <p className="text-[9px] font-semibold text-muted-foreground mb-1">ğŸ“¥ Ø§Ù„Ù…Ø¯Ø®Ù„:</p>
                                  <pre className="text-[10px] text-muted-foreground whitespace-pre-wrap max-h-32 overflow-y-auto">{r.input}</pre>
                                </div>
                              )}
                              {r.output && (
                                <div className="rounded bg-background/50 p-2">
                                  <p className="text-[9px] font-semibold text-foreground/70 mb-1">ğŸ“¤ Ø§Ù„Ù…Ø®Ø±Ø¬:</p>
                                  <div className="text-[11px] text-foreground prose prose-invert prose-xs max-w-none max-h-64 overflow-y-auto">
                                    <ReactMarkdown>{r.output}</ReactMarkdown>
                                  </div>
                                </div>
                              )}
                              {r.error && (
                                <div className="rounded bg-destructive/10 p-2">
                                  <p className="text-[10px] text-destructive">âŒ {r.error}</p>
                                </div>
                              )}
                            </div>
                          </motion.div>
                        )}
                      </AnimatePresence>
                    </motion.div>
                  );
                })}
              </AnimatePresence>
            </ScrollArea>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/components/ui/accordion.tsx">
import * as React from "react";
import * as AccordionPrimitive from "@radix-ui/react-accordion";
import { ChevronDown } from "lucide-react";

import { cn } from "@/lib/utils";

const Accordion = AccordionPrimitive.Root;

const AccordionItem = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>
>(({ className, ...props }, ref) => (
  <AccordionPrimitive.Item ref={ref} className={cn("border-b", className)} {...props} />
));
AccordionItem.displayName = "AccordionItem";

const AccordionTrigger = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Header className="flex">
    <AccordionPrimitive.Trigger
      ref={ref}
      className={cn(
        "flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronDown className="h-4 w-4 shrink-0 transition-transform duration-200" />
    </AccordionPrimitive.Trigger>
  </AccordionPrimitive.Header>
));
AccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName;

const AccordionContent = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Content
    ref={ref}
    className="overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"
    {...props}
  >
    <div className={cn("pb-4 pt-0", className)}>{children}</div>
  </AccordionPrimitive.Content>
));

AccordionContent.displayName = AccordionPrimitive.Content.displayName;

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent };
</file>

<file path="agent-orchestrator-hub/src/components/ui/alert-dialog.tsx">
import * as React from "react";
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog";

import { cn } from "@/lib/utils";
import { buttonVariants } from "@/components/ui/button";

const AlertDialog = AlertDialogPrimitive.Root;

const AlertDialogTrigger = AlertDialogPrimitive.Trigger;

const AlertDialogPortal = AlertDialogPrimitive.Portal;

const AlertDialogOverlay = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className,
    )}
    {...props}
    ref={ref}
  />
));
AlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName;

const AlertDialogContent = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>
>(({ className, ...props }, ref) => (
  <AlertDialogPortal>
    <AlertDialogOverlay />
    <AlertDialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className,
      )}
      {...props}
    />
  </AlertDialogPortal>
));
AlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName;

const AlertDialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col space-y-2 text-center sm:text-left", className)} {...props} />
);
AlertDialogHeader.displayName = "AlertDialogHeader";

const AlertDialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />
);
AlertDialogFooter.displayName = "AlertDialogFooter";

const AlertDialogTitle = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Title ref={ref} className={cn("text-lg font-semibold", className)} {...props} />
));
AlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName;

const AlertDialogDescription = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
AlertDialogDescription.displayName = AlertDialogPrimitive.Description.displayName;

const AlertDialogAction = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Action>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Action ref={ref} className={cn(buttonVariants(), className)} {...props} />
));
AlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName;

const AlertDialogCancel = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Cancel
    ref={ref}
    className={cn(buttonVariants({ variant: "outline" }), "mt-2 sm:mt-0", className)}
    {...props}
  />
));
AlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName;

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/alert.tsx">
import * as React from "react";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const alertVariants = cva(
  "relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive: "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

const Alert = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>
>(({ className, variant, ...props }, ref) => (
  <div ref={ref} role="alert" className={cn(alertVariants({ variant }), className)} {...props} />
));
Alert.displayName = "Alert";

const AlertTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(
  ({ className, ...props }, ref) => (
    <h5 ref={ref} className={cn("mb-1 font-medium leading-none tracking-tight", className)} {...props} />
  ),
);
AlertTitle.displayName = "AlertTitle";

const AlertDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("text-sm [&_p]:leading-relaxed", className)} {...props} />
  ),
);
AlertDescription.displayName = "AlertDescription";

export { Alert, AlertTitle, AlertDescription };
</file>

<file path="agent-orchestrator-hub/src/components/ui/aspect-ratio.tsx">
import * as AspectRatioPrimitive from "@radix-ui/react-aspect-ratio";

const AspectRatio = AspectRatioPrimitive.Root;

export { AspectRatio };
</file>

<file path="agent-orchestrator-hub/src/components/ui/avatar.tsx">
import * as React from "react";
import * as AvatarPrimitive from "@radix-ui/react-avatar";

import { cn } from "@/lib/utils";

const Avatar = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Root
    ref={ref}
    className={cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full", className)}
    {...props}
  />
));
Avatar.displayName = AvatarPrimitive.Root.displayName;

const AvatarImage = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Image>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Image ref={ref} className={cn("aspect-square h-full w-full", className)} {...props} />
));
AvatarImage.displayName = AvatarPrimitive.Image.displayName;

const AvatarFallback = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Fallback>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Fallback
    ref={ref}
    className={cn("flex h-full w-full items-center justify-center rounded-full bg-muted", className)}
    {...props}
  />
));
AvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;

export { Avatar, AvatarImage, AvatarFallback };
</file>

<file path="agent-orchestrator-hub/src/components/ui/badge.tsx">
import * as React from "react";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

export interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;
}

export { Badge, badgeVariants };
</file>

<file path="agent-orchestrator-hub/src/components/ui/breadcrumb.tsx">
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { ChevronRight, MoreHorizontal } from "lucide-react";

import { cn } from "@/lib/utils";

const Breadcrumb = React.forwardRef<
  HTMLElement,
  React.ComponentPropsWithoutRef<"nav"> & {
    separator?: React.ReactNode;
  }
>(({ ...props }, ref) => <nav ref={ref} aria-label="breadcrumb" {...props} />);
Breadcrumb.displayName = "Breadcrumb";

const BreadcrumbList = React.forwardRef<HTMLOListElement, React.ComponentPropsWithoutRef<"ol">>(
  ({ className, ...props }, ref) => (
    <ol
      ref={ref}
      className={cn(
        "flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",
        className,
      )}
      {...props}
    />
  ),
);
BreadcrumbList.displayName = "BreadcrumbList";

const BreadcrumbItem = React.forwardRef<HTMLLIElement, React.ComponentPropsWithoutRef<"li">>(
  ({ className, ...props }, ref) => (
    <li ref={ref} className={cn("inline-flex items-center gap-1.5", className)} {...props} />
  ),
);
BreadcrumbItem.displayName = "BreadcrumbItem";

const BreadcrumbLink = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentPropsWithoutRef<"a"> & {
    asChild?: boolean;
  }
>(({ asChild, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "a";

  return <Comp ref={ref} className={cn("transition-colors hover:text-foreground", className)} {...props} />;
});
BreadcrumbLink.displayName = "BreadcrumbLink";

const BreadcrumbPage = React.forwardRef<HTMLSpanElement, React.ComponentPropsWithoutRef<"span">>(
  ({ className, ...props }, ref) => (
    <span
      ref={ref}
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("font-normal text-foreground", className)}
      {...props}
    />
  ),
);
BreadcrumbPage.displayName = "BreadcrumbPage";

const BreadcrumbSeparator = ({ children, className, ...props }: React.ComponentProps<"li">) => (
  <li role="presentation" aria-hidden="true" className={cn("[&>svg]:size-3.5", className)} {...props}>
    {children ?? <ChevronRight />}
  </li>
);
BreadcrumbSeparator.displayName = "BreadcrumbSeparator";

const BreadcrumbEllipsis = ({ className, ...props }: React.ComponentProps<"span">) => (
  <span
    role="presentation"
    aria-hidden="true"
    className={cn("flex h-9 w-9 items-center justify-center", className)}
    {...props}
  >
    <MoreHorizontal className="h-4 w-4" />
    <span className="sr-only">More</span>
  </span>
);
BreadcrumbEllipsis.displayName = "BreadcrumbElipssis";

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/button.tsx">
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";
    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;
  },
);
Button.displayName = "Button";

export { Button, buttonVariants };
</file>

<file path="agent-orchestrator-hub/src/components/ui/calendar.tsx">
import * as React from "react";
import { ChevronLeft, ChevronRight } from "lucide-react";
import { DayPicker } from "react-day-picker";

import { cn } from "@/lib/utils";
import { buttonVariants } from "@/components/ui/button";

export type CalendarProps = React.ComponentProps<typeof DayPicker>;

function Calendar({ className, classNames, showOutsideDays = true, ...props }: CalendarProps) {
  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn("p-3", className)}
      classNames={{
        months: "flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",
        month: "space-y-4",
        caption: "flex justify-center pt-1 relative items-center",
        caption_label: "text-sm font-medium",
        nav: "space-x-1 flex items-center",
        nav_button: cn(
          buttonVariants({ variant: "outline" }),
          "h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",
        ),
        nav_button_previous: "absolute left-1",
        nav_button_next: "absolute right-1",
        table: "w-full border-collapse space-y-1",
        head_row: "flex",
        head_cell: "text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",
        row: "flex w-full mt-2",
        cell: "h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",
        day: cn(buttonVariants({ variant: "ghost" }), "h-9 w-9 p-0 font-normal aria-selected:opacity-100"),
        day_range_end: "day-range-end",
        day_selected:
          "bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",
        day_today: "bg-accent text-accent-foreground",
        day_outside:
          "day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",
        day_disabled: "text-muted-foreground opacity-50",
        day_range_middle: "aria-selected:bg-accent aria-selected:text-accent-foreground",
        day_hidden: "invisible",
        ...classNames,
      }}
      components={{
        IconLeft: ({ ..._props }) => <ChevronLeft className="h-4 w-4" />,
        IconRight: ({ ..._props }) => <ChevronRight className="h-4 w-4" />,
      }}
      {...props}
    />
  );
}
Calendar.displayName = "Calendar";

export { Calendar };
</file>

<file path="agent-orchestrator-hub/src/components/ui/card.tsx">
import * as React from "react";

import { cn } from "@/lib/utils";

const Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("rounded-lg border bg-card text-card-foreground shadow-sm", className)} {...props} />
));
Card.displayName = "Card";

const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("flex flex-col space-y-1.5 p-6", className)} {...props} />
  ),
);
CardHeader.displayName = "CardHeader";

const CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(
  ({ className, ...props }, ref) => (
    <h3 ref={ref} className={cn("text-2xl font-semibold leading-none tracking-tight", className)} {...props} />
  ),
);
CardTitle.displayName = "CardTitle";

const CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => (
    <p ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
  ),
);
CardDescription.displayName = "CardDescription";

const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />,
);
CardContent.displayName = "CardContent";

const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("flex items-center p-6 pt-0", className)} {...props} />
  ),
);
CardFooter.displayName = "CardFooter";

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };
</file>

<file path="agent-orchestrator-hub/src/components/ui/carousel.tsx">
import * as React from "react";
import useEmblaCarousel, { type UseEmblaCarouselType } from "embla-carousel-react";
import { ArrowLeft, ArrowRight } from "lucide-react";

import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";

type CarouselApi = UseEmblaCarouselType[1];
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>;
type CarouselOptions = UseCarouselParameters[0];
type CarouselPlugin = UseCarouselParameters[1];

type CarouselProps = {
  opts?: CarouselOptions;
  plugins?: CarouselPlugin;
  orientation?: "horizontal" | "vertical";
  setApi?: (api: CarouselApi) => void;
};

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0];
  api: ReturnType<typeof useEmblaCarousel>[1];
  scrollPrev: () => void;
  scrollNext: () => void;
  canScrollPrev: boolean;
  canScrollNext: boolean;
} & CarouselProps;

const CarouselContext = React.createContext<CarouselContextProps | null>(null);

function useCarousel() {
  const context = React.useContext(CarouselContext);

  if (!context) {
    throw new Error("useCarousel must be used within a <Carousel />");
  }

  return context;
}

const Carousel = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement> & CarouselProps>(
  ({ orientation = "horizontal", opts, setApi, plugins, className, children, ...props }, ref) => {
    const [carouselRef, api] = useEmblaCarousel(
      {
        ...opts,
        axis: orientation === "horizontal" ? "x" : "y",
      },
      plugins,
    );
    const [canScrollPrev, setCanScrollPrev] = React.useState(false);
    const [canScrollNext, setCanScrollNext] = React.useState(false);

    const onSelect = React.useCallback((api: CarouselApi) => {
      if (!api) {
        return;
      }

      setCanScrollPrev(api.canScrollPrev());
      setCanScrollNext(api.canScrollNext());
    }, []);

    const scrollPrev = React.useCallback(() => {
      api?.scrollPrev();
    }, [api]);

    const scrollNext = React.useCallback(() => {
      api?.scrollNext();
    }, [api]);

    const handleKeyDown = React.useCallback(
      (event: React.KeyboardEvent<HTMLDivElement>) => {
        if (event.key === "ArrowLeft") {
          event.preventDefault();
          scrollPrev();
        } else if (event.key === "ArrowRight") {
          event.preventDefault();
          scrollNext();
        }
      },
      [scrollPrev, scrollNext],
    );

    React.useEffect(() => {
      if (!api || !setApi) {
        return;
      }

      setApi(api);
    }, [api, setApi]);

    React.useEffect(() => {
      if (!api) {
        return;
      }

      onSelect(api);
      api.on("reInit", onSelect);
      api.on("select", onSelect);

      return () => {
        api?.off("select", onSelect);
      };
    }, [api, onSelect]);

    return (
      <CarouselContext.Provider
        value={{
          carouselRef,
          api: api,
          opts,
          orientation: orientation || (opts?.axis === "y" ? "vertical" : "horizontal"),
          scrollPrev,
          scrollNext,
          canScrollPrev,
          canScrollNext,
        }}
      >
        <div
          ref={ref}
          onKeyDownCapture={handleKeyDown}
          className={cn("relative", className)}
          role="region"
          aria-roledescription="carousel"
          {...props}
        >
          {children}
        </div>
      </CarouselContext.Provider>
    );
  },
);
Carousel.displayName = "Carousel";

const CarouselContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => {
    const { carouselRef, orientation } = useCarousel();

    return (
      <div ref={carouselRef} className="overflow-hidden">
        <div
          ref={ref}
          className={cn("flex", orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col", className)}
          {...props}
        />
      </div>
    );
  },
);
CarouselContent.displayName = "CarouselContent";

const CarouselItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => {
    const { orientation } = useCarousel();

    return (
      <div
        ref={ref}
        role="group"
        aria-roledescription="slide"
        className={cn("min-w-0 shrink-0 grow-0 basis-full", orientation === "horizontal" ? "pl-4" : "pt-4", className)}
        {...props}
      />
    );
  },
);
CarouselItem.displayName = "CarouselItem";

const CarouselPrevious = React.forwardRef<HTMLButtonElement, React.ComponentProps<typeof Button>>(
  ({ className, variant = "outline", size = "icon", ...props }, ref) => {
    const { orientation, scrollPrev, canScrollPrev } = useCarousel();

    return (
      <Button
        ref={ref}
        variant={variant}
        size={size}
        className={cn(
          "absolute h-8 w-8 rounded-full",
          orientation === "horizontal"
            ? "-left-12 top-1/2 -translate-y-1/2"
            : "-top-12 left-1/2 -translate-x-1/2 rotate-90",
          className,
        )}
        disabled={!canScrollPrev}
        onClick={scrollPrev}
        {...props}
      >
        <ArrowLeft className="h-4 w-4" />
        <span className="sr-only">Previous slide</span>
      </Button>
    );
  },
);
CarouselPrevious.displayName = "CarouselPrevious";

const CarouselNext = React.forwardRef<HTMLButtonElement, React.ComponentProps<typeof Button>>(
  ({ className, variant = "outline", size = "icon", ...props }, ref) => {
    const { orientation, scrollNext, canScrollNext } = useCarousel();

    return (
      <Button
        ref={ref}
        variant={variant}
        size={size}
        className={cn(
          "absolute h-8 w-8 rounded-full",
          orientation === "horizontal"
            ? "-right-12 top-1/2 -translate-y-1/2"
            : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90",
          className,
        )}
        disabled={!canScrollNext}
        onClick={scrollNext}
        {...props}
      >
        <ArrowRight className="h-4 w-4" />
        <span className="sr-only">Next slide</span>
      </Button>
    );
  },
);
CarouselNext.displayName = "CarouselNext";

export { type CarouselApi, Carousel, CarouselContent, CarouselItem, CarouselPrevious, CarouselNext };
</file>

<file path="agent-orchestrator-hub/src/components/ui/chart.tsx">
import * as React from "react";
import * as RechartsPrimitive from "recharts";

import { cn } from "@/lib/utils";

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: "", dark: ".dark" } as const;

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode;
    icon?: React.ComponentType;
  } & ({ color?: string; theme?: never } | { color?: never; theme: Record<keyof typeof THEMES, string> });
};

type ChartContextProps = {
  config: ChartConfig;
};

const ChartContext = React.createContext<ChartContextProps | null>(null);

function useChart() {
  const context = React.useContext(ChartContext);

  if (!context) {
    throw new Error("useChart must be used within a <ChartContainer />");
  }

  return context;
}

const ChartContainer = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    config: ChartConfig;
    children: React.ComponentProps<typeof RechartsPrimitive.ResponsiveContainer>["children"];
  }
>(({ id, className, children, config, ...props }, ref) => {
  const uniqueId = React.useId();
  const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`;

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-chart={chartId}
        ref={ref}
        className={cn(
          "flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",
          className,
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>{children}</RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  );
});
ChartContainer.displayName = "Chart";

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(([_, config]) => config.theme || config.color);

  if (!colorConfig.length) {
    return null;
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color = itemConfig.theme?.[theme as keyof typeof itemConfig.theme] || itemConfig.color;
    return color ? `  --color-${key}: ${color};` : null;
  })
  .join("\n")}
}
`,
          )
          .join("\n"),
      }}
    />
  );
};

const ChartTooltip = RechartsPrimitive.Tooltip;

const ChartTooltipContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
    React.ComponentProps<"div"> & {
      hideLabel?: boolean;
      hideIndicator?: boolean;
      indicator?: "line" | "dot" | "dashed";
      nameKey?: string;
      labelKey?: string;
    }
>(
  (
    {
      active,
      payload,
      className,
      indicator = "dot",
      hideLabel = false,
      hideIndicator = false,
      label,
      labelFormatter,
      labelClassName,
      formatter,
      color,
      nameKey,
      labelKey,
    },
    ref,
  ) => {
    const { config } = useChart();

    const tooltipLabel = React.useMemo(() => {
      if (hideLabel || !payload?.length) {
        return null;
      }

      const [item] = payload;
      const key = `${labelKey || item.dataKey || item.name || "value"}`;
      const itemConfig = getPayloadConfigFromPayload(config, item, key);
      const value =
        !labelKey && typeof label === "string"
          ? config[label as keyof typeof config]?.label || label
          : itemConfig?.label;

      if (labelFormatter) {
        return <div className={cn("font-medium", labelClassName)}>{labelFormatter(value, payload)}</div>;
      }

      if (!value) {
        return null;
      }

      return <div className={cn("font-medium", labelClassName)}>{value}</div>;
    }, [label, labelFormatter, payload, hideLabel, labelClassName, config, labelKey]);

    if (!active || !payload?.length) {
      return null;
    }

    const nestLabel = payload.length === 1 && indicator !== "dot";

    return (
      <div
        ref={ref}
        className={cn(
          "grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",
          className,
        )}
      >
        {!nestLabel ? tooltipLabel : null}
        <div className="grid gap-1.5">
          {payload.map((item, index) => {
            const key = `${nameKey || item.name || item.dataKey || "value"}`;
            const itemConfig = getPayloadConfigFromPayload(config, item, key);
            const indicatorColor = color || item.payload.fill || item.color;

            return (
              <div
                key={item.dataKey}
                className={cn(
                  "flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",
                  indicator === "dot" && "items-center",
                )}
              >
                {formatter && item?.value !== undefined && item.name ? (
                  formatter(item.value, item.name, item, index, item.payload)
                ) : (
                  <>
                    {itemConfig?.icon ? (
                      <itemConfig.icon />
                    ) : (
                      !hideIndicator && (
                        <div
                          className={cn("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]", {
                            "h-2.5 w-2.5": indicator === "dot",
                            "w-1": indicator === "line",
                            "w-0 border-[1.5px] border-dashed bg-transparent": indicator === "dashed",
                            "my-0.5": nestLabel && indicator === "dashed",
                          })}
                          style={
                            {
                              "--color-bg": indicatorColor,
                              "--color-border": indicatorColor,
                            } as React.CSSProperties
                          }
                        />
                      )
                    )}
                    <div
                      className={cn(
                        "flex flex-1 justify-between leading-none",
                        nestLabel ? "items-end" : "items-center",
                      )}
                    >
                      <div className="grid gap-1.5">
                        {nestLabel ? tooltipLabel : null}
                        <span className="text-muted-foreground">{itemConfig?.label || item.name}</span>
                      </div>
                      {item.value && (
                        <span className="font-mono font-medium tabular-nums text-foreground">
                          {item.value.toLocaleString()}
                        </span>
                      )}
                    </div>
                  </>
                )}
              </div>
            );
          })}
        </div>
      </div>
    );
  },
);
ChartTooltipContent.displayName = "ChartTooltip";

const ChartLegend = RechartsPrimitive.Legend;

const ChartLegendContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> &
    Pick<RechartsPrimitive.LegendProps, "payload" | "verticalAlign"> & {
      hideIcon?: boolean;
      nameKey?: string;
    }
>(({ className, hideIcon = false, payload, verticalAlign = "bottom", nameKey }, ref) => {
  const { config } = useChart();

  if (!payload?.length) {
    return null;
  }

  return (
    <div
      ref={ref}
      className={cn("flex items-center justify-center gap-4", verticalAlign === "top" ? "pb-3" : "pt-3", className)}
    >
      {payload.map((item) => {
        const key = `${nameKey || item.dataKey || "value"}`;
        const itemConfig = getPayloadConfigFromPayload(config, item, key);

        return (
          <div
            key={item.value}
            className={cn("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground")}
          >
            {itemConfig?.icon && !hideIcon ? (
              <itemConfig.icon />
            ) : (
              <div
                className="h-2 w-2 shrink-0 rounded-[2px]"
                style={{
                  backgroundColor: item.color,
                }}
              />
            )}
            {itemConfig?.label}
          </div>
        );
      })}
    </div>
  );
});
ChartLegendContent.displayName = "ChartLegend";

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(config: ChartConfig, payload: unknown, key: string) {
  if (typeof payload !== "object" || payload === null) {
    return undefined;
  }

  const payloadPayload =
    "payload" in payload && typeof payload.payload === "object" && payload.payload !== null
      ? payload.payload
      : undefined;

  let configLabelKey: string = key;

  if (key in payload && typeof payload[key as keyof typeof payload] === "string") {
    configLabelKey = payload[key as keyof typeof payload] as string;
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === "string"
  ) {
    configLabelKey = payloadPayload[key as keyof typeof payloadPayload] as string;
  }

  return configLabelKey in config ? config[configLabelKey] : config[key as keyof typeof config];
}

export { ChartContainer, ChartTooltip, ChartTooltipContent, ChartLegend, ChartLegendContent, ChartStyle };
</file>

<file path="agent-orchestrator-hub/src/components/ui/checkbox.tsx">
import * as React from "react";
import * as CheckboxPrimitive from "@radix-ui/react-checkbox";
import { Check } from "lucide-react";

import { cn } from "@/lib/utils";

const Checkbox = React.forwardRef<
  React.ElementRef<typeof CheckboxPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>
>(({ className, ...props }, ref) => (
  <CheckboxPrimitive.Root
    ref={ref}
    className={cn(
      "peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
      className,
    )}
    {...props}
  >
    <CheckboxPrimitive.Indicator className={cn("flex items-center justify-center text-current")}>
      <Check className="h-4 w-4" />
    </CheckboxPrimitive.Indicator>
  </CheckboxPrimitive.Root>
));
Checkbox.displayName = CheckboxPrimitive.Root.displayName;

export { Checkbox };
</file>

<file path="agent-orchestrator-hub/src/components/ui/collapsible.tsx">
import * as CollapsiblePrimitive from "@radix-ui/react-collapsible";

const Collapsible = CollapsiblePrimitive.Root;

const CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger;

const CollapsibleContent = CollapsiblePrimitive.CollapsibleContent;

export { Collapsible, CollapsibleTrigger, CollapsibleContent };
</file>

<file path="agent-orchestrator-hub/src/components/ui/command.tsx">
import * as React from "react";
import { type DialogProps } from "@radix-ui/react-dialog";
import { Command as CommandPrimitive } from "cmdk";
import { Search } from "lucide-react";

import { cn } from "@/lib/utils";
import { Dialog, DialogContent } from "@/components/ui/dialog";

const Command = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive>
>(({ className, ...props }, ref) => (
  <CommandPrimitive
    ref={ref}
    className={cn(
      "flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",
      className,
    )}
    {...props}
  />
));
Command.displayName = CommandPrimitive.displayName;

interface CommandDialogProps extends DialogProps {}

const CommandDialog = ({ children, ...props }: CommandDialogProps) => {
  return (
    <Dialog {...props}>
      <DialogContent className="overflow-hidden p-0 shadow-lg">
        <Command className="[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  );
};

const CommandInput = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Input>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>
>(({ className, ...props }, ref) => (
  <div className="flex items-center border-b px-3" cmdk-input-wrapper="">
    <Search className="mr-2 h-4 w-4 shrink-0 opacity-50" />
    <CommandPrimitive.Input
      ref={ref}
      className={cn(
        "flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    />
  </div>
));

CommandInput.displayName = CommandPrimitive.Input.displayName;

const CommandList = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.List
    ref={ref}
    className={cn("max-h-[300px] overflow-y-auto overflow-x-hidden", className)}
    {...props}
  />
));

CommandList.displayName = CommandPrimitive.List.displayName;

const CommandEmpty = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Empty>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>
>((props, ref) => <CommandPrimitive.Empty ref={ref} className="py-6 text-center text-sm" {...props} />);

CommandEmpty.displayName = CommandPrimitive.Empty.displayName;

const CommandGroup = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Group>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Group
    ref={ref}
    className={cn(
      "overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",
      className,
    )}
    {...props}
  />
));

CommandGroup.displayName = CommandPrimitive.Group.displayName;

const CommandSeparator = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Separator ref={ref} className={cn("-mx-1 h-px bg-border", className)} {...props} />
));
CommandSeparator.displayName = CommandPrimitive.Separator.displayName;

const CommandItem = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",
      className,
    )}
    {...props}
  />
));

CommandItem.displayName = CommandPrimitive.Item.displayName;

const CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest text-muted-foreground", className)} {...props} />;
};
CommandShortcut.displayName = "CommandShortcut";

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/context-menu.tsx">
import * as React from "react";
import * as ContextMenuPrimitive from "@radix-ui/react-context-menu";
import { Check, ChevronRight, Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const ContextMenu = ContextMenuPrimitive.Root;

const ContextMenuTrigger = ContextMenuPrimitive.Trigger;

const ContextMenuGroup = ContextMenuPrimitive.Group;

const ContextMenuPortal = ContextMenuPrimitive.Portal;

const ContextMenuSub = ContextMenuPrimitive.Sub;

const ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup;

const ContextMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {
    inset?: boolean;
  }
>(({ className, inset, children, ...props }, ref) => (
  <ContextMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </ContextMenuPrimitive.SubTrigger>
));
ContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName;

const ContextMenuSubContent = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
ContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName;

const ContextMenuContent = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.Portal>
    <ContextMenuPrimitive.Content
      ref={ref}
      className={cn(
        "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </ContextMenuPrimitive.Portal>
));
ContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName;

const ContextMenuItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <ContextMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  />
));
ContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName;

const ContextMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <ContextMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <ContextMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </ContextMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </ContextMenuPrimitive.CheckboxItem>
));
ContextMenuCheckboxItem.displayName = ContextMenuPrimitive.CheckboxItem.displayName;

const ContextMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <ContextMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <ContextMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </ContextMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </ContextMenuPrimitive.RadioItem>
));
ContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName;

const ContextMenuLabel = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <ContextMenuPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold text-foreground", inset && "pl-8", className)}
    {...props}
  />
));
ContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName;

const ContextMenuSeparator = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-border", className)} {...props} />
));
ContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName;

const ContextMenuShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest text-muted-foreground", className)} {...props} />;
};
ContextMenuShortcut.displayName = "ContextMenuShortcut";

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/dialog.tsx">
import * as React from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog";
import { X } from "lucide-react";

import { cn } from "@/lib/utils";

const Dialog = DialogPrimitive.Root;

const DialogTrigger = DialogPrimitive.Trigger;

const DialogPortal = DialogPrimitive.Portal;

const DialogClose = DialogPrimitive.Close;

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className,
    )}
    {...props}
  />
));
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className,
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
));
DialogContent.displayName = DialogPrimitive.Content.displayName;

const DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col space-y-1.5 text-center sm:text-left", className)} {...props} />
);
DialogHeader.displayName = "DialogHeader";

const DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />
);
DialogFooter.displayName = "DialogFooter";

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold leading-none tracking-tight", className)}
    {...props}
  />
));
DialogTitle.displayName = DialogPrimitive.Title.displayName;

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
DialogDescription.displayName = DialogPrimitive.Description.displayName;

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogClose,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/drawer.tsx">
import * as React from "react";
import { Drawer as DrawerPrimitive } from "vaul";

import { cn } from "@/lib/utils";

const Drawer = ({ shouldScaleBackground = true, ...props }: React.ComponentProps<typeof DrawerPrimitive.Root>) => (
  <DrawerPrimitive.Root shouldScaleBackground={shouldScaleBackground} {...props} />
);
Drawer.displayName = "Drawer";

const DrawerTrigger = DrawerPrimitive.Trigger;

const DrawerPortal = DrawerPrimitive.Portal;

const DrawerClose = DrawerPrimitive.Close;

const DrawerOverlay = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Overlay ref={ref} className={cn("fixed inset-0 z-50 bg-black/80", className)} {...props} />
));
DrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName;

const DrawerContent = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DrawerPortal>
    <DrawerOverlay />
    <DrawerPrimitive.Content
      ref={ref}
      className={cn(
        "fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",
        className,
      )}
      {...props}
    >
      <div className="mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted" />
      {children}
    </DrawerPrimitive.Content>
  </DrawerPortal>
));
DrawerContent.displayName = "DrawerContent";

const DrawerHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("grid gap-1.5 p-4 text-center sm:text-left", className)} {...props} />
);
DrawerHeader.displayName = "DrawerHeader";

const DrawerFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("mt-auto flex flex-col gap-2 p-4", className)} {...props} />
);
DrawerFooter.displayName = "DrawerFooter";

const DrawerTitle = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold leading-none tracking-tight", className)}
    {...props}
  />
));
DrawerTitle.displayName = DrawerPrimitive.Title.displayName;

const DrawerDescription = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
DrawerDescription.displayName = DrawerPrimitive.Description.displayName;

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/dropdown-menu.tsx">
import * as React from "react";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu";
import { Check, ChevronRight, Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const DropdownMenu = DropdownMenuPrimitive.Root;

const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;

const DropdownMenuGroup = DropdownMenuPrimitive.Group;

const DropdownMenuPortal = DropdownMenuPrimitive.Portal;

const DropdownMenuSub = DropdownMenuPrimitive.Sub;

const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;

const DropdownMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {
    inset?: boolean;
  }
>(({ className, inset, children, ...props }, ref) => (
  <DropdownMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",
      inset && "pl-8",
      className,
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </DropdownMenuPrimitive.SubTrigger>
));
DropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;

const DropdownMenuSubContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
DropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;

const DropdownMenuContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <DropdownMenuPrimitive.Portal>
    <DropdownMenuPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </DropdownMenuPrimitive.Portal>
));
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;

const DropdownMenuItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  />
));
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;

const DropdownMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <DropdownMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.CheckboxItem>
));
DropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;

const DropdownMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <DropdownMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.RadioItem>
));
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;

const DropdownMenuLabel = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold", inset && "pl-8", className)}
    {...props}
  />
));
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;

const DropdownMenuSeparator = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-muted", className)} {...props} />
));
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;

const DropdownMenuShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest opacity-60", className)} {...props} />;
};
DropdownMenuShortcut.displayName = "DropdownMenuShortcut";

export {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuGroup,
  DropdownMenuPortal,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/form.tsx">
import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label";
import { Slot } from "@radix-ui/react-slot";
import { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from "react-hook-form";

import { cn } from "@/lib/utils";
import { Label } from "@/components/ui/label";

const Form = FormProvider;

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName;
};

const FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  );
};

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext);
  const itemContext = React.useContext(FormItemContext);
  const { getFieldState, formState } = useFormContext();

  const fieldState = getFieldState(fieldContext.name, formState);

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>");
  }

  const { id } = itemContext;

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  };
};

type FormItemContextValue = {
  id: string;
};

const FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);

const FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => {
    const id = React.useId();

    return (
      <FormItemContext.Provider value={{ id }}>
        <div ref={ref} className={cn("space-y-2", className)} {...props} />
      </FormItemContext.Provider>
    );
  },
);
FormItem.displayName = "FormItem";

const FormLabel = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>
>(({ className, ...props }, ref) => {
  const { error, formItemId } = useFormField();

  return <Label ref={ref} className={cn(error && "text-destructive", className)} htmlFor={formItemId} {...props} />;
});
FormLabel.displayName = "FormLabel";

const FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(
  ({ ...props }, ref) => {
    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();

    return (
      <Slot
        ref={ref}
        id={formItemId}
        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}
        aria-invalid={!!error}
        {...props}
      />
    );
  },
);
FormControl.displayName = "FormControl";

const FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => {
    const { formDescriptionId } = useFormField();

    return <p ref={ref} id={formDescriptionId} className={cn("text-sm text-muted-foreground", className)} {...props} />;
  },
);
FormDescription.displayName = "FormDescription";

const FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, children, ...props }, ref) => {
    const { error, formMessageId } = useFormField();
    const body = error ? String(error?.message) : children;

    if (!body) {
      return null;
    }

    return (
      <p ref={ref} id={formMessageId} className={cn("text-sm font-medium text-destructive", className)} {...props}>
        {body}
      </p>
    );
  },
);
FormMessage.displayName = "FormMessage";

export { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };
</file>

<file path="agent-orchestrator-hub/src/components/ui/hover-card.tsx">
import * as React from "react";
import * as HoverCardPrimitive from "@radix-ui/react-hover-card";

import { cn } from "@/lib/utils";

const HoverCard = HoverCardPrimitive.Root;

const HoverCardTrigger = HoverCardPrimitive.Trigger;

const HoverCardContent = React.forwardRef<
  React.ElementRef<typeof HoverCardPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <HoverCardPrimitive.Content
    ref={ref}
    align={align}
    sideOffset={sideOffset}
    className={cn(
      "z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
HoverCardContent.displayName = HoverCardPrimitive.Content.displayName;

export { HoverCard, HoverCardTrigger, HoverCardContent };
</file>

<file path="agent-orchestrator-hub/src/components/ui/input-otp.tsx">
import * as React from "react";
import { OTPInput, OTPInputContext } from "input-otp";
import { Dot } from "lucide-react";

import { cn } from "@/lib/utils";

const InputOTP = React.forwardRef<React.ElementRef<typeof OTPInput>, React.ComponentPropsWithoutRef<typeof OTPInput>>(
  ({ className, containerClassName, ...props }, ref) => (
    <OTPInput
      ref={ref}
      containerClassName={cn("flex items-center gap-2 has-[:disabled]:opacity-50", containerClassName)}
      className={cn("disabled:cursor-not-allowed", className)}
      {...props}
    />
  ),
);
InputOTP.displayName = "InputOTP";

const InputOTPGroup = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
  ({ className, ...props }, ref) => <div ref={ref} className={cn("flex items-center", className)} {...props} />,
);
InputOTPGroup.displayName = "InputOTPGroup";

const InputOTPSlot = React.forwardRef<
  React.ElementRef<"div">,
  React.ComponentPropsWithoutRef<"div"> & { index: number }
>(({ index, className, ...props }, ref) => {
  const inputOTPContext = React.useContext(OTPInputContext);
  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index];

  return (
    <div
      ref={ref}
      className={cn(
        "relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",
        isActive && "z-10 ring-2 ring-ring ring-offset-background",
        className,
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="animate-caret-blink h-4 w-px bg-foreground duration-1000" />
        </div>
      )}
    </div>
  );
});
InputOTPSlot.displayName = "InputOTPSlot";

const InputOTPSeparator = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
  ({ ...props }, ref) => (
    <div ref={ref} role="separator" {...props}>
      <Dot />
    </div>
  ),
);
InputOTPSeparator.displayName = "InputOTPSeparator";

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator };
</file>

<file path="agent-orchestrator-hub/src/components/ui/input.tsx">
import * as React from "react";

import { cn } from "@/lib/utils";

const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<"input">>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className,
        )}
        ref={ref}
        {...props}
      />
    );
  },
);
Input.displayName = "Input";

export { Input };
</file>

<file path="agent-orchestrator-hub/src/components/ui/label.tsx">
import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const labelVariants = cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70");

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />
));
Label.displayName = LabelPrimitive.Root.displayName;

export { Label };
</file>

<file path="agent-orchestrator-hub/src/components/ui/menubar.tsx">
import * as React from "react";
import * as MenubarPrimitive from "@radix-ui/react-menubar";
import { Check, ChevronRight, Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const MenubarMenu = MenubarPrimitive.Menu;

const MenubarGroup = MenubarPrimitive.Group;

const MenubarPortal = MenubarPrimitive.Portal;

const MenubarSub = MenubarPrimitive.Sub;

const MenubarRadioGroup = MenubarPrimitive.RadioGroup;

const Menubar = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Root
    ref={ref}
    className={cn("flex h-10 items-center space-x-1 rounded-md border bg-background p-1", className)}
    {...props}
  />
));
Menubar.displayName = MenubarPrimitive.Root.displayName;

const MenubarTrigger = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  />
));
MenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName;

const MenubarSubTrigger = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {
    inset?: boolean;
  }
>(({ className, inset, children, ...props }, ref) => (
  <MenubarPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </MenubarPrimitive.SubTrigger>
));
MenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName;

const MenubarSubContent = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
MenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName;

const MenubarContent = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>
>(({ className, align = "start", alignOffset = -4, sideOffset = 8, ...props }, ref) => (
  <MenubarPrimitive.Portal>
    <MenubarPrimitive.Content
      ref={ref}
      align={align}
      alignOffset={alignOffset}
      sideOffset={sideOffset}
      className={cn(
        "z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </MenubarPrimitive.Portal>
));
MenubarContent.displayName = MenubarPrimitive.Content.displayName;

const MenubarItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <MenubarPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  />
));
MenubarItem.displayName = MenubarPrimitive.Item.displayName;

const MenubarCheckboxItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <MenubarPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <MenubarPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </MenubarPrimitive.ItemIndicator>
    </span>
    {children}
  </MenubarPrimitive.CheckboxItem>
));
MenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName;

const MenubarRadioItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <MenubarPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <MenubarPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </MenubarPrimitive.ItemIndicator>
    </span>
    {children}
  </MenubarPrimitive.RadioItem>
));
MenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName;

const MenubarLabel = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <MenubarPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold", inset && "pl-8", className)}
    {...props}
  />
));
MenubarLabel.displayName = MenubarPrimitive.Label.displayName;

const MenubarSeparator = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-muted", className)} {...props} />
));
MenubarSeparator.displayName = MenubarPrimitive.Separator.displayName;

const MenubarShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest text-muted-foreground", className)} {...props} />;
};
MenubarShortcut.displayname = "MenubarShortcut";

export {
  Menubar,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarItem,
  MenubarSeparator,
  MenubarLabel,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarPortal,
  MenubarSubContent,
  MenubarSubTrigger,
  MenubarGroup,
  MenubarSub,
  MenubarShortcut,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/navigation-menu.tsx">
import * as React from "react";
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu";
import { cva } from "class-variance-authority";
import { ChevronDown } from "lucide-react";

import { cn } from "@/lib/utils";

const NavigationMenu = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Root
    ref={ref}
    className={cn("relative z-10 flex max-w-max flex-1 items-center justify-center", className)}
    {...props}
  >
    {children}
    <NavigationMenuViewport />
  </NavigationMenuPrimitive.Root>
));
NavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;

const NavigationMenuList = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.List
    ref={ref}
    className={cn("group flex flex-1 list-none items-center justify-center space-x-1", className)}
    {...props}
  />
));
NavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;

const NavigationMenuItem = NavigationMenuPrimitive.Item;

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50",
);

const NavigationMenuTrigger = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Trigger
    ref={ref}
    className={cn(navigationMenuTriggerStyle(), "group", className)}
    {...props}
  >
    {children}{" "}
    <ChevronDown
      className="relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180"
      aria-hidden="true"
    />
  </NavigationMenuPrimitive.Trigger>
));
NavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;

const NavigationMenuContent = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Content
    ref={ref}
    className={cn(
      "left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto",
      className,
    )}
    {...props}
  />
));
NavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;

const NavigationMenuLink = NavigationMenuPrimitive.Link;

const NavigationMenuViewport = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>
>(({ className, ...props }, ref) => (
  <div className={cn("absolute left-0 top-full flex justify-center")}>
    <NavigationMenuPrimitive.Viewport
      className={cn(
        "origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",
        className,
      )}
      ref={ref}
      {...props}
    />
  </div>
));
NavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;

const NavigationMenuIndicator = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Indicator
    ref={ref}
    className={cn(
      "top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",
      className,
    )}
    {...props}
  >
    <div className="relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md" />
  </NavigationMenuPrimitive.Indicator>
));
NavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;

export {
  navigationMenuTriggerStyle,
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/pagination.tsx">
import * as React from "react";
import { ChevronLeft, ChevronRight, MoreHorizontal } from "lucide-react";

import { cn } from "@/lib/utils";
import { ButtonProps, buttonVariants } from "@/components/ui/button";

const Pagination = ({ className, ...props }: React.ComponentProps<"nav">) => (
  <nav
    role="navigation"
    aria-label="pagination"
    className={cn("mx-auto flex w-full justify-center", className)}
    {...props}
  />
);
Pagination.displayName = "Pagination";

const PaginationContent = React.forwardRef<HTMLUListElement, React.ComponentProps<"ul">>(
  ({ className, ...props }, ref) => (
    <ul ref={ref} className={cn("flex flex-row items-center gap-1", className)} {...props} />
  ),
);
PaginationContent.displayName = "PaginationContent";

const PaginationItem = React.forwardRef<HTMLLIElement, React.ComponentProps<"li">>(({ className, ...props }, ref) => (
  <li ref={ref} className={cn("", className)} {...props} />
));
PaginationItem.displayName = "PaginationItem";

type PaginationLinkProps = {
  isActive?: boolean;
} & Pick<ButtonProps, "size"> &
  React.ComponentProps<"a">;

const PaginationLink = ({ className, isActive, size = "icon", ...props }: PaginationLinkProps) => (
  <a
    aria-current={isActive ? "page" : undefined}
    className={cn(
      buttonVariants({
        variant: isActive ? "outline" : "ghost",
        size,
      }),
      className,
    )}
    {...props}
  />
);
PaginationLink.displayName = "PaginationLink";

const PaginationPrevious = ({ className, ...props }: React.ComponentProps<typeof PaginationLink>) => (
  <PaginationLink aria-label="Go to previous page" size="default" className={cn("gap-1 pl-2.5", className)} {...props}>
    <ChevronLeft className="h-4 w-4" />
    <span>Previous</span>
  </PaginationLink>
);
PaginationPrevious.displayName = "PaginationPrevious";

const PaginationNext = ({ className, ...props }: React.ComponentProps<typeof PaginationLink>) => (
  <PaginationLink aria-label="Go to next page" size="default" className={cn("gap-1 pr-2.5", className)} {...props}>
    <span>Next</span>
    <ChevronRight className="h-4 w-4" />
  </PaginationLink>
);
PaginationNext.displayName = "PaginationNext";

const PaginationEllipsis = ({ className, ...props }: React.ComponentProps<"span">) => (
  <span aria-hidden className={cn("flex h-9 w-9 items-center justify-center", className)} {...props}>
    <MoreHorizontal className="h-4 w-4" />
    <span className="sr-only">More pages</span>
  </span>
);
PaginationEllipsis.displayName = "PaginationEllipsis";

export {
  Pagination,
  PaginationContent,
  PaginationEllipsis,
  PaginationItem,
  PaginationLink,
  PaginationNext,
  PaginationPrevious,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/popover.tsx">
import * as React from "react";
import * as PopoverPrimitive from "@radix-ui/react-popover";

import { cn } from "@/lib/utils";

const Popover = PopoverPrimitive.Root;

const PopoverTrigger = PopoverPrimitive.Trigger;

const PopoverContent = React.forwardRef<
  React.ElementRef<typeof PopoverPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <PopoverPrimitive.Portal>
    <PopoverPrimitive.Content
      ref={ref}
      align={align}
      sideOffset={sideOffset}
      className={cn(
        "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </PopoverPrimitive.Portal>
));
PopoverContent.displayName = PopoverPrimitive.Content.displayName;

export { Popover, PopoverTrigger, PopoverContent };
</file>

<file path="agent-orchestrator-hub/src/components/ui/progress.tsx">
import * as React from "react";
import * as ProgressPrimitive from "@radix-ui/react-progress";

import { cn } from "@/lib/utils";

const Progress = React.forwardRef<
  React.ElementRef<typeof ProgressPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>
>(({ className, value, ...props }, ref) => (
  <ProgressPrimitive.Root
    ref={ref}
    className={cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary", className)}
    {...props}
  >
    <ProgressPrimitive.Indicator
      className="h-full w-full flex-1 bg-primary transition-all"
      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
    />
  </ProgressPrimitive.Root>
));
Progress.displayName = ProgressPrimitive.Root.displayName;

export { Progress };
</file>

<file path="agent-orchestrator-hub/src/components/ui/radio-group.tsx">
import * as React from "react";
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group";
import { Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const RadioGroup = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>
>(({ className, ...props }, ref) => {
  return <RadioGroupPrimitive.Root className={cn("grid gap-2", className)} {...props} ref={ref} />;
});
RadioGroup.displayName = RadioGroupPrimitive.Root.displayName;

const RadioGroupItem = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>
>(({ className, ...props }, ref) => {
  return (
    <RadioGroupPrimitive.Item
      ref={ref}
      className={cn(
        "aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator className="flex items-center justify-center">
        <Circle className="h-2.5 w-2.5 fill-current text-current" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  );
});
RadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;

export { RadioGroup, RadioGroupItem };
</file>

<file path="agent-orchestrator-hub/src/components/ui/resizable.tsx">
import { GripVertical } from "lucide-react";
import * as ResizablePrimitive from "react-resizable-panels";

import { cn } from "@/lib/utils";

const ResizablePanelGroup = ({ className, ...props }: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (
  <ResizablePrimitive.PanelGroup
    className={cn("flex h-full w-full data-[panel-group-direction=vertical]:flex-col", className)}
    {...props}
  />
);

const ResizablePanel = ResizablePrimitive.Panel;

const ResizableHandle = ({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean;
}) => (
  <ResizablePrimitive.PanelResizeHandle
    className={cn(
      "relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",
      className,
    )}
    {...props}
  >
    {withHandle && (
      <div className="z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border">
        <GripVertical className="h-2.5 w-2.5" />
      </div>
    )}
  </ResizablePrimitive.PanelResizeHandle>
);

export { ResizablePanelGroup, ResizablePanel, ResizableHandle };
</file>

<file path="agent-orchestrator-hub/src/components/ui/scroll-area.tsx">
import * as React from "react";
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area";

import { cn } from "@/lib/utils";

const ScrollArea = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <ScrollAreaPrimitive.Root ref={ref} className={cn("relative overflow-hidden", className)} {...props}>
    <ScrollAreaPrimitive.Viewport className="h-full w-full rounded-[inherit]">{children}</ScrollAreaPrimitive.Viewport>
    <ScrollBar />
    <ScrollAreaPrimitive.Corner />
  </ScrollAreaPrimitive.Root>
));
ScrollArea.displayName = ScrollAreaPrimitive.Root.displayName;

const ScrollBar = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>
>(({ className, orientation = "vertical", ...props }, ref) => (
  <ScrollAreaPrimitive.ScrollAreaScrollbar
    ref={ref}
    orientation={orientation}
    className={cn(
      "flex touch-none select-none transition-colors",
      orientation === "vertical" && "h-full w-2.5 border-l border-l-transparent p-[1px]",
      orientation === "horizontal" && "h-2.5 flex-col border-t border-t-transparent p-[1px]",
      className,
    )}
    {...props}
  >
    <ScrollAreaPrimitive.ScrollAreaThumb className="relative flex-1 rounded-full bg-border" />
  </ScrollAreaPrimitive.ScrollAreaScrollbar>
));
ScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName;

export { ScrollArea, ScrollBar };
</file>

<file path="agent-orchestrator-hub/src/components/ui/select.tsx">
import * as React from "react";
import * as SelectPrimitive from "@radix-ui/react-select";
import { Check, ChevronDown, ChevronUp } from "lucide-react";

import { cn } from "@/lib/utils";

const Select = SelectPrimitive.Root;

const SelectGroup = SelectPrimitive.Group;

const SelectValue = SelectPrimitive.Value;

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className,
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
));
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName;

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn("flex cursor-default items-center justify-center py-1", className)}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
));
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn("flex cursor-default items-center justify-center py-1", className)}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
));
SelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className,
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]",
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
));
SelectContent.displayName = SelectPrimitive.Content.displayName;

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label ref={ref} className={cn("py-1.5 pl-8 pr-2 text-sm font-semibold", className)} {...props} />
));
SelectLabel.displayName = SelectPrimitive.Label.displayName;

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>

    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
));
SelectItem.displayName = SelectPrimitive.Item.displayName;

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-muted", className)} {...props} />
));
SelectSeparator.displayName = SelectPrimitive.Separator.displayName;

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/separator.tsx">
import * as React from "react";
import * as SeparatorPrimitive from "@radix-ui/react-separator";

import { cn } from "@/lib/utils";

const Separator = React.forwardRef<
  React.ElementRef<typeof SeparatorPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
>(({ className, orientation = "horizontal", decorative = true, ...props }, ref) => (
  <SeparatorPrimitive.Root
    ref={ref}
    decorative={decorative}
    orientation={orientation}
    className={cn("shrink-0 bg-border", orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]", className)}
    {...props}
  />
));
Separator.displayName = SeparatorPrimitive.Root.displayName;

export { Separator };
</file>

<file path="agent-orchestrator-hub/src/components/ui/sheet.tsx">
import * as SheetPrimitive from "@radix-ui/react-dialog";
import { cva, type VariantProps } from "class-variance-authority";
import { X } from "lucide-react";
import * as React from "react";

import { cn } from "@/lib/utils";

const Sheet = SheetPrimitive.Root;

const SheetTrigger = SheetPrimitive.Trigger;

const SheetClose = SheetPrimitive.Close;

const SheetPortal = SheetPrimitive.Portal;

const SheetOverlay = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className,
    )}
    {...props}
    ref={ref}
  />
));
SheetOverlay.displayName = SheetPrimitive.Overlay.displayName;

const sheetVariants = cva(
  "fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
  {
    variants: {
      side: {
        top: "inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",
        bottom:
          "inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",
        left: "inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",
        right:
          "inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm",
      },
    },
    defaultVariants: {
      side: "right",
    },
  },
);

interface SheetContentProps
  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,
    VariantProps<typeof sheetVariants> {}

const SheetContent = React.forwardRef<React.ElementRef<typeof SheetPrimitive.Content>, SheetContentProps>(
  ({ side = "right", className, children, ...props }, ref) => (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content ref={ref} className={cn(sheetVariants({ side }), className)} {...props}>
        {children}
        <SheetPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none">
          <X className="h-4 w-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  ),
);
SheetContent.displayName = SheetPrimitive.Content.displayName;

const SheetHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col space-y-2 text-center sm:text-left", className)} {...props} />
);
SheetHeader.displayName = "SheetHeader";

const SheetFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />
);
SheetFooter.displayName = "SheetFooter";

const SheetTitle = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Title ref={ref} className={cn("text-lg font-semibold text-foreground", className)} {...props} />
));
SheetTitle.displayName = SheetPrimitive.Title.displayName;

const SheetDescription = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
SheetDescription.displayName = SheetPrimitive.Description.displayName;

export {
  Sheet,
  SheetClose,
  SheetContent,
  SheetDescription,
  SheetFooter,
  SheetHeader,
  SheetOverlay,
  SheetPortal,
  SheetTitle,
  SheetTrigger,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/sidebar.tsx">
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { VariantProps, cva } from "class-variance-authority";
import { PanelLeft } from "lucide-react";

import { useIsMobile } from "@/hooks/use-mobile";
import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Separator } from "@/components/ui/separator";
import { Sheet, SheetContent } from "@/components/ui/sheet";
import { Skeleton } from "@/components/ui/skeleton";
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from "@/components/ui/tooltip";

const SIDEBAR_COOKIE_NAME = "sidebar:state";
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;
const SIDEBAR_WIDTH = "16rem";
const SIDEBAR_WIDTH_MOBILE = "18rem";
const SIDEBAR_WIDTH_ICON = "3rem";
const SIDEBAR_KEYBOARD_SHORTCUT = "b";

type SidebarContext = {
  state: "expanded" | "collapsed";
  open: boolean;
  setOpen: (open: boolean) => void;
  openMobile: boolean;
  setOpenMobile: (open: boolean) => void;
  isMobile: boolean;
  toggleSidebar: () => void;
};

const SidebarContext = React.createContext<SidebarContext | null>(null);

function useSidebar() {
  const context = React.useContext(SidebarContext);
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.");
  }

  return context;
}

const SidebarProvider = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    defaultOpen?: boolean;
    open?: boolean;
    onOpenChange?: (open: boolean) => void;
  }
>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {
  const isMobile = useIsMobile();
  const [openMobile, setOpenMobile] = React.useState(false);

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen);
  const open = openProp ?? _open;
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === "function" ? value(open) : value;
      if (setOpenProp) {
        setOpenProp(openState);
      } else {
        _setOpen(openState);
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;
    },
    [setOpenProp, open],
  );

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);
  }, [isMobile, setOpen, setOpenMobile]);

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {
        event.preventDefault();
        toggleSidebar();
      }
    };

    window.addEventListener("keydown", handleKeyDown);
    return () => window.removeEventListener("keydown", handleKeyDown);
  }, [toggleSidebar]);

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed";

  const contextValue = React.useMemo<SidebarContext>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],
  );

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar", className)}
          ref={ref}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  );
});
SidebarProvider.displayName = "SidebarProvider";

const Sidebar = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    side?: "left" | "right";
    variant?: "sidebar" | "floating" | "inset";
    collapsible?: "offcanvas" | "icon" | "none";
  }
>(({ side = "left", variant = "sidebar", collapsible = "offcanvas", className, children, ...props }, ref) => {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();

  if (collapsible === "none") {
    return (
      <div
        className={cn("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground", className)}
        ref={ref}
        {...props}
      >
        {children}
      </div>
    );
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-mobile="true"
          className="w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    );
  }

  return (
    <div
      ref={ref}
      className="group peer hidden text-sidebar-foreground md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        className={cn(
          "relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]"
            : "group-data-[collapsible=icon]:w-[--sidebar-width-icon]",
        )}
      />
      <div
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]"
            : "group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className,
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          className="flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow"
        >
          {children}
        </div>
      </div>
    </div>
  );
});
Sidebar.displayName = "Sidebar";

const SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(
  ({ className, onClick, ...props }, ref) => {
    const { toggleSidebar } = useSidebar();

    return (
      <Button
        ref={ref}
        data-sidebar="trigger"
        variant="ghost"
        size="icon"
        className={cn("h-7 w-7", className)}
        onClick={(event) => {
          onClick?.(event);
          toggleSidebar();
        }}
        {...props}
      >
        <PanelLeft />
        <span className="sr-only">Toggle Sidebar</span>
      </Button>
    );
  },
);
SidebarTrigger.displayName = "SidebarTrigger";

const SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<"button">>(
  ({ className, ...props }, ref) => {
    const { toggleSidebar } = useSidebar();

    return (
      <button
        ref={ref}
        data-sidebar="rail"
        aria-label="Toggle Sidebar"
        tabIndex={-1}
        onClick={toggleSidebar}
        title="Toggle Sidebar"
        className={cn(
          "absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex",
          "[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize",
          "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
          "group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar",
          "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
          "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarRail.displayName = "SidebarRail";

const SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<"main">>(({ className, ...props }, ref) => {
  return (
    <main
      ref={ref}
      className={cn(
        "relative flex min-h-svh flex-1 flex-col bg-background",
        "peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",
        className,
      )}
      {...props}
    />
  );
});
SidebarInset.displayName = "SidebarInset";

const SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(
  ({ className, ...props }, ref) => {
    return (
      <Input
        ref={ref}
        data-sidebar="input"
        className={cn(
          "h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarInput.displayName = "SidebarInput";

const SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return <div ref={ref} data-sidebar="header" className={cn("flex flex-col gap-2 p-2", className)} {...props} />;
});
SidebarHeader.displayName = "SidebarHeader";

const SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return <div ref={ref} data-sidebar="footer" className={cn("flex flex-col gap-2 p-2", className)} {...props} />;
});
SidebarFooter.displayName = "SidebarFooter";

const SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(
  ({ className, ...props }, ref) => {
    return (
      <Separator
        ref={ref}
        data-sidebar="separator"
        className={cn("mx-2 w-auto bg-sidebar-border", className)}
        {...props}
      />
    );
  },
);
SidebarSeparator.displayName = "SidebarSeparator";

const SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className,
      )}
      {...props}
    />
  );
});
SidebarContent.displayName = "SidebarContent";

const SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  );
});
SidebarGroup.displayName = "SidebarGroup";

const SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<"div"> & { asChild?: boolean }>(
  ({ className, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "div";

    return (
      <Comp
        ref={ref}
        data-sidebar="group-label"
        className={cn(
          "flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
          "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarGroupLabel.displayName = "SidebarGroupLabel";

const SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<"button"> & { asChild?: boolean }>(
  ({ className, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";

    return (
      <Comp
        ref={ref}
        data-sidebar="group-action"
        className={cn(
          "absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
          // Increases the hit area of the button on mobile.
          "after:absolute after:-inset-2 after:md:hidden",
          "group-data-[collapsible=icon]:hidden",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarGroupAction.displayName = "SidebarGroupAction";

const SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(
  ({ className, ...props }, ref) => (
    <div ref={ref} data-sidebar="group-content" className={cn("w-full text-sm", className)} {...props} />
  ),
);
SidebarGroupContent.displayName = "SidebarGroupContent";

const SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<"ul">>(({ className, ...props }, ref) => (
  <ul ref={ref} data-sidebar="menu" className={cn("flex w-full min-w-0 flex-col gap-1", className)} {...props} />
));
SidebarMenu.displayName = "SidebarMenu";

const SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<"li">>(({ className, ...props }, ref) => (
  <li ref={ref} data-sidebar="menu-item" className={cn("group/menu-item relative", className)} {...props} />
));
SidebarMenuItem.displayName = "SidebarMenuItem";

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:!p-0",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

const SidebarMenuButton = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> & {
    asChild?: boolean;
    isActive?: boolean;
    tooltip?: string | React.ComponentProps<typeof TooltipContent>;
  } & VariantProps<typeof sidebarMenuButtonVariants>
>(({ asChild = false, isActive = false, variant = "default", size = "default", tooltip, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "button";
  const { isMobile, state } = useSidebar();

  const button = (
    <Comp
      ref={ref}
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  );

  if (!tooltip) {
    return button;
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    };
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent side="right" align="center" hidden={state !== "collapsed" || isMobile} {...tooltip} />
    </Tooltip>
  );
});
SidebarMenuButton.displayName = "SidebarMenuButton";

const SidebarMenuAction = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> & {
    asChild?: boolean;
    showOnHover?: boolean;
  }
>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-action"
      className={cn(
        "absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 after:md:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",
        className,
      )}
      {...props}
    />
  );
});
SidebarMenuAction.displayName = "SidebarMenuAction";

const SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      data-sidebar="menu-badge"
      className={cn(
        "pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  ),
);
SidebarMenuBadge.displayName = "SidebarMenuBadge";

const SidebarMenuSkeleton = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    showIcon?: boolean;
  }
>(({ className, showIcon = false, ...props }, ref) => {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`;
  }, []);

  return (
    <div
      ref={ref}
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}
    >
      {showIcon && <Skeleton className="size-4 rounded-md" data-sidebar="menu-skeleton-icon" />}
      <Skeleton
        className="h-4 max-w-[--skeleton-width] flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  );
});
SidebarMenuSkeleton.displayName = "SidebarMenuSkeleton";

const SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<"ul">>(
  ({ className, ...props }, ref) => (
    <ul
      ref={ref}
      data-sidebar="menu-sub"
      className={cn(
        "mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  ),
);
SidebarMenuSub.displayName = "SidebarMenuSub";

const SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<"li">>(({ ...props }, ref) => (
  <li ref={ref} {...props} />
));
SidebarMenuSubItem.displayName = "SidebarMenuSubItem";

const SidebarMenuSubButton = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentProps<"a"> & {
    asChild?: boolean;
    size?: "sm" | "md";
    isActive?: boolean;
  }
>(({ asChild = false, size = "md", isActive, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
});
SidebarMenuSubButton.displayName = "SidebarMenuSubButton";

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/skeleton.tsx">
import { cn } from "@/lib/utils";

function Skeleton({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {
  return <div className={cn("animate-pulse rounded-md bg-muted", className)} {...props} />;
}

export { Skeleton };
</file>

<file path="agent-orchestrator-hub/src/components/ui/slider.tsx">
import * as React from "react";
import * as SliderPrimitive from "@radix-ui/react-slider";

import { cn } from "@/lib/utils";

const Slider = React.forwardRef<
  React.ElementRef<typeof SliderPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>
>(({ className, ...props }, ref) => (
  <SliderPrimitive.Root
    ref={ref}
    className={cn("relative flex w-full touch-none select-none items-center", className)}
    {...props}
  >
    <SliderPrimitive.Track className="relative h-2 w-full grow overflow-hidden rounded-full bg-secondary">
      <SliderPrimitive.Range className="absolute h-full bg-primary" />
    </SliderPrimitive.Track>
    <SliderPrimitive.Thumb className="block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50" />
  </SliderPrimitive.Root>
));
Slider.displayName = SliderPrimitive.Root.displayName;

export { Slider };
</file>

<file path="agent-orchestrator-hub/src/components/ui/sonner.tsx">
import { useTheme } from "next-themes";
import { Toaster as Sonner, toast } from "sonner";

type ToasterProps = React.ComponentProps<typeof Sonner>;

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme();

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      toastOptions={{
        classNames: {
          toast:
            "group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",
          description: "group-[.toast]:text-muted-foreground",
          actionButton: "group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",
          cancelButton: "group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",
        },
      }}
      {...props}
    />
  );
};

export { Toaster, toast };
</file>

<file path="agent-orchestrator-hub/src/components/ui/switch.tsx">
import * as React from "react";
import * as SwitchPrimitives from "@radix-ui/react-switch";

import { cn } from "@/lib/utils";

const Switch = React.forwardRef<
  React.ElementRef<typeof SwitchPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>
>(({ className, ...props }, ref) => (
  <SwitchPrimitives.Root
    className={cn(
      "peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",
      className,
    )}
    {...props}
    ref={ref}
  >
    <SwitchPrimitives.Thumb
      className={cn(
        "pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",
      )}
    />
  </SwitchPrimitives.Root>
));
Switch.displayName = SwitchPrimitives.Root.displayName;

export { Switch };
</file>

<file path="agent-orchestrator-hub/src/components/ui/table.tsx">
import * as React from "react";

import { cn } from "@/lib/utils";

const Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(
  ({ className, ...props }, ref) => (
    <div className="relative w-full overflow-auto">
      <table ref={ref} className={cn("w-full caption-bottom text-sm", className)} {...props} />
    </div>
  ),
);
Table.displayName = "Table";

const TableHeader = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
  ({ className, ...props }, ref) => <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />,
);
TableHeader.displayName = "TableHeader";

const TableBody = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
  ({ className, ...props }, ref) => (
    <tbody ref={ref} className={cn("[&_tr:last-child]:border-0", className)} {...props} />
  ),
);
TableBody.displayName = "TableBody";

const TableFooter = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
  ({ className, ...props }, ref) => (
    <tfoot ref={ref} className={cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0", className)} {...props} />
  ),
);
TableFooter.displayName = "TableFooter";

const TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(
  ({ className, ...props }, ref) => (
    <tr
      ref={ref}
      className={cn("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50", className)}
      {...props}
    />
  ),
);
TableRow.displayName = "TableRow";

const TableHead = React.forwardRef<HTMLTableCellElement, React.ThHTMLAttributes<HTMLTableCellElement>>(
  ({ className, ...props }, ref) => (
    <th
      ref={ref}
      className={cn(
        "h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",
        className,
      )}
      {...props}
    />
  ),
);
TableHead.displayName = "TableHead";

const TableCell = React.forwardRef<HTMLTableCellElement, React.TdHTMLAttributes<HTMLTableCellElement>>(
  ({ className, ...props }, ref) => (
    <td ref={ref} className={cn("p-4 align-middle [&:has([role=checkbox])]:pr-0", className)} {...props} />
  ),
);
TableCell.displayName = "TableCell";

const TableCaption = React.forwardRef<HTMLTableCaptionElement, React.HTMLAttributes<HTMLTableCaptionElement>>(
  ({ className, ...props }, ref) => (
    <caption ref={ref} className={cn("mt-4 text-sm text-muted-foreground", className)} {...props} />
  ),
);
TableCaption.displayName = "TableCaption";

export { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };
</file>

<file path="agent-orchestrator-hub/src/components/ui/tabs.tsx">
import * as React from "react";
import * as TabsPrimitive from "@radix-ui/react-tabs";

import { cn } from "@/lib/utils";

const Tabs = TabsPrimitive.Root;

const TabsList = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.List
    ref={ref}
    className={cn(
      "inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",
      className,
    )}
    {...props}
  />
));
TabsList.displayName = TabsPrimitive.List.displayName;

const TabsTrigger = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Trigger
    ref={ref}
    className={cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
      className,
    )}
    {...props}
  />
));
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName;

const TabsContent = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Content
    ref={ref}
    className={cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className,
    )}
    {...props}
  />
));
TabsContent.displayName = TabsPrimitive.Content.displayName;

export { Tabs, TabsList, TabsTrigger, TabsContent };
</file>

<file path="agent-orchestrator-hub/src/components/ui/textarea.tsx">
import * as React from "react";

import { cn } from "@/lib/utils";

export interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}

const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {
  return (
    <textarea
      className={cn(
        "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      ref={ref}
      {...props}
    />
  );
});
Textarea.displayName = "Textarea";

export { Textarea };
</file>

<file path="agent-orchestrator-hub/src/components/ui/toast.tsx">
import * as React from "react";
import * as ToastPrimitives from "@radix-ui/react-toast";
import { cva, type VariantProps } from "class-variance-authority";
import { X } from "lucide-react";

import { cn } from "@/lib/utils";

const ToastProvider = ToastPrimitives.Provider;

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className,
    )}
    {...props}
  />
));
ToastViewport.displayName = ToastPrimitives.Viewport.displayName;

const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground",
        destructive: "destructive group border-destructive bg-destructive text-destructive-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> & VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return <ToastPrimitives.Root ref={ref} className={cn(toastVariants({ variant }), className)} {...props} />;
});
Toast.displayName = ToastPrimitives.Root.displayName;

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",
      className,
    )}
    {...props}
  />
));
ToastAction.displayName = ToastPrimitives.Action.displayName;

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      "absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className,
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
));
ToastClose.displayName = ToastPrimitives.Close.displayName;

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title ref={ref} className={cn("text-sm font-semibold", className)} {...props} />
));
ToastTitle.displayName = ToastPrimitives.Title.displayName;

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description ref={ref} className={cn("text-sm opacity-90", className)} {...props} />
));
ToastDescription.displayName = ToastPrimitives.Description.displayName;

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;

type ToastActionElement = React.ReactElement<typeof ToastAction>;

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
};
</file>

<file path="agent-orchestrator-hub/src/components/ui/toaster.tsx">
import { useToast } from "@/hooks/use-toast";
import { Toast, ToastClose, ToastDescription, ToastProvider, ToastTitle, ToastViewport } from "@/components/ui/toast";

export function Toaster() {
  const { toasts } = useToast();

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && <ToastDescription>{description}</ToastDescription>}
            </div>
            {action}
            <ToastClose />
          </Toast>
        );
      })}
      <ToastViewport />
    </ToastProvider>
  );
}
</file>

<file path="agent-orchestrator-hub/src/components/ui/toggle-group.tsx">
import * as React from "react";
import * as ToggleGroupPrimitive from "@radix-ui/react-toggle-group";
import { type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";
import { toggleVariants } from "@/components/ui/toggle";

const ToggleGroupContext = React.createContext<VariantProps<typeof toggleVariants>>({
  size: "default",
  variant: "default",
});

const ToggleGroup = React.forwardRef<
  React.ElementRef<typeof ToggleGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> & VariantProps<typeof toggleVariants>
>(({ className, variant, size, children, ...props }, ref) => (
  <ToggleGroupPrimitive.Root ref={ref} className={cn("flex items-center justify-center gap-1", className)} {...props}>
    <ToggleGroupContext.Provider value={{ variant, size }}>{children}</ToggleGroupContext.Provider>
  </ToggleGroupPrimitive.Root>
));

ToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName;

const ToggleGroupItem = React.forwardRef<
  React.ElementRef<typeof ToggleGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> & VariantProps<typeof toggleVariants>
>(({ className, children, variant, size, ...props }, ref) => {
  const context = React.useContext(ToggleGroupContext);

  return (
    <ToggleGroupPrimitive.Item
      ref={ref}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        className,
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  );
});

ToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName;

export { ToggleGroup, ToggleGroupItem };
</file>

<file path="agent-orchestrator-hub/src/components/ui/toggle.tsx">
import * as React from "react";
import * as TogglePrimitive from "@radix-ui/react-toggle";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const toggleVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline: "border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",
      },
      size: {
        default: "h-10 px-3",
        sm: "h-9 px-2.5",
        lg: "h-11 px-5",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

const Toggle = React.forwardRef<
  React.ElementRef<typeof TogglePrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>
>(({ className, variant, size, ...props }, ref) => (
  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />
));

Toggle.displayName = TogglePrimitive.Root.displayName;

export { Toggle, toggleVariants };
</file>

<file path="agent-orchestrator-hub/src/components/ui/tooltip.tsx">
import * as React from "react";
import * as TooltipPrimitive from "@radix-ui/react-tooltip";

import { cn } from "@/lib/utils";

const TooltipProvider = TooltipPrimitive.Provider;

const Tooltip = TooltipPrimitive.Root;

const TooltipTrigger = TooltipPrimitive.Trigger;

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Content
    ref={ref}
    sideOffset={sideOffset}
    className={cn(
      "z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
TooltipContent.displayName = TooltipPrimitive.Content.displayName;

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };
</file>

<file path="agent-orchestrator-hub/src/components/ui/use-toast.ts">
import { useToast, toast } from "@/hooks/use-toast";

export { useToast, toast };
</file>

<file path="agent-orchestrator-hub/src/hooks/use-mobile.tsx">
import * as React from "react";

const MOBILE_BREAKPOINT = 768;

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined);

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    };
    mql.addEventListener("change", onChange);
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    return () => mql.removeEventListener("change", onChange);
  }, []);

  return !!isMobile;
}
</file>

<file path="agent-orchestrator-hub/src/hooks/use-toast.ts">
import * as React from "react";

import type { ToastActionElement, ToastProps } from "@/components/ui/toast";

const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;

type ToasterToast = ToastProps & {
  id: string;
  title?: React.ReactNode;
  description?: React.ReactNode;
  action?: ToastActionElement;
};

const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const;

let count = 0;

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER;
  return count.toString();
}

type ActionType = typeof actionTypes;

type Action =
  | {
      type: ActionType["ADD_TOAST"];
      toast: ToasterToast;
    }
  | {
      type: ActionType["UPDATE_TOAST"];
      toast: Partial<ToasterToast>;
    }
  | {
      type: ActionType["DISMISS_TOAST"];
      toastId?: ToasterToast["id"];
    }
  | {
      type: ActionType["REMOVE_TOAST"];
      toastId?: ToasterToast["id"];
    };

interface State {
  toasts: ToasterToast[];
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    });
  }, TOAST_REMOVE_DELAY);

  toastTimeouts.set(toastId, timeout);
};

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      };

    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts.map((t) => (t.id === action.toast.id ? { ...t, ...action.toast } : t)),
      };

    case "DISMISS_TOAST": {
      const { toastId } = action;

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id);
        });
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t,
        ),
      };
    }
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      };
  }
};

const listeners: Array<(state: State) => void> = [];

let memoryState: State = { toasts: [] };

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}

type Toast = Omit<ToasterToast, "id">;

function toast({ ...props }: Toast) {
  const id = genId();

  const update = (props: ToasterToast) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    });
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id });

  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      },
    },
  });

  return {
    id: id,
    dismiss,
    update,
  };
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState);

  React.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  };
}

export { useToast, toast };
</file>

<file path="agent-orchestrator-hub/src/index.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

@layer base {
  :root {
    --background: 0 0% 4%;
    --foreground: 0 0% 95%;

    --card: 0 0% 7%;
    --card-foreground: 0 0% 95%;

    --popover: 0 0% 7%;
    --popover-foreground: 0 0% 95%;

    --primary: 110 100% 33%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 12%;
    --secondary-foreground: 0 0% 90%;

    --muted: 0 0% 12%;
    --muted-foreground: 0 0% 55%;

    --accent: 340 85% 55%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 14%;
    --input: 0 0% 14%;
    --ring: 110 100% 33%;

    --radius: 0.75rem;

    --sidebar-background: 0 0% 5%;
    --sidebar-foreground: 0 0% 85%;
    --sidebar-primary: 110 100% 33%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 10%;
    --sidebar-accent-foreground: 0 0% 95%;
    --sidebar-border: 0 0% 12%;
    --sidebar-ring: 110 100% 33%;

    /* Custom tokens */
    --glow-primary: 0 0 20px hsl(110 100% 33% / 0.3);
    --glow-accent: 0 0 20px hsl(340 85% 55% / 0.3);
    --gradient-primary: linear-gradient(135deg, hsl(110 100% 33%), hsl(140 80% 40%));
    --gradient-accent: linear-gradient(135deg, hsl(340 85% 55%), hsl(320 70% 50%));
    --gradient-card: linear-gradient(145deg, hsl(0 0% 8%), hsl(0 0% 6%));
    --surface-elevated: 0 0% 9%;
    --chart-1: 110 100% 33%;
    --chart-2: 340 85% 55%;
    --chart-3: 200 80% 50%;
    --chart-4: 45 90% 55%;
    --chart-5: 270 70% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    direction: rtl;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'IBM Plex Sans Arabic', sans-serif;
  }

  code, pre, .font-mono {
    font-family: 'JetBrains Mono', monospace;
  }
}

@layer components {
  .glass-card {
    @apply bg-card/80 backdrop-blur-xl border border-border/50 rounded-xl;
  }

  .glow-primary {
    box-shadow: var(--glow-primary);
  }

  .glow-accent {
    box-shadow: var(--glow-accent);
  }

  .gradient-text-primary {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .gradient-text-accent {
    background: var(--gradient-accent);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .animate-glow {
    animation: glow-pulse 3s ease-in-out infinite;
  }
}

@keyframes glow-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

/* React Flow custom styles */
.react-flow__node {
  direction: rtl;
}

.react-flow__attribution {
  display: none !important;
}

.react-flow__edge-path {
  stroke-linecap: round;
}

.react-flow__handle {
  transition: all 0.2s ease;
}

.react-flow__handle:hover {
  transform: scale(1.4);
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: hsl(0 0% 7%);
}

::-webkit-scrollbar-thumb {
  background: hsl(0 0% 20%);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(0 0% 30%);
}
</file>

<file path="agent-orchestrator-hub/src/lib/aiService.ts">
/**
 * Ø®Ø¯Ù…Ø© AI Ù…ÙˆØ­Ø¯Ø© â€” ØªØ¯Ø¹Ù… Google Gemini, OpenAI, Anthropic, Mistral
 * ØªØªØµÙ„ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ù€ APIs Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ (Frontend-only)
 */

export interface AIMessage {
    role: 'user' | 'assistant' | 'system';
    content: string;
}

export interface AIResponse {
    content: string;
    tokens?: { prompt: number; completion: number; total: number };
}

// ---------- Google Gemini ----------
async function callGemini(
    apiKey: string,
    modelId: string,
    systemPrompt: string,
    messages: AIMessage[]
): Promise<AIResponse> {
    const contents = messages
        .filter((m) => m.role !== 'system')
        .map((m) => ({
            role: m.role === 'assistant' ? 'model' : 'user',
            parts: [{ text: m.content }],
        }));

    const body: Record<string, unknown> = { contents };
    if (systemPrompt) {
        body.systemInstruction = { parts: [{ text: systemPrompt }] };
    }

    const res = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/${modelId}:generateContent?key=${apiKey}`,
        {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(body),
        }
    );

    if (!res.ok) {
        const err = await res.text();
        throw new Error(`Gemini API Error (${res.status}): ${err}`);
    }

    const data = await res.json();
    const text = data.candidates?.[0]?.content?.parts?.[0]?.text || '';
    const usage = data.usageMetadata;

    return {
        content: text,
        tokens: usage
            ? {
                prompt: usage.promptTokenCount || 0,
                completion: usage.candidatesTokenCount || 0,
                total: usage.totalTokenCount || 0,
            }
            : undefined,
    };
}

// ---------- OpenAI ----------
async function callOpenAI(
    apiKey: string,
    modelId: string,
    systemPrompt: string,
    messages: AIMessage[]
): Promise<AIResponse> {
    const msgs: { role: string; content: string }[] = [];
    if (systemPrompt) msgs.push({ role: 'system', content: systemPrompt });
    msgs.push(...messages.map((m) => ({ role: m.role, content: m.content })));

    const res = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
            Authorization: `Bearer ${apiKey}`,
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ model: modelId, messages: msgs }),
    });

    if (!res.ok) {
        const err = await res.text();
        throw new Error(`OpenAI API Error (${res.status}): ${err}`);
    }

    const data = await res.json();
    const text = data.choices?.[0]?.message?.content || '';
    const usage = data.usage;

    return {
        content: text,
        tokens: usage
            ? {
                prompt: usage.prompt_tokens || 0,
                completion: usage.completion_tokens || 0,
                total: usage.total_tokens || 0,
            }
            : undefined,
    };
}

// ---------- Anthropic ----------
async function callAnthropic(
    apiKey: string,
    modelId: string,
    systemPrompt: string,
    messages: AIMessage[]
): Promise<AIResponse> {
    const msgs = messages
        .filter((m) => m.role !== 'system')
        .map((m) => ({ role: m.role, content: m.content }));

    const body: Record<string, unknown> = {
        model: modelId,
        max_tokens: 4096,
        messages: msgs,
    };
    if (systemPrompt) body.system = systemPrompt;

    const res = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: {
            'x-api-key': apiKey,
            'anthropic-version': '2023-06-01',
            'anthropic-dangerous-direct-browser-access': 'true',
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(body),
    });

    if (!res.ok) {
        const err = await res.text();
        throw new Error(`Anthropic API Error (${res.status}): ${err}`);
    }

    const data = await res.json();
    const text =
        data.content?.map((b: { type: string; text: string }) => b.text).join('') || '';
    const usage = data.usage;

    return {
        content: text,
        tokens: usage
            ? {
                prompt: usage.input_tokens || 0,
                completion: usage.output_tokens || 0,
                total: (usage.input_tokens || 0) + (usage.output_tokens || 0),
            }
            : undefined,
    };
}

// ---------- Mistral ----------
async function callMistral(
    apiKey: string,
    modelId: string,
    systemPrompt: string,
    messages: AIMessage[]
): Promise<AIResponse> {
    const msgs: { role: string; content: string }[] = [];
    if (systemPrompt) msgs.push({ role: 'system', content: systemPrompt });
    msgs.push(...messages.map((m) => ({ role: m.role, content: m.content })));

    const res = await fetch('https://api.mistral.ai/v1/chat/completions', {
        method: 'POST',
        headers: {
            Authorization: `Bearer ${apiKey}`,
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ model: modelId, messages: msgs }),
    });

    if (!res.ok) {
        const err = await res.text();
        throw new Error(`Mistral API Error (${res.status}): ${err}`);
    }

    const data = await res.json();
    const text = data.choices?.[0]?.message?.content || '';
    const usage = data.usage;

    return {
        content: text,
        tokens: usage
            ? {
                prompt: usage.prompt_tokens || 0,
                completion: usage.completion_tokens || 0,
                total: usage.total_tokens || 0,
            }
            : undefined,
    };
}

// ---------- Unified Entry Point ----------
const PROVIDER_MAP: Record<
    string,
    (key: string, model: string, sys: string, msgs: AIMessage[]) => Promise<AIResponse>
> = {
    googleai: callGemini,
    openai: callOpenAI,
    anthropic: callAnthropic,
    mistral: callMistral,
};

/**
 * Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù†Ù…ÙˆØ°Ø¬ AI Ø­Ù‚ÙŠÙ‚ÙŠ
 * @throws Error Ø¥Ø°Ø§ Ø§Ù„Ù…Ø²ÙˆØ¯ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… Ø£Ùˆ Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯
 */
export async function sendMessage(
    provider: string,
    modelId: string,
    apiKey: string,
    systemPrompt: string,
    messages: AIMessage[]
): Promise<AIResponse> {
    if (!apiKey) {
        throw new Error('âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ API. Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ£Ø¶Ù Ù…ÙØªØ§Ø­Ø§Ù‹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø²ÙˆØ¯.');
    }

    const handler = PROVIDER_MAP[provider];
    if (!handler) {
        throw new Error(`Ù…Ø²ÙˆØ¯ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…: ${provider}`);
    }

    return handler(apiKey, modelId, systemPrompt, messages);
}
</file>

<file path="agent-orchestrator-hub/src/lib/engine/dag-resolver.ts">
/**
 * Ù…Ø­Ù„Ù„ DAG - ÙŠØ­Ù„Ù„ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ ÙˆÙŠØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¯ÙˆØ±Ø§Øª
 * ÙˆÙŠØ­Ø¯Ø¯ ØªØ±ØªÙŠØ¨ Ø§Ù„ØªÙ†ÙÙŠØ° ÙˆØ§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠ
 * ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø­ÙƒÙˆÙ…Ø© (loops) Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
 */

export interface DAGNode {
  id: string;
  agentId: string;
}

export interface DAGEdge {
  id: string;
  source: string;
  target: string;
  condition?: {
    type: 'always' | 'conditional' | 'on_success' | 'on_error';
    expression?: string;
  };
}

export interface ExecutionLevel {
  level: number;
  nodeIds: string[]; // Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ°Ù‡Ø§ Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ
}

/** Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯ÙˆØ±Ø© Ù…ÙƒØªØ´ÙØ© */
export interface CycleInfo {
  /** Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ø¯ÙˆØ±Ø© */
  backEdges: DAGEdge[];
  /** Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø© */
  cycleNodes: string[];
}

/** Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¯ÙˆØ±Ø§Øª ÙÙŠ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ */
export function hasCycle(nodes: DAGNode[], edges: DAGEdge[]): boolean {
  const adj = new Map<string, string[]>();
  nodes.forEach((n) => adj.set(n.id, []));
  edges.forEach((e) => adj.get(e.source)?.push(e.target));

  const visited = new Set<string>();
  const recStack = new Set<string>();

  function dfs(nodeId: string): boolean {
    visited.add(nodeId);
    recStack.add(nodeId);
    for (const neighbor of adj.get(nodeId) || []) {
      if (!visited.has(neighbor) && dfs(neighbor)) return true;
      if (recStack.has(neighbor)) return true;
    }
    recStack.delete(nodeId);
    return false;
  }

  for (const node of nodes) {
    if (!visited.has(node.id) && dfs(node.id)) return true;
  }
  return false;
}

/** ÙƒØ´Ù Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ø¨Ø§Ù„ØªÙØµÙŠÙ„ */
export function detectCycles(nodes: DAGNode[], edges: DAGEdge[]): CycleInfo | null {
  const adj = new Map<string, string[]>();
  nodes.forEach((n) => adj.set(n.id, []));
  edges.forEach((e) => adj.get(e.source)?.push(e.target));

  const visited = new Set<string>();
  const recStack = new Set<string>();
  const backEdgeTargets: Array<{ from: string; to: string }> = [];
  const cycleNodeSet = new Set<string>();

  function dfs(nodeId: string, path: string[]): void {
    visited.add(nodeId);
    recStack.add(nodeId);
    path.push(nodeId);

    for (const neighbor of adj.get(nodeId) || []) {
      if (recStack.has(neighbor)) {
        // Ø¯ÙˆØ±Ø© Ù…ÙƒØªØ´ÙØ©!
        backEdgeTargets.push({ from: nodeId, to: neighbor });
        // Ø¬Ù…Ø¹ Ø§Ù„Ø¹Ù‚Ø¯ ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø©
        const cycleStart = path.indexOf(neighbor);
        if (cycleStart >= 0) {
          for (let i = cycleStart; i < path.length; i++) {
            cycleNodeSet.add(path[i]);
          }
        }
      } else if (!visited.has(neighbor)) {
        dfs(neighbor, [...path]);
      }
    }
    recStack.delete(nodeId);
  }

  for (const node of nodes) {
    if (!visited.has(node.id)) {
      dfs(node.id, []);
    }
  }

  if (backEdgeTargets.length === 0) return null;

  // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„ÙØ¹Ù„ÙŠØ© Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ø¯ÙˆØ±Ø©
  const backEdges = edges.filter((e) =>
    backEdgeTargets.some((bt) => bt.from === e.source && bt.to === e.target)
  );

  return {
    backEdges,
    cycleNodes: Array.from(cycleNodeSet),
  };
}

/** Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ DAG Ù†Ø¸ÙŠÙ */
export function removeBackEdges(edges: DAGEdge[], backEdgeIds: string[]): DAGEdge[] {
  return edges.filter((e) => !backEdgeIds.includes(e.id));
}

/** ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø¬Ø°Ø±ÙŠØ© (Ø¨Ø¯ÙˆÙ† Ù…Ø¯Ø®Ù„Ø§Øª) */
export function findRootNodes(nodes: DAGNode[], edges: DAGEdge[]): string[] {
  const targets = new Set(edges.map((e) => e.target));
  return nodes.filter((n) => !targets.has(n.id)).map((n) => n.id);
}

/** ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ø¨Ø¯ÙˆÙ† Ù…Ø®Ø±Ø¬Ø§Øª) */
export function findLeafNodes(nodes: DAGNode[], edges: DAGEdge[]): string[] {
  const sources = new Set(edges.map((e) => e.source));
  return nodes.filter((n) => !sources.has(n.id)).map((n) => n.id);
}

/** ØªØ±ØªÙŠØ¨ Ø·ÙˆØ¨ÙˆÙ„ÙˆØ¬ÙŠ - ÙŠØ­Ø¯Ø¯ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠ */
export function topologicalLevels(nodes: DAGNode[], edges: DAGEdge[]): ExecutionLevel[] {
  if (hasCycle(nodes, edges)) throw new Error('Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¯ÙˆØ±Ø©!');

  const inDegree = new Map<string, number>();
  const adj = new Map<string, string[]>();

  nodes.forEach((n) => {
    inDegree.set(n.id, 0);
    adj.set(n.id, []);
  });

  edges.forEach((e) => {
    adj.get(e.source)?.push(e.target);
    inDegree.set(e.target, (inDegree.get(e.target) || 0) + 1);
  });

  const levels: ExecutionLevel[] = [];
  let queue = nodes.filter((n) => inDegree.get(n.id) === 0).map((n) => n.id);
  let level = 0;

  while (queue.length > 0) {
    levels.push({ level, nodeIds: [...queue] });
    const nextQueue: string[] = [];
    for (const nodeId of queue) {
      for (const neighbor of adj.get(nodeId) || []) {
        inDegree.set(neighbor, (inDegree.get(neighbor) || 0) - 1);
        if (inDegree.get(neighbor) === 0) nextQueue.push(neighbor);
      }
    }
    queue = nextQueue;
    level++;
  }

  return levels;
}

/** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù„Ø¹Ù‚Ø¯Ø© Ù…Ø¹ÙŠÙ†Ø© */
export function getPredecessors(nodeId: string, edges: DAGEdge[]): string[] {
  return edges.filter((e) => e.target === nodeId).map((e) => e.source);
}

/** Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù„Ø§Ø­Ù‚Ø© Ù„Ø¹Ù‚Ø¯Ø© Ù…Ø¹ÙŠÙ†Ø© */
export function getSuccessors(nodeId: string, edges: DAGEdge[]): string[] {
  return edges.filter((e) => e.source === nodeId).map((e) => e.target);
}
</file>

<file path="agent-orchestrator-hub/src/lib/engine/pipeline-executor.ts">
/**
 * Ù…Ø­Ø±Ùƒ ØªÙ†ÙÙŠØ° Pipeline
 * ÙŠØ¯ÙŠØ± ØªÙ†ÙÙŠØ° DAG Ø¨Ø´ÙƒÙ„ Ù…ØªÙˆØ§Ø²ÙŠ Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
 * ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¯ÙˆØ±Ø§Øª (loops) Ø§Ù„Ù…Ø­ÙƒÙˆÙ…Ø©
 */

import { topologicalLevels, getPredecessors, hasCycle, removeBackEdges, type DAGNode, type DAGEdge } from './dag-resolver';
import { sendMessage } from '@/lib/aiService';

export interface NodeResult {
  nodeId: string;
  agentId: string;
  agentName: string;
  input: string;
  output: string;
  status: 'pending' | 'running' | 'completed' | 'failed' | 'skipped';
  startTime?: string;
  endTime?: string;
  duration?: number;
  tokens?: { prompt: number; completion: number; total: number };
  error?: string;
  level?: number;
  /** Ø±Ù‚Ù… Ø§Ù„ØªÙƒØ±Ø§Ø± (Ù„Ù„Ø¯ÙˆØ±Ø§Øª) */
  iteration?: number;
}

export interface ExecutionState {
  status: 'idle' | 'running' | 'completed' | 'failed';
  currentLevel: number;
  totalLevels: number;
  results: Map<string, NodeResult>;
  activeNodes: Set<string>;
  startTime?: string;
  endTime?: string;
  finalOutput?: string;
  /** Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© */
  loopInfo?: { currentIteration: number; totalIterations: number };
}

export type ExecutionCallback = (state: ExecutionState) => void;

interface AgentInfo {
  id: string;
  name: string;
  systemPrompt: string;
  modelProvider: string;
  modelId: string;
  apiKey?: string;
}

/** Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¯ÙˆØ±Ø© */
export interface LoopConfig {
  /** Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„ØªÙŠ ØªØ´ÙƒÙ„ Ø§Ù„Ø¯ÙˆØ±Ø© */
  backEdgeIds: string[];
  /** Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª (1-10) */
  iterations: number;
}

/** Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ AI Ø­Ù‚ÙŠÙ‚ÙŠ */
async function callAgentAI(
  agent: AgentInfo,
  input: string,
): Promise<{ output: string; tokens: { prompt: number; completion: number; total: number } }> {
  if (!agent.apiKey) {
    return {
      output: `âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ API Ù„Ù€ ${agent.name}. Ø¹Ø¯Ù‘Ù„ Ø§Ù„ÙˆÙƒÙŠÙ„ ÙˆØ­Ø¯Ø¯ Ù…ÙØªØ§Ø­Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.`,
      tokens: { prompt: 0, completion: 0, total: 0 },
    };
  }

  const result = await sendMessage(
    agent.modelProvider,
    agent.modelId,
    agent.apiKey,
    agent.systemPrompt,
    [{ role: 'user', content: input }]
  );

  return {
    output: result.content,
    tokens: result.tokens || { prompt: 0, completion: 0, total: 0 },
  };
}

/**
 * Ø¨Ù†Ø§Ø¡ prompt Ø§Ù„Ù…Ø¯Ø®Ù„ Ù„Ù„Ø¹Ù‚Ø¯Ø© Ø¨Ø³ÙŠØ§Ù‚ ÙˆØ§Ø¶Ø­
 */
function buildNodeInput(
  predecessors: string[],
  results: Map<string, NodeResult>,
  agents: Map<string, AgentInfo>,
  nodes: DAGNode[],
  initialInput: string,
  iteration?: number,
): string {
  if (predecessors.length === 0) {
    return initialInput;
  }

  const parts: string[] = [];

  predecessors.forEach((pid) => {
    const result = results.get(pid);
    if (!result?.output) return;

    const sourceNode = nodes.find((n) => n.id === pid);
    const sourceAgent = sourceNode ? agents.get(sourceNode.agentId) : undefined;
    const agentName = sourceAgent?.name || result.agentName || 'ÙˆÙƒÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';

    parts.push(
      `=== Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„ÙˆÙƒÙŠÙ„ "${agentName}" ===\n${result.output}`
    );
  });

  if (parts.length === 0) return initialInput;

  let prompt = `${parts.join('\n\n---\n\n')}`;
  if (iteration != null && iteration > 0) {
    prompt += `\n\n(Ø§Ù„ØªÙƒØ±Ø§Ø± ${iteration + 1})`;
  }
  prompt += '\n\n---\nÙ†ÙØ° Ø§Ù„Ø¢Ù† Ù…Ø¨Ø§Ø´Ø±Ø©';

  return prompt;
}

/** ØªÙ†ÙÙŠØ° Ù…Ø³ØªÙˆÙ‰ ÙˆØ§Ø­Ø¯ Ù…Ù† Ø§Ù„Ø¹Ù‚Ø¯ */
async function executeLevel(
  level: { level: number; nodeIds: string[] },
  nodes: DAGNode[],
  edges: DAGEdge[],
  agents: Map<string, AgentInfo>,
  state: ExecutionState,
  initialInput: string,
  onUpdate: ExecutionCallback,
  iteration?: number,
) {
  state.currentLevel = level.level;

  const promises = level.nodeIds.map(async (nodeId) => {
    const node = nodes.find((n) => n.id === nodeId)!;
    const agent = agents.get(node.agentId);
    const resultKey = iteration != null && iteration > 0 ? `${nodeId}__iter${iteration}` : nodeId;

    if (!agent) {
      state.results.set(resultKey, {
        nodeId,
        agentId: node.agentId,
        agentName: 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯',
        input: '',
        output: 'âš ï¸ [Ø®Ø·Ø£: Ø§Ù„ÙˆÙƒÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ â€” ØªÙ… ØªØ®Ø·ÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù‚Ø¯Ø©]',
        status: 'failed',
        error: 'Ø§Ù„ÙˆÙƒÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯',
        iteration,
      });
      // Ù„Ø§ Ù†ÙˆÙ‚Ù Ø§Ù„ØªÙ†ÙÙŠØ° â€” Ù†Ù…Ø±Ø± Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø®Ø·Ø£ Ù„Ù„Ø¹Ù‚Ø¯ Ø§Ù„ØªØ§Ù„ÙŠØ©
      state.activeNodes.delete(nodeId);
      onUpdate({ ...state });
      return;
    }

    // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª Ù…Ù† Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    const predecessors = getPredecessors(nodeId, edges);

    // Ù„Ù„ØªÙƒØ±Ø§Ø± > 0: Ø§Ù„Ø¨Ø­Ø« Ø£ÙŠØ¶Ø§Ù‹ ÙÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (Ø§Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚)
    const effectivePredecessors = predecessors.map((pid) => {
      if (iteration != null && iteration > 0) {
        const prevIterKey = `${pid}__iter${iteration - 1}`;
        if (state.results.has(prevIterKey)) return prevIterKey;
        const currentIterKey = `${pid}__iter${iteration}`;
        if (state.results.has(currentIterKey)) return currentIterKey;
      }
      return pid;
    });

    const nodeInput = buildNodeInput(effectivePredecessors, state.results, agents, nodes, initialInput, iteration);

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°
    state.activeNodes.add(nodeId);
    state.results.set(resultKey, {
      nodeId,
      agentId: node.agentId,
      agentName: agent.name,
      input: nodeInput,
      output: '',
      status: 'running',
      startTime: new Date().toISOString(),
      level: level.level,
      iteration,
    });
    onUpdate({ ...state });

    try {
      const result = await callAgentAI(agent, nodeInput);
      state.results.set(resultKey, {
        ...state.results.get(resultKey)!,
        output: result.output,
        tokens: result.tokens,
        status: 'completed',
        endTime: new Date().toISOString(),
        duration: Date.now() - new Date(state.results.get(resultKey)!.startTime!).getTime(),
      });
    } catch (err) {
      const errorMsg = err instanceof Error ? err.message : 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
      // Ù…Ø±ÙˆÙ†Ø©: Ù†Ø¶Ø¹ Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø®Ø·Ø£ ÙƒÙ…Ø®Ø±Ø¬ Ø­ØªÙ‰ Ù„Ø§ ÙŠØªÙˆÙ‚Ù Ø§Ù„Ù†Ø¸Ø§Ù…
      state.results.set(resultKey, {
        ...state.results.get(resultKey)!,
        output: `âš ï¸ [Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆÙƒÙŠÙ„ "${agent.name}"]: ${errorMsg}\nâ€” ØªÙ… ØªÙ…Ø±ÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ø¹Ù‚Ø¯Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.`,
        status: 'failed',
        error: errorMsg,
        endTime: new Date().toISOString(),
        duration: Date.now() - new Date(state.results.get(resultKey)!.startTime!).getTime(),
      });
    }

    state.activeNodes.delete(nodeId);
    onUpdate({ ...state });
  });

  await Promise.all(promises);
}

/** ØªÙ†ÙÙŠØ° Pipeline ÙƒØ§Ù…Ù„ â€” Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„Ø¯ÙˆØ±Ø§Øª */
export async function executePipeline(
  nodes: DAGNode[],
  edges: DAGEdge[],
  agents: Map<string, AgentInfo>,
  initialInput: string,
  onUpdate: ExecutionCallback,
  loopConfig?: LoopConfig,
): Promise<ExecutionState> {
  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ DAG Ù†Ø¸ÙŠÙ
  const cleanEdges = loopConfig
    ? removeBackEdges(edges, loopConfig.backEdgeIds)
    : edges;

  // ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¯ÙˆØ±Ø§Øª ÙÙŠ DAG Ø§Ù„Ù†Ø¸ÙŠÙ
  if (hasCycle(nodes, cleanEdges)) {
    throw new Error('Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ø§ ÙŠØ²Ø§Ù„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¯ÙˆØ±Ø© Ø­ØªÙ‰ Ø¨Ø¹Ø¯ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ù„ÙÙŠØ©!');
  }

  const iterations = loopConfig?.iterations || 1;
  const levels = topologicalLevels(nodes, cleanEdges);

  const state: ExecutionState = {
    status: 'running',
    currentLevel: 0,
    totalLevels: levels.length * iterations,
    results: new Map(),
    activeNodes: new Set(),
    startTime: new Date().toISOString(),
    loopInfo: iterations > 1 ? { currentIteration: 0, totalIterations: iterations } : undefined,
  };

  // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  nodes.forEach((n) => {
    const agent = agents.get(n.agentId);
    state.results.set(n.id, {
      nodeId: n.id,
      agentId: n.agentId,
      agentName: agent?.name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
      input: '',
      output: '',
      status: 'pending',
    });
  });

  onUpdate({ ...state });

  try {
    for (let iter = 0; iter < iterations; iter++) {
      if (state.loopInfo) {
        state.loopInfo.currentIteration = iter;
      }

      for (const level of levels) {
        await executeLevel(level, nodes, cleanEdges, agents, state, initialInput, onUpdate, iterations > 1 ? iter : undefined);
        state.currentLevel = level.level + iter * levels.length;
      }
    }

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
    const lastLevel = levels[levels.length - 1];
    if (lastLevel) {
      const lastIter = iterations > 1 ? iterations - 1 : undefined;
      const finalParts = lastLevel.nodeIds
        .map((nid) => {
          const key = lastIter != null ? `${nid}__iter${lastIter}` : nid;
          const r = state.results.get(key);
          if (!r?.output) return '';
          const prefix = r.status === 'failed' ? `[âš ï¸ ${r.agentName} â€” ÙØ´Ù„]` : `[${r.agentName}]`;
          return `${prefix}: ${r.output}`;
        })
        .filter(Boolean);
      state.finalOutput = finalParts.join('\n\n---\n\n');
    }

    state.status = 'completed';
    state.endTime = new Date().toISOString();
  } catch (err) {
    state.status = 'failed';
    state.endTime = new Date().toISOString();
  }

  onUpdate({ ...state });
  return state;
}
</file>

<file path="agent-orchestrator-hub/src/lib/utils.ts">
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="agent-orchestrator-hub/src/main.tsx">
import { createRoot } from "react-dom/client";
import App from "./App.tsx";
import "./index.css";

createRoot(document.getElementById("root")!).render(<App />);
</file>

<file path="agent-orchestrator-hub/src/pages/AgentsPage.tsx">
import { useState } from 'react';
import { PageHeader } from '@/components/PageHeader';
import { useAgentStore } from '@/store/agentStore';
import { AgentCard } from '@/components/AgentCard';
import { AgentFormDialog } from '@/components/AgentFormDialog';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Plus, Search } from 'lucide-react';
import { motion } from 'framer-motion';
import type { Agent } from '@/types';

export default function AgentsPage() {
  const { agents } = useAgentStore();
  const [search, setSearch] = useState('');
  const [formOpen, setFormOpen] = useState(false);
  const [editingAgent, setEditingAgent] = useState<Agent | undefined>();

  const filtered = agents.filter(
    (a) =>
      a.name.includes(search) ||
      a.description?.includes(search) ||
      a.modelProvider.includes(search)
  );

  const handleEdit = (agent: Agent) => {
    setEditingAgent(agent);
    setFormOpen(true);
  };

  return (
    <div className="p-4 md:p-6 lg:p-8 max-w-7xl pt-14 md:pt-6 lg:pt-8">
      <PageHeader
        title="Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡"
        description="Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠØ©"
        actions={
          <Button onClick={() => { setEditingAgent(undefined); setFormOpen(true); }} className="gap-2">
            <Plus className="w-4 h-4" />
            ÙˆÙƒÙŠÙ„ Ø¬Ø¯ÙŠØ¯
          </Button>
        }
      />

      {/* Search */}
      <div className="relative mb-6 max-w-md">
        <Search className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground" />
        <Input
          placeholder="Ø¨Ø­Ø« Ø¹Ù† ÙˆÙƒÙŠÙ„..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="pr-10 bg-card border-border"
        />
      </div>

      {/* Grid */}
      <motion.div
        initial="hidden"
        animate="show"
        variants={{ show: { transition: { staggerChildren: 0.06 } } }}
        className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
      >
        {filtered.map((agent) => (
          <AgentCard key={agent.id} agent={agent} onEdit={handleEdit} />
        ))}
      </motion.div>

      {filtered.length === 0 && (
        <div className="text-center py-20 text-muted-foreground">
          <p className="text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆÙƒÙ„Ø§Ø¡</p>
          <p className="text-sm mt-1">Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙƒÙŠÙ„ Ø¬Ø¯ÙŠØ¯</p>
        </div>
      )}

      <AgentFormDialog
        open={formOpen}
        onOpenChange={setFormOpen}
        editAgent={editingAgent}
      />
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/pages/ApiDocsPage.tsx">
import { PageHeader } from '@/components/PageHeader';
import { motion } from 'framer-motion';
import { Code, Send, Bot, GitBranch, Scale, MessageCircle, Key, Copy, ExternalLink } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { toast } from 'sonner';
import { Link } from 'react-router-dom';

interface EndpointDoc {
  method: 'POST' | 'GET' | 'DELETE';
  path: string;
  title: string;
  description: string;
  icon: React.ElementType;
  color: string;
  headers: { key: string; value: string; required?: boolean }[];
  body?: string;
  response?: string;
}

const BASE_URL = 'https://your-domain.com/api/v1';

const endpoints: EndpointDoc[] = [
  {
    method: 'POST',
    path: '/chat',
    title: 'Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ø­Ø§Ø¯Ø«Ø©',
    description: 'Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ù„ÙˆÙƒÙŠÙ„ Ù…Ø­Ø¯Ø¯ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø±Ø¯ AI.',
    icon: Send,
    color: 'text-primary',
    headers: [
      { key: 'Authorization', value: 'Bearer wkp_xxxxx', required: true },
      { key: 'Content-Type', value: 'application/json', required: true },
    ],
    body: JSON.stringify({
      agentId: 'agent-uuid',
      message: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ',
      apiKey: 'sk-your-provider-api-key',
      conversationId: 'optional-conv-id',
    }, null, 2),
    response: JSON.stringify({
      success: true,
      data: {
        id: 'msg-uuid',
        role: 'assistant',
        content: 'Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‡Ùˆ...',
        tokens: { prompt: 45, completion: 120, total: 165 },
        duration: 1.2,
      },
    }, null, 2),
  },
  {
    method: 'POST',
    path: '/compare',
    title: 'Ù…Ù‚Ø§Ø±Ù†Ø© ÙˆÙƒÙ„Ø§Ø¡',
    description: 'Ø£Ø±Ø³Ù„ Ù†ÙØ³ Ø§Ù„Ø·Ù„Ø¨ Ù„Ø¹Ø¯Ø© ÙˆÙƒÙ„Ø§Ø¡ ÙˆÙ‚Ø§Ø±Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬.',
    icon: Scale,
    color: 'text-accent',
    headers: [
      { key: 'Authorization', value: 'Bearer wkp_xxxxx', required: true },
      { key: 'Content-Type', value: 'application/json', required: true },
    ],
    body: JSON.stringify({
      agentIds: ['agent-1', 'agent-2', 'agent-3'],
      prompt: 'Ø§Ø´Ø±Ø­ Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª',
      apiKeys: {
        googleai: 'AIzaSy...',
        openai: 'sk-...',
      },
    }, null, 2),
    response: JSON.stringify({
      success: true,
      data: {
        results: [
          { agentId: 'agent-1', response: '...', duration: 0.8, tokens: 200 },
          { agentId: 'agent-2', response: '...', duration: 1.2, tokens: 300 },
        ],
      },
    }, null, 2),
  },
  {
    method: 'POST',
    path: '/pipeline/execute',
    title: 'ØªÙ†ÙÙŠØ° Pipeline',
    description: 'Ø´ØºÙ‘Ù„ pipeline Ù…Ø­Ø¯Ø¯ Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙˆÙ„ÙŠ.',
    icon: GitBranch,
    color: 'text-chart-3',
    headers: [
      { key: 'Authorization', value: 'Bearer wkp_xxxxx', required: true },
      { key: 'Content-Type', value: 'application/json', required: true },
    ],
    body: JSON.stringify({
      pipelineId: 'pipeline-uuid',
      input: 'Ø­Ù„Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù†Øµ...',
      apiKeys: {
        googleai: 'AIzaSy...',
        openai: 'sk-...',
      },
    }, null, 2),
    response: JSON.stringify({
      success: true,
      data: {
        executionId: 'exec-uuid',
        status: 'completed',
        result: 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©...',
        trace: [
          { nodeId: 'n1', agentName: 'Ø§Ù„Ù…Ø­Ù„Ù„', duration: 1.5, tokens: 250 },
          { nodeId: 'n2', agentName: 'Ø§Ù„Ù…Ù„Ø®Øµ', duration: 0.9, tokens: 150 },
        ],
      },
    }, null, 2),
  },
  {
    method: 'GET',
    path: '/agents',
    title: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡',
    description: 'Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†.',
    icon: Bot,
    color: 'text-chart-4',
    headers: [
      { key: 'Authorization', value: 'Bearer wkp_xxxxx', required: true },
    ],
    response: JSON.stringify({
      success: true,
      data: {
        agents: [
          { id: 'agent-1', name: 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯', provider: 'googleai', model: 'gemini-2.5-flash' },
        ],
      },
    }, null, 2),
  },
  {
    method: 'POST',
    path: '/dialogue',
    title: 'Ø¨Ø¯Ø¡ Ø­ÙˆØ§Ø± Ø¢Ù„ÙŠ',
    description: 'Ø´ØºÙ‘Ù„ Ø­ÙˆØ§Ø± Ø¢Ù„ÙŠ Ø¨ÙŠÙ† ÙˆÙƒÙŠÙ„ÙŠÙ† Ù…Ø¹ Ø¹Ø¯Ø¯ Ø¬ÙˆÙ„Ø§Øª Ù…Ø­Ø¯Ø¯.',
    icon: MessageCircle,
    color: 'text-primary',
    headers: [
      { key: 'Authorization', value: 'Bearer wkp_xxxxx', required: true },
      { key: 'Content-Type', value: 'application/json', required: true },
    ],
    body: JSON.stringify({
      agent1Id: 'agent-1',
      agent2Id: 'agent-2',
      initialMessage: 'Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ù…Ø³ØªÙ‚Ø¨Ù„ AIØŸ',
      maxTurns: 5,
      apiKeys: {
        googleai: 'AIzaSy...',
      },
    }, null, 2),
    response: JSON.stringify({
      success: true,
      data: {
        dialogueId: 'dlg-uuid',
        messages: [
          { agent: 'Ø§Ù„ÙˆÙƒÙŠÙ„ Ù¡', content: '...' },
          { agent: 'Ø§Ù„ÙˆÙƒÙŠÙ„ Ù¢', content: '...' },
        ],
        totalTurns: 5,
      },
    }, null, 2),
  },
];

const copyCode = (code: string) => {
  navigator.clipboard.writeText(code);
  toast.success('ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯');
};

export default function ApiDocsPage() {
  return (
    <div className="p-6 lg:p-8 max-w-5xl">
      <PageHeader
        title="ØªÙˆØ«ÙŠÙ‚ API"
        description="Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª"
        actions={
          <Link to="/settings">
            <Button variant="outline" className="gap-1.5">
              <Key className="w-4 h-4" /> Ø¥Ù†Ø´Ø§Ø¡ ØªÙˆÙƒÙ†
            </Button>
          </Link>
        }
      />

      {/* Ù…Ù‚Ø¯Ù…Ø© */}
      <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} className="glass-card p-6 mb-6">
        <h2 className="text-lg font-bold text-foreground mb-3">ğŸš€ Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹</h2>
        <div className="space-y-3 text-sm text-muted-foreground">
          <p>Ø§Ø³ØªØ®Ø¯Ù… API ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³ Ù„Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠØ© Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹. ÙƒÙ„ Ø·Ù„Ø¨ ÙŠØªØ·Ù„Ø¨:</p>
          <ol className="list-decimal list-inside space-y-1.5 mr-4">
            <li><strong className="text-foreground">ØªÙˆÙƒÙ† API</strong> â€” Ø£Ù†Ø´Ø¦Ù‡ Ù…Ù† <Link to="/settings" className="text-primary underline">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â†’ ØªÙˆÙƒÙ†Ø§Øª API</Link></li>
            <li><strong className="text-foreground">Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø²ÙˆØ¯</strong> â€” Ø£Ø±Ø³Ù„ <code className="bg-secondary px-1.5 py-0.5 rounded text-xs">apiKey</code> Ø£Ùˆ <code className="bg-secondary px-1.5 py-0.5 rounded text-xs">apiKeys</code> ÙÙŠ body ÙƒÙ„ Ø·Ù„Ø¨</li>
          </ol>
        </div>

        <div className="mt-4">
          <p className="text-xs text-muted-foreground mb-2">Base URL:</p>
          <div className="flex gap-2 items-center">
            <code className="flex-1 text-sm font-mono bg-background p-3 rounded-lg border border-border">{BASE_URL}</code>
            <Button size="icon" variant="outline" onClick={() => copyCode(BASE_URL)}>
              <Copy className="w-4 h-4" />
            </Button>
          </div>
        </div>

        <div className="mt-4 p-3 rounded-lg bg-chart-4/5 border border-chart-4/20">
          <p className="text-xs text-chart-4">
            âš ï¸ <strong>Ù…Ù‡Ù…:</strong> Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… APIØŒ ÙŠØ¬Ø¨ Ø¥Ø±Ø³Ø§Ù„ Ù…ÙØªØ§Ø­ API Ø§Ù„Ø®Ø§Øµ Ø¨Ù…Ø²ÙˆØ¯ AI (Ù…Ø«Ù„ OpenAI Ø£Ùˆ Gemini) Ù…Ø¹ ÙƒÙ„ Ø·Ù„Ø¨.
            Ø£Ù…Ø§ Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ ÙØªÙØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.
          </p>
        </div>
      </motion.div>

      {/* Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© */}
      <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.05 }} className="glass-card p-6 mb-6">
        <h2 className="text-lg font-bold text-foreground mb-3">ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</h2>
        <p className="text-sm text-muted-foreground mb-3">Ø£Ø¶Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ header ÙƒÙ„ Ø·Ù„Ø¨:</p>
        <CodeBlock code={`curl -X POST ${BASE_URL}/chat \\
  -H "Authorization: Bearer wkp_xxxxx" \\
  -H "Content-Type: application/json" \\
  -d '{
    "agentId": "agent-uuid",
    "message": "Ù…Ø±Ø­Ø¨Ø§Ù‹",
    "apiKey": "sk-your-openai-key"
  }'`} />
      </motion.div>

      {/* Endpoints */}
      <div className="space-y-6">
        {endpoints.map((ep, i) => (
          <motion.div
            key={ep.path}
            initial={{ opacity: 0, y: 10 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.1 + i * 0.05 }}
            className="glass-card p-6"
          >
            <div className="flex items-center gap-3 mb-4">
              <div className={`w-10 h-10 rounded-xl bg-secondary flex items-center justify-center`}>
                <ep.icon className={`w-5 h-5 ${ep.color}`} />
              </div>
              <div className="flex-1">
                <div className="flex items-center gap-2 mb-0.5">
                  <span className={`px-2 py-0.5 rounded text-[10px] font-bold ${
                    ep.method === 'POST' ? 'bg-primary/15 text-primary' :
                    ep.method === 'GET' ? 'bg-chart-3/15 text-chart-3' :
                    'bg-destructive/15 text-destructive'
                  }`}>{ep.method}</span>
                  <code className="text-sm font-mono text-foreground">{ep.path}</code>
                </div>
                <p className="text-xs text-muted-foreground">{ep.description}</p>
              </div>
            </div>

            <h4 className="text-xs font-semibold text-foreground mb-2">Headers</h4>
            <div className="mb-4 space-y-1">
              {ep.headers.map(h => (
                <div key={h.key} className="flex gap-2 text-xs font-mono">
                  <span className="text-primary">{h.key}:</span>
                  <span className="text-muted-foreground">{h.value}</span>
                  {h.required && <span className="text-destructive">*</span>}
                </div>
              ))}
            </div>

            {ep.body && (
              <>
                <h4 className="text-xs font-semibold text-foreground mb-2">Request Body</h4>
                <CodeBlock code={ep.body} className="mb-4" />
              </>
            )}

            {ep.response && (
              <>
                <h4 className="text-xs font-semibold text-foreground mb-2">Response</h4>
                <CodeBlock code={ep.response} />
              </>
            )}
          </motion.div>
        ))}
      </div>

      {/* Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø®Ø·Ø£ */}
      <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }} className="glass-card p-6 mt-6">
        <h2 className="text-lg font-bold text-foreground mb-4">âš¡ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</h2>
        <div className="space-y-2">
          {[
            { code: 200, desc: 'Ù†Ø¬Ø§Ø­ â€” Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ØªÙ…Øª Ø¨Ù†Ø¬Ø§Ø­', color: 'text-primary' },
            { code: 400, desc: 'Ø·Ù„Ø¨ ØºÙŠØ± ØµØ§Ù„Ø­ â€” ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©', color: 'text-chart-4' },
            { code: 401, desc: 'ØºÙŠØ± Ù…ØµØ±Ø­ â€” Ø§Ù„ØªÙˆÙƒÙ† ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ù…ÙÙ‚ÙˆØ¯', color: 'text-destructive' },
            { code: 403, desc: 'Ù…Ø­Ø¸ÙˆØ± â€” Ø§Ù„ØªÙˆÙƒÙ† Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', color: 'text-destructive' },
            { code: 404, desc: 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ â€” Ø§Ù„ÙˆÙƒÙŠÙ„ Ø£Ùˆ Pipeline ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', color: 'text-chart-4' },
            { code: 429, desc: 'ÙƒØ«Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª â€” ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­', color: 'text-accent' },
            { code: 500, desc: 'Ø®Ø·Ø£ Ø®Ø§Ø¯Ù… â€” Ø­Ø¯Ø« Ø®Ø·Ø£ Ø¯Ø§Ø®Ù„ÙŠ', color: 'text-destructive' },
          ].map(item => (
            <div key={item.code} className="flex items-center gap-3 py-2 border-b border-border/30 last:border-0">
              <span className={`font-mono font-bold text-sm ${item.color}`}>{item.code}</span>
              <span className="text-sm text-muted-foreground">{item.desc}</span>
            </div>
          ))}
        </div>
      </motion.div>

      {/* SDK Ù…Ø«Ø§Ù„ */}
      <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.55 }} className="glass-card p-6 mt-6">
        <h2 className="text-lg font-bold text-foreground mb-3">ğŸ“¦ Ù…Ø«Ø§Ù„ JavaScript/TypeScript</h2>
        <CodeBlock code={`const WAKIL_API = '${BASE_URL}';
const TOKEN = 'wkp_xxxxx';

async function chat(agentId, message, apiKey) {
  const res = await fetch(\`\${WAKIL_API}/chat\`, {
    method: 'POST',
    headers: {
      'Authorization': \`Bearer \${TOKEN}\`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ agentId, message, apiKey }),
  });
  return res.json();
}

// Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
const result = await chat(
  'agent-uuid',
  'Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ØŸ',
  'sk-your-openai-key'
);
console.log(result.data.content);`} />
      </motion.div>

      {/* Python Ù…Ø«Ø§Ù„ */}
      <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }} className="glass-card p-6 mt-6 mb-8">
        <h2 className="text-lg font-bold text-foreground mb-3">ğŸ Ù…Ø«Ø§Ù„ Python</h2>
        <CodeBlock code={`import requests

WAKIL_API = '${BASE_URL}'
TOKEN = 'wkp_xxxxx'

def chat(agent_id, message, api_key):
    res = requests.post(
        f'{WAKIL_API}/chat',
        headers={
            'Authorization': f'Bearer {TOKEN}',
            'Content-Type': 'application/json',
        },
        json={
            'agentId': agent_id,
            'message': message,
            'apiKey': api_key,
        }
    )
    return res.json()

# Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
result = chat('agent-uuid', 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ØŸ', 'sk-your-openai-key')
print(result['data']['content'])`} />
      </motion.div>
    </div>
  );
}

function CodeBlock({ code, className = '' }: { code: string; className?: string }) {
  return (
    <div className={`relative group ${className}`}>
      <pre className="bg-background border border-border rounded-xl p-4 overflow-x-auto text-xs font-mono text-foreground/80 leading-relaxed">
        <code>{code}</code>
      </pre>
      <Button
        size="icon"
        variant="ghost"
        className="absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity h-7 w-7"
        onClick={() => { navigator.clipboard.writeText(code); toast.success('ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯'); }}
      >
        <Copy className="w-3.5 h-3.5" />
      </Button>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/pages/ChatPage.tsx">
import { useState, useRef, useEffect } from 'react';
import { useAgentStore } from '@/store/agentStore';
import { useApiKeyStore } from '@/store/apiKeyStore';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Send, Bot, User, AlertTriangle } from 'lucide-react';
import { AI_PROVIDERS } from '@/types';
import { motion, AnimatePresence } from 'framer-motion';
import { useSearchParams } from 'react-router-dom';
import ReactMarkdown from 'react-markdown';
import { sendMessage, type AIMessage } from '@/lib/aiService';
import { toast } from 'sonner';

interface LocalMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
}

export default function ChatPage() {
  const { agents } = useAgentStore();
  const { getActualKey } = useApiKeyStore();
  const [searchParams] = useSearchParams();
  const [selectedAgentId, setSelectedAgentId] = useState(searchParams.get('agent') || agents[0]?.id || '');
  const [messages, setMessages] = useState<LocalMessage[]>([]);
  const [input, setInput] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const scrollRef = useRef<HTMLDivElement>(null);

  const agent = agents.find((a) => a.id === selectedAgentId);
  const provider = agent ? AI_PROVIDERS.find((p) => p.id === agent.modelProvider) : null;
  const hasKey = agent?.apiKeyId ? !!getActualKey(agent.apiKeyId) : false;

  useEffect(() => {
    scrollRef.current?.scrollTo({ top: scrollRef.current.scrollHeight, behavior: 'smooth' });
  }, [messages]);

  const handleSend = async () => {
    if (!input.trim() || !agent) return;
    const userMsg: LocalMessage = { id: crypto.randomUUID(), role: 'user', content: input.trim() };
    setMessages((prev) => [...prev, userMsg]);
    setInput('');
    setIsLoading(true);

    const apiKey = agent.apiKeyId ? getActualKey(agent.apiKeyId) : undefined;

    if (!apiKey) {
      const response: LocalMessage = {
        id: crypto.randomUUID(),
        role: 'assistant',
        content: `âš ï¸ **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ API Ù„Ù‡Ø°Ø§ Ø§Ù„ÙˆÙƒÙŠÙ„.**\n\nØ§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â†’ Ù…ÙØ§ØªÙŠØ­ API** ÙˆØ£Ø¶Ù Ù…ÙØªØ§Ø­Ø§Ù‹ Ù„Ù€ ${provider?.name || agent.modelProvider}ØŒ Ø«Ù… Ø¹Ø¯Ù‘Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙˆÙƒÙŠÙ„ ÙˆØ§Ø®ØªØ± Ø§Ù„Ù…ÙØªØ§Ø­.`,
      };
      setMessages((prev) => [...prev, response]);
      setIsLoading(false);
      return;
    }

    try {
      // Ø¨Ù†Ø§Ø¡ Ø³ÙŠØ§Ù‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© (Ø¢Ø®Ø± 20 Ø±Ø³Ø§Ù„Ø©)
      const contextMessages: AIMessage[] = messages.slice(-20).map((m) => ({
        role: m.role,
        content: m.content,
      }));
      contextMessages.push({ role: 'user', content: userMsg.content });

      const result = await sendMessage(
        agent.modelProvider,
        agent.modelId,
        apiKey,
        agent.systemPrompt,
        contextMessages
      );

      const response: LocalMessage = {
        id: crypto.randomUUID(),
        role: 'assistant',
        content: result.content,
      };
      setMessages((prev) => [...prev, response]);
    } catch (err) {
      const errorMsg = err instanceof Error ? err.message : 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
      toast.error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ AI');
      const response: LocalMessage = {
        id: crypto.randomUUID(),
        role: 'assistant',
        content: `âŒ **Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:**\n\n\`${errorMsg}\``,
      };
      setMessages((prev) => [...prev, response]);
    } finally {
      setIsLoading(false);
    }
  };

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSend();
    }
  };

  return (
    <div className="flex flex-col h-screen">
      {/* Header */}
      <div className="p-3 md:p-4 lg:p-6 border-b border-border pr-14 md:pr-4">
        <div className="flex items-center gap-2 md:gap-4 max-w-4xl flex-wrap">
          <Select value={selectedAgentId} onValueChange={(v) => { setSelectedAgentId(v); setMessages([]); }}>
            <SelectTrigger className="w-44 md:w-64 bg-card border-border text-xs md:text-sm h-8 md:h-9">
              <SelectValue placeholder="Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„Ø§Ù‹" />
            </SelectTrigger>
            <SelectContent>
              {agents.map((a) => {
                const p = AI_PROVIDERS.find((pr) => pr.id === a.modelProvider);
                return (
                  <SelectItem key={a.id} value={a.id}>
                    {p?.icon} {a.name}
                  </SelectItem>
                );
              })}
            </SelectContent>
          </Select>
          {agent && (
            <div className="flex items-center gap-2 text-xs md:text-sm text-muted-foreground">
              <span className="hidden sm:inline">{provider?.name} Â· {agent.modelId}</span>
              {!hasKey && (
                <span className="flex items-center gap-1 text-[10px] text-chart-4 bg-chart-4/10 px-2 py-0.5 rounded-full">
                  <AlertTriangle className="w-2.5 h-2.5" /> Ø¨Ø¯ÙˆÙ† Ù…ÙØªØ§Ø­
                </span>
              )}
            </div>
          )}
        </div>
      </div>

      {/* Messages */}
      <ScrollArea ref={scrollRef} className="flex-1 p-3 md:p-4 lg:p-6">
        <div className="max-w-3xl mx-auto space-y-4">
          {messages.length === 0 && (
            <div className="text-center py-20">
              <div className="w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-4">
                <Bot className="w-8 h-8 text-primary" />
              </div>
              <h3 className="text-lg font-semibold text-foreground mb-2">
                {agent ? `Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ ${agent.name}` : 'Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡'}
              </h3>
              <p className="text-sm text-muted-foreground">Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„</p>
              {agent && !hasKey && (
                <p className="text-xs text-chart-4 mt-2">
                  âš ï¸ Ù‡Ø°Ø§ Ø§Ù„ÙˆÙƒÙŠÙ„ Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ù…ÙØªØ§Ø­ API â€” Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ£Ø¶Ù Ù…ÙØªØ§Ø­Ø§Ù‹ Ø«Ù… Ø¹Ø¯Ù‘Ù„ Ø§Ù„ÙˆÙƒÙŠÙ„
                </p>
              )}
            </div>
          )}

          <AnimatePresence>
            {messages.map((msg) => (
              <motion.div
                key={msg.id}
                initial={{ opacity: 0, y: 10 }}
                animate={{ opacity: 1, y: 0 }}
                className={`flex gap-3 ${msg.role === 'user' ? 'flex-row-reverse' : ''}`}
              >
                <div className={`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${msg.role === 'user' ? 'bg-accent/15' : 'bg-primary/15'
                  }`}>
                  {msg.role === 'user' ? (
                    <User className="w-4 h-4 text-accent" />
                  ) : (
                    <Bot className="w-4 h-4 text-primary" />
                  )}
                </div>
                <div className={`max-w-[85%] md:max-w-[80%] rounded-2xl px-3 md:px-4 py-2 md:py-3 text-xs md:text-sm ${msg.role === 'user'
                  ? 'bg-accent/15 text-foreground rounded-tr-sm'
                  : 'bg-card border border-border text-foreground rounded-tl-sm'
                  }`}>
                  <div className="prose prose-invert prose-sm max-w-none [&>p]:m-0 [&>blockquote]:border-primary/30">
                    <ReactMarkdown>{msg.content}</ReactMarkdown>
                  </div>
                </div>
              </motion.div>
            ))}
          </AnimatePresence>

          {isLoading && (
            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="flex gap-3">
              <div className="w-8 h-8 rounded-lg bg-primary/15 flex items-center justify-center">
                <Bot className="w-4 h-4 text-primary" />
              </div>
              <div className="bg-card border border-border rounded-2xl rounded-tl-sm px-4 py-3">
                <div className="flex gap-1">
                  <span className="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style={{ animationDelay: '0ms' }} />
                  <span className="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style={{ animationDelay: '150ms' }} />
                  <span className="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style={{ animationDelay: '300ms' }} />
                </div>
              </div>
            </motion.div>
          )}
        </div>
      </ScrollArea>

      {/* Input */}
      <div className="p-3 md:p-4 lg:p-6 border-t border-border">
        <div className="max-w-3xl mx-auto flex gap-2">
          <Textarea
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onKeyDown={handleKeyDown}
            placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..."
            rows={1}
            className="bg-card border-border resize-none min-h-[44px] max-h-32"
          />
          <Button
            onClick={handleSend}
            disabled={!input.trim() || isLoading || !agent}
            size="icon"
            className="shrink-0 h-11 w-11"
          >
            <Send className="w-4 h-4" />
          </Button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/pages/ComparePage.tsx">
import { useState } from 'react';
import { PageHeader } from '@/components/PageHeader';
import { useAgentStore } from '@/store/agentStore';
import { useApiKeyStore } from '@/store/apiKeyStore';
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { Checkbox } from '@/components/ui/checkbox';
import { ScrollArea } from '@/components/ui/scroll-area';
import { AI_PROVIDERS } from '@/types';
import { Send, Bot, Clock, Coins, AlertTriangle } from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';
import { toast } from 'sonner';
import ReactMarkdown from 'react-markdown';
import { sendMessage } from '@/lib/aiService';

interface CompareResult {
  agentId: string;
  agentName: string;
  provider: string;
  response: string;
  duration: number;
  tokens: number;
  error?: string;
}

export default function ComparePage() {
  const { agents } = useAgentStore();
  const { getActualKey } = useApiKeyStore();
  const [selectedIds, setSelectedIds] = useState<string[]>([]);
  const [prompt, setPrompt] = useState('');
  const [results, setResults] = useState<CompareResult[]>([]);
  const [isLoading, setIsLoading] = useState(false);

  const toggleAgent = (id: string) => {
    setSelectedIds((prev) =>
      prev.includes(id) ? prev.filter((i) => i !== id) : prev.length < 5 ? [...prev, id] : prev
    );
  };

  const handleCompare = async () => {
    if (selectedIds.length < 2) {
      toast.error('Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
      return;
    }
    if (!prompt.trim()) {
      toast.error('Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£ÙˆÙ„Ø§Ù‹');
      return;
    }

    setIsLoading(true);
    setResults([]);

    const promises = selectedIds.map(async (id) => {
      const agent = agents.find((a) => a.id === id)!;
      const providerInfo = AI_PROVIDERS.find((p) => p.id === agent.modelProvider);
      const apiKey = agent.apiKeyId ? getActualKey(agent.apiKeyId) : undefined;

      const startTime = performance.now();

      if (!apiKey) {
        return {
          agentId: id,
          agentName: agent.name,
          provider: providerInfo?.name || '',
          response: 'âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ API Ù„Ù‡Ø°Ø§ Ø§Ù„ÙˆÙƒÙŠÙ„. Ø¹Ø¯Ù‘Ù„ Ø§Ù„ÙˆÙƒÙŠÙ„ ÙˆØ­Ø¯Ø¯ Ù…ÙØªØ§Ø­Ø§Ù‹.',
          duration: 0,
          tokens: 0,
          error: 'no-key',
        };
      }

      try {
        const result = await sendMessage(
          agent.modelProvider,
          agent.modelId,
          apiKey,
          agent.systemPrompt,
          [{ role: 'user', content: prompt }]
        );
        const duration = (performance.now() - startTime) / 1000;
        return {
          agentId: id,
          agentName: agent.name,
          provider: providerInfo?.name || '',
          response: result.content,
          duration,
          tokens: result.tokens?.total || 0,
        };
      } catch (err) {
        return {
          agentId: id,
          agentName: agent.name,
          provider: providerInfo?.name || '',
          response: `âŒ Ø®Ø·Ø£: ${err instanceof Error ? err.message : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}`,
          duration: (performance.now() - startTime) / 1000,
          tokens: 0,
          error: 'api-error',
        };
      }
    });

    const allResults = await Promise.all(promises);
    setResults(allResults);
    setIsLoading(false);
  };

  return (
    <div className="p-4 md:p-6 lg:p-8 max-w-7xl pt-14 md:pt-6 lg:pt-8">
      <PageHeader title="Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡" description="Ø£Ø±Ø³Ù„ Ù†ÙØ³ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ø¹Ø¯Ø© ÙˆÙƒÙ„Ø§Ø¡ ÙˆÙ‚Ø§Ø±Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬" />

      {/* Agent Selection */}
      <div className="glass-card p-5 mb-6">
        <p className="text-sm font-semibold text-foreground mb-3">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ (2-5)</p>
        <div className="flex flex-wrap gap-3">
          {agents.map((agent) => {
            const p = AI_PROVIDERS.find((pr) => pr.id === agent.modelProvider);
            const checked = selectedIds.includes(agent.id);
            const noKey = !agent.apiKeyId || !getActualKey(agent.apiKeyId);
            return (
              <label
                key={agent.id}
                className={`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-all border ${checked ? 'border-primary bg-primary/10' : 'border-border bg-secondary/50 hover:bg-secondary'
                  }`}
              >
                <Checkbox checked={checked} onCheckedChange={() => toggleAgent(agent.id)} />
                <span className="text-lg">{p?.icon}</span>
                <span className="text-sm text-foreground">{agent.name}</span>
                {noKey && <AlertTriangle className="w-3 h-3 text-chart-4" />}
              </label>
            );
          })}
        </div>
      </div>

      {/* Prompt */}
      <div className="glass-card p-5 mb-6">
        <Textarea
          value={prompt}
          onChange={(e) => setPrompt(e.target.value)}
          placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..."
          rows={3}
          className="bg-secondary border-border resize-none mb-3"
        />
        <Button onClick={handleCompare} disabled={isLoading} className="gap-2">
          <Send className="w-4 h-4" />
          {isLoading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©...' : 'Ù‚Ø§Ø±Ù†'}
        </Button>
      </div>

      {/* Results */}
      <AnimatePresence>
        {results.length > 0 && (
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
          >
            {results.map((r, i) => (
              <motion.div
                key={r.agentId}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: i * 0.1 }}
                className="glass-card p-5"
              >
                <div className="flex items-center gap-2 mb-3 pb-3 border-b border-border/50">
                  <Bot className="w-5 h-5 text-primary" />
                  <span className="font-semibold text-foreground text-sm">{r.agentName}</span>
                  <span className="text-xs text-muted-foreground mr-auto">{r.provider}</span>
                </div>
                <ScrollArea className="h-40 mb-3">
                  <div className="prose prose-invert prose-sm max-w-none text-sm"><ReactMarkdown>{r.response}</ReactMarkdown></div>
                </ScrollArea>
                <div className="flex gap-4 text-xs text-muted-foreground pt-3 border-t border-border/50">
                  <span className="flex items-center gap-1">
                    <Clock className="w-3 h-3" /> {r.duration.toFixed(1)}s
                  </span>
                  <span className="flex items-center gap-1">
                    <Coins className="w-3 h-3" /> {r.tokens} tokens
                  </span>
                </div>
              </motion.div>
            ))}
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/pages/DialoguePage.tsx">
import { useState, useRef, useEffect } from 'react';
import { PageHeader } from '@/components/PageHeader';
import { useAgentStore } from '@/store/agentStore';
import { useApiKeyStore } from '@/store/apiKeyStore';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Slider } from '@/components/ui/slider';
import { Play, Pause, RotateCcw, Bot, Download } from 'lucide-react';
import { AI_PROVIDERS } from '@/types';
import { motion, AnimatePresence } from 'framer-motion';
import { toast } from 'sonner';
import ReactMarkdown from 'react-markdown';
import { sendMessage, type AIMessage } from '@/lib/aiService';

interface DialogueMessage {
  id: string;
  agentId: string;
  agentName: string;
  agentIcon: string;
  content: string;
  timestamp: string;
}

export default function DialoguePage() {
  const { agents } = useAgentStore();
  const { getActualKey } = useApiKeyStore();
  const [agent1Id, setAgent1Id] = useState(agents[0]?.id || '');
  const [agent2Id, setAgent2Id] = useState(agents[1]?.id || '');
  const [initialMessage, setInitialMessage] = useState('');
  const [maxTurns, setMaxTurns] = useState(5);
  const [messages, setMessages] = useState<DialogueMessage[]>([]);
  const [isRunning, setIsRunning] = useState(false);
  const [isPaused, setIsPaused] = useState(false);
  const [currentTurn, setCurrentTurn] = useState(0);
  const scrollRef = useRef<HTMLDivElement>(null);
  const abortRef = useRef(false);
  const pauseRef = useRef(false);

  useEffect(() => {
    scrollRef.current?.scrollTo({ top: scrollRef.current.scrollHeight, behavior: 'smooth' });
  }, [messages]);

  const getAgentInfo = (id: string) => {
    const agent = agents.find((a) => a.id === id);
    const provider = agent ? AI_PROVIDERS.find((p) => p.id === agent.modelProvider) : null;
    return { agent, provider };
  };

  const callAgent = async (
    agentId: string,
    conversationHistory: AIMessage[]
  ): Promise<string> => {
    const agent = agents.find((a) => a.id === agentId);
    if (!agent) throw new Error('Ø§Ù„ÙˆÙƒÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

    const apiKey = agent.apiKeyId ? getActualKey(agent.apiKeyId) : undefined;

    if (!apiKey) {
      return `âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙØªØ§Ø­ API Ù„Ù€ ${agent.name}. ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…ÙØªØ§Ø­ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.`;
    }

    try {
      const result = await sendMessage(
        agent.modelProvider,
        agent.modelId,
        apiKey,
        agent.systemPrompt + '\n\nØ£Ù†Øª ÙÙŠ Ø­ÙˆØ§Ø± Ù…Ø¹ ÙˆÙƒÙŠÙ„ Ø¢Ø®Ø±. Ø£ÙƒÙ…Ù„ Ø§Ù„Ø­ÙˆØ§Ø± Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙ…ÙÙŠØ¯.',
        conversationHistory
      );
      return result.content;
    } catch (err) {
      return `âŒ Ø®Ø·Ø£: ${err instanceof Error ? err.message : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}`;
    }
  };

  const startDialogue = async () => {
    if (!agent1Id || !agent2Id) {
      toast.error('Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„ÙŠÙ†');
      return;
    }
    if (agent1Id === agent2Id) {
      toast.error('Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„ÙŠÙ† Ù…Ø®ØªÙ„ÙÙŠÙ†');
      return;
    }
    if (!initialMessage.trim()) {
      toast.error('Ø£Ø¯Ø®Ù„ Ø±Ø³Ø§Ù„Ø© Ø£ÙˆÙ„ÙŠØ©');
      return;
    }

    setIsRunning(true);
    setIsPaused(false);
    abortRef.current = false;
    pauseRef.current = false;
    setMessages([]);
    setCurrentTurn(0);

    const { agent: a1, provider: p1 } = getAgentInfo(agent1Id);
    const { agent: a2, provider: p2 } = getAgentInfo(agent2Id);
    if (!a1 || !a2) return;

    // ØªØªØ¨Ø¹ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù„ÙƒÙ„ ÙˆÙƒÙŠÙ„
    const agent1History: AIMessage[] = [];
    const agent2History: AIMessage[] = [];
    let lastMessage = initialMessage;

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    const initMsg: DialogueMessage = {
      id: crypto.randomUUID(),
      agentId: 'system',
      agentName: 'Ø§Ù„Ù†Ø¸Ø§Ù…',
      agentIcon: 'ğŸ¯',
      content: `**Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©:** ${initialMessage}`,
      timestamp: new Date().toISOString(),
    };
    setMessages([initMsg]);

    for (let turn = 0; turn < maxTurns; turn++) {
      if (abortRef.current) break;

      while (pauseRef.current) {
        await new Promise((r) => setTimeout(r, 200));
        if (abortRef.current) break;
      }
      if (abortRef.current) break;

      setCurrentTurn(turn + 1);

      // Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ ÙŠØªØ­Ø¯Ø«
      agent1History.push({ role: 'user', content: lastMessage });
      const response1 = await callAgent(agent1Id, agent1History);
      agent1History.push({ role: 'assistant', content: response1 });

      const msg1: DialogueMessage = {
        id: crypto.randomUUID(),
        agentId: agent1Id,
        agentName: a1.name,
        agentIcon: p1?.icon || 'ğŸ¤–',
        content: response1,
        timestamp: new Date().toISOString(),
      };
      setMessages((prev) => [...prev, msg1]);
      lastMessage = response1;

      if (abortRef.current) break;
      while (pauseRef.current) {
        await new Promise((r) => setTimeout(r, 200));
        if (abortRef.current) break;
      }
      if (abortRef.current) break;

      // Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙŠØ±Ø¯
      agent2History.push({ role: 'user', content: lastMessage });
      const response2 = await callAgent(agent2Id, agent2History);
      agent2History.push({ role: 'assistant', content: response2 });

      const msg2: DialogueMessage = {
        id: crypto.randomUUID(),
        agentId: agent2Id,
        agentName: a2.name,
        agentIcon: p2?.icon || 'ğŸ¤–',
        content: response2,
        timestamp: new Date().toISOString(),
      };
      setMessages((prev) => [...prev, msg2]);
      lastMessage = response2;
    }

    setIsRunning(false);
    if (!abortRef.current) toast.success('Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø­ÙˆØ§Ø±!');
  };

  const togglePause = () => {
    pauseRef.current = !pauseRef.current;
    setIsPaused(!isPaused);
  };

  const stopDialogue = () => {
    abortRef.current = true;
    setIsRunning(false);
    setIsPaused(false);
  };

  const exportDialogue = () => {
    const md = messages.map((m) => `### ${m.agentName}\n${m.content}\n`).join('\n---\n\n');
    const blob = new Blob([md], { type: 'text/markdown' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `dialogue-${Date.now()}.md`;
    a.click();
    URL.revokeObjectURL(url);
    toast.success('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø­ÙˆØ§Ø±');
  };

  return (
    <div className="flex flex-col h-screen">
      {/* Header */}
      <div className="p-3 md:p-4 lg:p-6 border-b border-border pt-14 md:pt-4 lg:pt-6">
        <PageHeader title="Ø§Ù„Ø­ÙˆØ§Ø± Ø§Ù„Ø¢Ù„ÙŠ" description="Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„ÙŠÙ† ÙˆØ¯Ø¹Ù‡Ù…Ø§ ÙŠØªØ­Ø§ÙˆØ±Ø§Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹" />

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mt-4">
          <Select value={agent1Id} onValueChange={setAgent1Id}>
            <SelectTrigger className="bg-card border-border">
              <SelectValue placeholder="Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„" />
            </SelectTrigger>
            <SelectContent>
              {agents.map((a) => {
                const p = AI_PROVIDERS.find((pr) => pr.id === a.modelProvider);
                return <SelectItem key={a.id} value={a.id}>{p?.icon} {a.name}</SelectItem>;
              })}
            </SelectContent>
          </Select>

          <Select value={agent2Id} onValueChange={setAgent2Id}>
            <SelectTrigger className="bg-card border-border">
              <SelectValue placeholder="Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ" />
            </SelectTrigger>
            <SelectContent>
              {agents.map((a) => {
                const p = AI_PROVIDERS.find((pr) => pr.id === a.modelProvider);
                return <SelectItem key={a.id} value={a.id}>{p?.icon} {a.name}</SelectItem>;
              })}
            </SelectContent>
          </Select>

          <div className="flex items-center gap-2">
            <span className="text-xs text-muted-foreground shrink-0">Ø§Ù„Ø¬ÙˆÙ„Ø§Øª: {maxTurns}</span>
            <Slider value={[maxTurns]} onValueChange={(v) => setMaxTurns(v[0])} min={1} max={20} step={1} />
          </div>

          <div className="flex gap-2">
            {!isRunning ? (
              <Button onClick={startDialogue} className="gap-1.5 flex-1">
                <Play className="w-4 h-4" /> Ø¨Ø¯Ø¡
              </Button>
            ) : (
              <>
                <Button variant="outline" onClick={togglePause} className="gap-1.5 flex-1">
                  {isPaused ? <Play className="w-4 h-4" /> : <Pause className="w-4 h-4" />}
                  {isPaused ? 'Ø§Ø³ØªØ¦Ù†Ø§Ù' : 'Ø¥ÙŠÙ‚Ø§Ù'}
                </Button>
                <Button variant="destructive" onClick={stopDialogue} size="icon">
                  <RotateCcw className="w-4 h-4" />
                </Button>
              </>
            )}
            {messages.length > 0 && (
              <Button variant="outline" size="icon" onClick={exportDialogue}>
                <Download className="w-4 h-4" />
              </Button>
            )}
          </div>
        </div>

        <Input
          value={initialMessage}
          onChange={(e) => setInitialMessage(e.target.value)}
          placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø§Ù„ØªÙŠ Ø³ØªØ¨Ø¯Ø£ Ø§Ù„Ø­ÙˆØ§Ø±..."
          className="mt-3 bg-card border-border"
          disabled={isRunning}
        />

        {isRunning && (
          <div className="mt-2 text-xs text-chart-4">
            âš¡ Ø§Ù„Ø¬ÙˆÙ„Ø© {currentTurn} Ù…Ù† {maxTurns}
          </div>
        )}
      </div>

      {/* Messages */}
      <ScrollArea ref={scrollRef} className="flex-1 p-4 lg:p-6">
        <div className="max-w-3xl mx-auto space-y-4">
          {messages.length === 0 && !isRunning && (
            <div className="text-center py-20">
              <div className="w-16 h-16 rounded-2xl bg-accent/10 flex items-center justify-center mx-auto mb-4">
                <Bot className="w-8 h-8 text-accent" />
              </div>
              <h3 className="text-lg font-semibold text-foreground mb-2">Ø§Ù„Ø­ÙˆØ§Ø± Ø§Ù„Ø¢Ù„ÙŠ Ø¨ÙŠÙ† ÙˆÙƒÙŠÙ„ÙŠÙ†</h3>
              <p className="text-sm text-muted-foreground">Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„ÙŠÙ†ØŒ Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø£ÙˆÙ„ÙŠØ©ØŒ ÙˆØ´Ø§Ù‡Ø¯ Ø§Ù„Ø­ÙˆØ§Ø± ÙŠØªØ¯ÙÙ‚</p>
            </div>
          )}

          <AnimatePresence>
            {messages.map((msg) => {
              const isAgent1 = msg.agentId === agent1Id;
              const isSystem = msg.agentId === 'system';
              return (
                <motion.div
                  key={msg.id}
                  initial={{ opacity: 0, y: 10, scale: 0.98 }}
                  animate={{ opacity: 1, y: 0, scale: 1 }}
                  className={`flex gap-3 ${isAgent1 ? 'flex-row-reverse' : ''}`}
                >
                  <div className={`w-9 h-9 rounded-xl flex items-center justify-center shrink-0 text-sm ${isSystem ? 'bg-chart-3/15' : isAgent1 ? 'bg-accent/15' : 'bg-primary/15'
                    }`}>
                    {msg.agentIcon}
                  </div>
                  <div className={`max-w-[80%] rounded-2xl px-4 py-3 ${isSystem ? 'bg-chart-3/10 border border-chart-3/20' :
                    isAgent1 ? 'bg-accent/10 border border-accent/20 rounded-tr-sm' :
                      'bg-primary/10 border border-primary/20 rounded-tl-sm'
                    }`}>
                    <p className={`text-[10px] font-semibold mb-1 ${isSystem ? 'text-chart-3' : isAgent1 ? 'text-accent' : 'text-primary'
                      }`}>{msg.agentName}</p>
                    <div className="prose prose-invert prose-sm max-w-none [&>p]:m-0 text-sm text-foreground">
                      <ReactMarkdown>{msg.content}</ReactMarkdown>
                    </div>
                  </div>
                </motion.div>
              );
            })}
          </AnimatePresence>

          {isRunning && !isPaused && (
            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="flex gap-3">
              <div className="w-9 h-9 rounded-xl bg-chart-4/15 flex items-center justify-center">
                <Bot className="w-4 h-4 text-chart-4 animate-pulse" />
              </div>
              <div className="bg-card border border-border rounded-2xl rounded-tl-sm px-4 py-3">
                <div className="flex gap-1">
                  <span className="w-2 h-2 bg-chart-4 rounded-full animate-bounce" style={{ animationDelay: '0ms' }} />
                  <span className="w-2 h-2 bg-chart-4 rounded-full animate-bounce" style={{ animationDelay: '150ms' }} />
                  <span className="w-2 h-2 bg-chart-4 rounded-full animate-bounce" style={{ animationDelay: '300ms' }} />
                </div>
              </div>
            </motion.div>
          )}
        </div>
      </ScrollArea>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/pages/Index.tsx">
import { PageHeader } from '@/components/PageHeader';
import { useAgentStore } from '@/store/agentStore';
import { Bot, MessageSquare, GitBranch, Zap, TrendingUp, Activity } from 'lucide-react';
import { motion } from 'framer-motion';
import { AI_PROVIDERS } from '@/types';
import { Link } from 'react-router-dom';

const container = {
  hidden: {},
  show: { transition: { staggerChildren: 0.08 } },
};
const item = {
  hidden: { opacity: 0, y: 16 },
  show: { opacity: 1, y: 0 },
};

export default function Dashboard() {
  const { agents, pipelines, conversations } = useAgentStore();

  const stats = [
    { label: 'Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡', value: agents.length, icon: Bot, color: 'text-primary', bg: 'bg-primary/10' },
    { label: 'Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª', value: conversations.length, icon: MessageSquare, color: 'text-accent', bg: 'bg-accent/10' },
    { label: 'Pipelines', value: pipelines.length, icon: GitBranch, color: 'text-chart-3', bg: 'bg-chart-3/10' },
    { label: 'Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ°', value: 0, icon: Activity, color: 'text-chart-4', bg: 'bg-chart-4/10' },
  ];

  return (
    <div className="p-4 md:p-6 lg:p-8 max-w-7xl pt-14 md:pt-6 lg:pt-8">
      <PageHeader title="Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…" description="Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ù…Ù†ØµØ© ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³" />

      {/* Stats */}
      <motion.div
        variants={container}
        initial="hidden"
        animate="show"
        className="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-6 md:mb-8"
      >
        {stats.map((s) => (
          <motion.div key={s.label} variants={item} className="glass-card p-3 md:p-5">
            <div className="flex items-center justify-between mb-3">
              <div className={`w-8 md:w-10 h-8 md:h-10 rounded-xl ${s.bg} flex items-center justify-center`}>
                <s.icon className={`w-5 h-5 ${s.color}`} />
              </div>
              <TrendingUp className="w-4 h-4 text-muted-foreground" />
            </div>
            <p className="text-xl md:text-2xl font-bold text-foreground">{s.value}</p>
            <p className="text-sm text-muted-foreground">{s.label}</p>
          </motion.div>
        ))}
      </motion.div>

      {/* Quick actions */}
      <motion.div variants={container} initial="hidden" animate="show" className="mb-8">
        <h2 className="text-lg font-semibold text-foreground mb-4">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <motion.div variants={item}>
            <Link to="/agents" className="glass-card p-5 flex items-center gap-4 group hover:border-primary/30 transition-colors block">
              <div className="w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center group-hover:glow-primary transition-shadow">
                <Bot className="w-6 h-6 text-primary" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙƒÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h3>
                <p className="text-sm text-muted-foreground">Ø£Ø¶Ù ÙˆÙƒÙŠÙ„ Ø°ÙƒÙŠ Ø¨Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø®ØµØµØ©</p>
              </div>
            </Link>
          </motion.div>
          <motion.div variants={item}>
            <Link to="/chat" className="glass-card p-5 flex items-center gap-4 group hover:border-accent/30 transition-colors block">
              <div className="w-12 h-12 rounded-xl bg-accent/10 flex items-center justify-center group-hover:glow-accent transition-shadow">
                <MessageSquare className="w-6 h-6 text-accent" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø©</h3>
                <p className="text-sm text-muted-foreground">ØªØ­Ø¯Ø« Ù…Ø¹ Ø£Ø­Ø¯ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡</p>
              </div>
            </Link>
          </motion.div>
          <motion.div variants={item}>
            <Link to="/pipeline" className="glass-card p-5 flex items-center gap-4 group hover:border-chart-3/30 transition-colors block">
              <div className="w-12 h-12 rounded-xl bg-chart-3/10 flex items-center justify-center">
                <GitBranch className="w-6 h-6 text-chart-3" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Ø¥Ù†Ø´Ø§Ø¡ Pipeline</h3>
                <p className="text-sm text-muted-foreground">ØµÙ…Ù… Ø³Ù„Ø³Ù„Ø© Ø¹Ù…Ù„ Ø¨ØµØ±ÙŠØ§Ù‹</p>
              </div>
            </Link>
          </motion.div>
        </div>
      </motion.div>

      {/* Recent Agents */}
      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.3 }}>
        <h2 className="text-lg font-semibold text-foreground mb-4">Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {agents.slice(0, 3).map((agent) => {
            const provider = AI_PROVIDERS.find((p) => p.id === agent.modelProvider);
            return (
              <div key={agent.id} className="glass-card p-5">
                <div className="flex items-center gap-3 mb-3">
                  <div className="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-lg">
                    {provider?.icon || 'ğŸ¤–'}
                  </div>
                  <div>
                    <h3 className="font-semibold text-foreground text-sm">{agent.name}</h3>
                    <p className="text-xs text-muted-foreground">{provider?.name}</p>
                  </div>
                </div>
                <p className="text-xs text-muted-foreground line-clamp-2">{agent.description}</p>
              </div>
            );
          })}
        </div>
      </motion.div>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/pages/NotFound.tsx">
import { useLocation } from "react-router-dom";
import { useEffect } from "react";

const NotFound = () => {
  const location = useLocation();

  useEffect(() => {
    console.error("404 Error: User attempted to access non-existent route:", location.pathname);
  }, [location.pathname]);

  return (
    <div className="flex min-h-screen items-center justify-center bg-muted">
      <div className="text-center">
        <h1 className="mb-4 text-4xl font-bold">404</h1>
        <p className="mb-4 text-xl text-muted-foreground">Oops! Page not found</p>
        <a href="/" className="text-primary underline hover:text-primary/90">
          Return to Home
        </a>
      </div>
    </div>
  );
};

export default NotFound;
</file>

<file path="agent-orchestrator-hub/src/pages/PipelinePage.tsx">
import { useCallback, useState, useMemo } from 'react';
import {
  ReactFlow,
  addEdge,
  useNodesState,
  useEdgesState,
  Controls,
  MiniMap,
  Background,
  BackgroundVariant,
  type Connection,
  type Node,
  type Edge,
  Panel,
} from '@xyflow/react';
import '@xyflow/react/dist/style.css';
import { useAgentStore } from '@/store/agentStore';
import { useApiKeyStore } from '@/store/apiKeyStore';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from '@/components/ui/dialog';
import { Plus, Play, Save, Trash2, Bot, AlertTriangle, FileText, RotateCw, Languages, ChevronDown, ChevronUp } from 'lucide-react';
import { AI_PROVIDERS, type Pipeline } from '@/types';
import { toast } from 'sonner';
import { hasCycle, detectCycles, type CycleInfo } from '@/lib/engine/dag-resolver';
import { executePipeline, type ExecutionState, type NodeResult, type LoopConfig } from '@/lib/engine/pipeline-executor';
import AgentNode from '@/components/pipeline/AgentNode';
import CustomEdge from '@/components/pipeline/CustomEdge';
import { ExecutionPanel } from '@/components/pipeline/ExecutionPanel';
import { useI18nStore } from '@/store/i18nStore';

const nodeTypes = { agentNode: AgentNode };
const edgeTypes = { custom: CustomEdge };

export default function PipelinePage() {
  const { agents, pipelines, addPipeline, updatePipeline, deletePipeline } = useAgentStore();
  const { t, locale, toggleLocale, dir } = useI18nStore();
  const { getActualKey } = useApiKeyStore();
  const [nodes, setNodes, onNodesChange] = useNodesState([]);
  const [edges, setEdges, onEdgesChange] = useEdgesState([]);
  const [pipelineInput, setPipelineInput] = useState('');
  const [pipelineName, setPipelineName] = useState('');
  const [currentPipelineId, setCurrentPipelineId] = useState<string | null>(null);
  const [executionState, setExecutionState] = useState<ExecutionState>({
    status: 'idle',
    currentLevel: 0,
    totalLevels: 0,
    results: new Map(),
    activeNodes: new Set(),
  });
  const [selectedEdgeCondition, setSelectedEdgeCondition] = useState<string>('always');

  // ==== Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª (loops) ====
  const [cycleDialogOpen, setCycleDialogOpen] = useState(false);
  const [detectedCycle, setDetectedCycle] = useState<CycleInfo | null>(null);
  const [loopIterations, setLoopIterations] = useState<number>(3);
  const [agentsPanelOpen, setAgentsPanelOpen] = useState(true);
  const [savedPanelOpen, setSavedPanelOpen] = useState(false);

  // ØªØ­Ø¯ÙŠØ¯ Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø¯ÙˆØ±Ø©
  const dagNodes = useMemo(() => nodes.map((n) => ({ id: n.id, agentId: (n.data as any).agentId || '' })), [nodes]);
  const dagEdges = useMemo(() => edges.map((e) => ({
    id: e.id,
    source: e.source,
    target: e.target,
    condition: { type: ((e.data as any)?.condition || 'always') as any },
  })), [edges]);
  const hasGraphCycle = useMemo(() => dagNodes.length > 0 && hasCycle(dagNodes, dagEdges), [dagNodes, dagEdges]);

  // ÙƒØ´Ù ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±Ø©
  const cycleInfo = useMemo(() => {
    if (!hasGraphCycle) return null;
    return detectCycles(dagNodes, dagEdges);
  }, [hasGraphCycle, dagNodes, dagEdges]);

  // Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ø¯ÙˆØ±Ø©
  const loopEdgeCount = cycleInfo?.backEdges.length || 0;

  const onConnect = useCallback(
    (params: Connection) => {
      const newEdge = {
        ...params,
        type: 'custom',
        animated: true,
        data: { condition: selectedEdgeCondition },
      };
      setEdges((eds) => addEdge(newEdge, eds));
    },
    [setEdges, selectedEdgeCondition]
  );

  const addNode = (agentId: string) => {
    const agent = agents.find((a) => a.id === agentId);
    if (!agent) return;
    const provider = AI_PROVIDERS.find((p) => p.id === agent.modelProvider);
    const newNode: Node = {
      id: `node-${Date.now()}`,
      type: 'agentNode',
      position: { x: 300 + Math.random() * 100, y: 80 + nodes.length * 140 },
      data: {
        label: agent.name,
        provider: provider?.name || '',
        icon: provider?.icon || 'ğŸ¤–',
        agentId: agent.id,
        status: 'pending',
      },
    };
    setNodes((nds) => [...nds, newNode]);
  };

  // ======= Ø­ÙØ¸ Pipeline =======
  const handleSave = () => {
    const name = pipelineName.trim() || `Pipeline ${new Date().toLocaleString('ar')}`;
    const pipelineData = {
      name,
      description: `${nodes.length} Ø¹Ù‚Ø¯Ø© Â· ${edges.length} Ø±Ø§Ø¨Ø·`,
      nodes: nodes.map((n) => ({
        id: n.id,
        agentId: (n.data as any).agentId,
        position: n.position,
        config: { label: (n.data as any).label, provider: (n.data as any).provider, icon: (n.data as any).icon },
      })),
      edges: edges.map((e) => ({
        id: e.id,
        source: e.source,
        target: e.target,
        condition: { type: ((e.data as any)?.condition || 'always') as 'always' | 'on_success' | 'on_error' | 'conditional' },
      })),
    };

    if (currentPipelineId) {
      updatePipeline(currentPipelineId, pipelineData);
      toast.success(t('toast.updated') + ' "' + name + '"');
    } else {
      const saved = addPipeline(pipelineData);
      setCurrentPipelineId(saved.id);
      toast.success(t('toast.saved') + ' "' + name + '"');
    }
  };

  // ======= ØªØ­Ù…ÙŠÙ„ Pipeline =======
  const handleLoad = (pipeline: Pipeline) => {
    setCurrentPipelineId(pipeline.id);
    setPipelineName(pipeline.name);

    const loadedNodes: Node[] = pipeline.nodes.map((n) => ({
      id: n.id,
      type: 'agentNode',
      position: n.position || { x: 300, y: 100 },
      data: {
        label: n.config?.label || agents.find((a) => a.id === n.agentId)?.name || 'ÙˆÙƒÙŠÙ„',
        provider: n.config?.provider || '',
        icon: n.config?.icon || 'ğŸ¤–',
        agentId: n.agentId,
        status: 'pending',
      },
    }));

    const loadedEdges: Edge[] = pipeline.edges.map((e) => ({
      id: e.id,
      source: e.source,
      target: e.target,
      type: 'custom',
      animated: true,
      data: { condition: e.condition?.type || 'always' },
    }));

    setNodes(loadedNodes);
    setEdges(loadedEdges);
    setExecutionState({ status: 'idle', currentLevel: 0, totalLevels: 0, results: new Map(), activeNodes: new Set() });
    toast.success(t('toast.loaded') + ' "' + pipeline.name + '"');
  };

  // ======= Ø­Ø°Ù Pipeline =======
  const handleDelete = (pipelineId: string) => {
    deletePipeline(pipelineId);
    if (currentPipelineId === pipelineId) {
      setCurrentPipelineId(null);
      setPipelineName('');
    }
    toast.success(t('toast.deleted'));
  };

  // ======= ØªØ´ØºÙŠÙ„ =======
  const handleRun = async (loopConfig?: LoopConfig) => {
    if (nodes.length === 0) {
      toast.error(t('toast.addNodesFirst'));
      return;
    }
    if (!pipelineInput.trim()) {
      toast.error(t('toast.addInputFirst'));
      return;
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±Ø§Øª
    if (hasGraphCycle && !loopConfig) {
      // ÙØªØ­ dialog Ù„ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
      setDetectedCycle(cycleInfo);
      setCycleDialogOpen(true);
      return;
    }

    // Ø¨Ù†Ø§Ø¡ Ø®Ø±ÙŠØ·Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡
    const agentMap = new Map(
      agents.map((a) => [a.id, {
        id: a.id,
        name: a.name,
        systemPrompt: a.systemPrompt,
        modelProvider: a.modelProvider,
        modelId: a.modelId,
        apiKey: a.apiKeyId ? getActualKey(a.apiKeyId) : undefined,
      }])
    );

    const dagNodesForExec = nodes.map((n) => ({ id: n.id, agentId: (n.data as any).agentId }));
    const dagEdgesForExec = edges.map((e) => ({
      id: e.id,
      source: e.source,
      target: e.target,
      condition: { type: ((e.data as any)?.condition || 'always') as any },
    }));

    toast.info(t('toast.pipelineStarted'));

    try {
      await executePipeline(dagNodesForExec, dagEdgesForExec, agentMap, pipelineInput, (state) => {
        setExecutionState({ ...state, results: new Map(state.results) });

        // ØªØ­Ø¯ÙŠØ« Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¹Ù‚Ø¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
        setNodes((nds) =>
          nds.map((n) => {
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¢Ø®Ø± Ù†ØªÙŠØ¬Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù‚Ø¯Ø© (Ù‚Ø¯ ØªÙƒÙˆÙ† ÙÙŠ ØªÙƒØ±Ø§Ø±)
            let result = state.results.get(n.id);
            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
            for (const [key, val] of state.results) {
              if (key.startsWith(n.id + '__iter')) {
                result = val;
              }
            }
            if (result) {
              return { ...n, data: { ...n.data, status: result.status } };
            }
            return n;
          })
        );
      }, loopConfig);
      toast.success(t('toast.pipelineSuccess'));
    } catch (err) {
      toast.error(t('toast.pipelineFailed'));
    }
  };

  // ======= Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆØ±Ø© =======
  const handleLoopConfirm = () => {
    if (!detectedCycle) return;

    const backEdgeIds = detectedCycle.backEdges.map((e) => e.id);

    // ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø£Ù†Ù‡Ø§ loops
    setEdges((eds) =>
      eds.map((e) => {
        if (backEdgeIds.includes(e.id)) {
          return { ...e, data: { ...e.data, isLoop: true, loopCount: loopIterations } };
        }
        return e;
      })
    );

    setCycleDialogOpen(false);

    // ØªØ´ØºÙŠÙ„ Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯ÙˆØ±Ø©
    handleRun({ backEdgeIds, iterations: loopIterations });
  };

  const handleLoopCancel = () => {
    // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø©: Ø­Ø°Ù Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ù„ÙÙŠØ©
    if (detectedCycle) {
      const backEdgeIds = detectedCycle.backEdges.map((e) => e.id);
      setEdges((eds) => eds.filter((e) => !backEdgeIds.includes(e.id)));
      toast.info(t('toast.loopRemoved'));
    }
    setCycleDialogOpen(false);
  };

  const clearAll = () => {
    setNodes([]);
    setEdges([]);
    setCurrentPipelineId(null);
    setPipelineName('');
    setExecutionState({ status: 'idle', currentLevel: 0, totalLevels: 0, results: new Map(), activeNodes: new Set() });
    toast.info(t('toast.cleared'));
  };

  return (
    <div className="flex flex-col h-screen" dir={dir()}>
      {/* Header */}
      <div className="p-3 md:p-4 lg:p-6 border-b border-border flex items-center justify-between flex-wrap gap-2 md:gap-3 pr-14 md:pr-4">
        <div className="flex items-center gap-2 md:gap-3 min-w-0">
          <div className="min-w-0">
            <h1 className="text-base md:text-xl font-bold text-foreground truncate">{t('pipeline.title')}</h1>
            <p className="text-xs md:text-sm text-muted-foreground hidden sm:block">{t('pipeline.subtitle')}</p>
          </div>
          <Input
            value={pipelineName}
            onChange={(e) => setPipelineName(e.target.value)}
            placeholder={t('pipeline.name')}
            className="w-28 md:w-40 h-7 md:h-8 text-xs md:text-sm bg-card border-border"
          />
        </div>
        <div className="flex gap-1.5 md:gap-2 items-center flex-wrap">
          {/* Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© */}
          <Button variant="ghost" size="sm" onClick={toggleLocale} className="gap-1 text-xs h-7 md:h-8 px-2">
            <Languages className="w-3 md:w-3.5 h-3 md:h-3.5" /> <span className="hidden sm:inline">{t('app.language')}</span>
          </Button>
          {hasGraphCycle && (
            <span className="flex items-center gap-1 text-[10px] md:text-xs text-amber-400 bg-amber-400/10 px-1.5 md:px-2 py-0.5 md:py-1 rounded-lg cursor-pointer"
              onClick={() => { setDetectedCycle(cycleInfo); setCycleDialogOpen(true); }}
            >
              <RotateCw className="w-3 h-3" /> {t('loop.badge')} ({loopEdgeCount})
            </span>
          )}
          <Select value={selectedEdgeCondition} onValueChange={setSelectedEdgeCondition}>
            <SelectTrigger className="w-24 md:w-32 h-7 md:h-9 text-[10px] md:text-xs bg-card border-border">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="always">{t('edge.always')}</SelectItem>
              <SelectItem value="on_success">{t('edge.onSuccess')}</SelectItem>
              <SelectItem value="on_error">{t('edge.onError')}</SelectItem>
              <SelectItem value="conditional">{t('edge.conditional')}</SelectItem>
            </SelectContent>
          </Select>
          <Button variant="outline" size="sm" onClick={clearAll} className="gap-1 h-7 md:h-8 px-2 md:px-3 text-xs">
            <Trash2 className="w-3 md:w-3.5 h-3 md:h-3.5" /> <span className="hidden sm:inline">{t('pipeline.clear')}</span>
          </Button>
          <Button variant="outline" size="sm" onClick={() => handleRun()} className="gap-1 h-7 md:h-8 px-2 md:px-3 text-xs" disabled={executionState.status === 'running'}>
            <Play className="w-3 md:w-3.5 h-3 md:h-3.5" /> <span className="hidden sm:inline">{t('pipeline.run')}</span>
          </Button>
          <Button size="sm" onClick={handleSave} className="gap-1 h-7 md:h-8 px-2 md:px-3 text-xs" disabled={nodes.length === 0}>
            <Save className="w-3 md:w-3.5 h-3 md:h-3.5" /> <span className="hidden sm:inline">{t('pipeline.save')}</span>
          </Button>
        </div>
      </div>

      {/* Input bar */}
      <div className="px-4 lg:px-6 py-2 border-b border-border bg-card/50">
        <div className="flex gap-2 items-center">
          <span className="text-xs text-muted-foreground shrink-0">{t('pipeline.input')}</span>
          <Input
            value={pipelineInput}
            onChange={(e) => setPipelineInput(e.target.value)}
            placeholder={t('pipeline.inputPlaceholder')}
            className="text-sm h-8 bg-background border-border"
          />
        </div>
      </div>

      {/* Canvas */}
      <div className="flex-1 relative" dir="ltr">
        <ReactFlow
          nodes={nodes}
          edges={edges}
          onNodesChange={onNodesChange}
          onEdgesChange={onEdgesChange}
          onConnect={onConnect}
          nodeTypes={nodeTypes}
          edgeTypes={edgeTypes}
          defaultEdgeOptions={{ type: 'custom' }}
          fitView
          style={{ background: 'hsl(0, 0%, 4%)' }}
        >
          <Background variant={BackgroundVariant.Dots} gap={20} size={1} color="hsl(0, 0%, 12%)" />
          <Controls
            style={{ background: 'hsl(0, 0%, 7%)', border: '1px solid hsl(0, 0%, 14%)', borderRadius: '8px' }}
          />
          <MiniMap
            className="hidden md:block"
            style={{ background: 'hsl(0, 0%, 7%)', border: '1px solid hsl(0, 0%, 14%)' }}
            nodeColor={(n) => {
              const status = (n.data as any)?.status;
              if (status === 'running') return 'hsl(45, 90%, 55%)';
              if (status === 'completed') return 'hsl(110, 100%, 33%)';
              if (status === 'failed') return 'hsl(0, 72%, 51%)';
              return 'hsl(0, 0%, 30%)';
            }}
            maskColor="hsl(0, 0%, 4%, 0.8)"
          />

          {/* Ù„ÙˆØ­Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ â€” Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·ÙŠ + scroll */}
          <Panel position="top-right">
            <div className="glass-card w-44 md:w-56" dir={dir()}>
              <button
                onClick={() => setAgentsPanelOpen(!agentsPanelOpen)}
                className="w-full flex items-center justify-between p-2.5 md:p-3 text-xs font-semibold text-muted-foreground hover:text-foreground transition-colors"
              >
                <span>{t('pipeline.agentsPanel')} ({agents.length})</span>
                {agentsPanelOpen ? <ChevronUp className="w-3.5 h-3.5" /> : <ChevronDown className="w-3.5 h-3.5" />}
              </button>
              {agentsPanelOpen && (
                <div className="px-2.5 md:px-3 pb-2.5 md:pb-3 space-y-1.5 max-h-52 md:max-h-72 overflow-y-auto">
                  {agents.map((agent) => {
                    const p = AI_PROVIDERS.find((pr) => pr.id === agent.modelProvider);
                    return (
                      <button
                        key={agent.id}
                        onClick={() => addNode(agent.id)}
                        className="w-full flex items-center gap-2 px-2.5 md:px-3 py-1.5 md:py-2 rounded-lg bg-secondary/50 hover:bg-secondary text-xs md:text-sm text-foreground transition-colors text-right"
                      >
                        <span className="text-sm md:text-base">{p?.icon}</span>
                        <span className="truncate">{agent.name}</span>
                      </button>
                    );
                  })}
                  {agents.length === 0 && (
                    <p className="text-[10px] md:text-xs text-muted-foreground text-center py-3">{t('pipeline.noAgents')}</p>
                  )}
                </div>
              )}
            </div>
          </Panel>

          {/* Ù„ÙˆØ­Ø© Pipelines Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© â€” Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·ÙŠ */}
          {pipelines.length > 0 && (
            <Panel position="bottom-right">
              <div className="glass-card w-44 md:w-56" dir={dir()}>
                <button
                  onClick={() => setSavedPanelOpen(!savedPanelOpen)}
                  className="w-full flex items-center justify-between p-2.5 md:p-3 text-xs font-semibold text-muted-foreground hover:text-foreground transition-colors"
                >
                  <span>{t('pipeline.savedPanel')} ({pipelines.length})</span>
                  {savedPanelOpen ? <ChevronUp className="w-3.5 h-3.5" /> : <ChevronDown className="w-3.5 h-3.5" />}
                </button>
                {savedPanelOpen && (
                  <div className="px-2.5 md:px-3 pb-2.5 md:pb-3 space-y-1 max-h-40 md:max-h-48 overflow-y-auto">
                    {pipelines.map((p) => (
                      <div
                        key={p.id}
                        className={`flex items-center gap-2 px-2.5 md:px-3 py-1.5 md:py-2 rounded-lg text-xs md:text-sm transition-colors cursor-pointer ${currentPipelineId === p.id ? 'bg-primary/15 text-primary border border-primary/30' : 'bg-secondary/50 hover:bg-secondary text-foreground'
                          }`}
                      >
                        <FileText className="w-3 md:w-3.5 h-3 md:h-3.5 shrink-0" />
                        <span className="truncate flex-1" onClick={() => handleLoad(p)}>{p.name}</span>
                        <button
                          onClick={(e) => { e.stopPropagation(); handleDelete(p.id); }}
                          className="text-destructive hover:text-destructive/80 shrink-0"
                        >
                          <Trash2 className="w-3 h-3" />
                        </button>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </Panel>
          )}

        </ReactFlow>

        {/* Ù„ÙˆØ­Ø© Ø§Ù„ØªÙ†ÙÙŠØ° â€” Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨ */}
        {executionState.status !== 'idle' && (
          <ExecutionPanel
            status={executionState.status}
            currentLevel={executionState.currentLevel}
            totalLevels={executionState.totalLevels}
            results={executionState.results}
            finalOutput={executionState.finalOutput}
          />
        )}

        {nodes.length === 0 && (
          <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
            <div className="text-center">
              <div className="w-16 h-16 rounded-2xl bg-chart-3/10 flex items-center justify-center mx-auto mb-4">
                <Bot className="w-8 h-8 text-chart-3" />
              </div>
              <h3 className="text-lg font-semibold text-foreground mb-2">{t('pipeline.emptyTitle')}</h3>
              <p className="text-sm text-muted-foreground">{t('pipeline.emptyDesc')}</p>
              <p className="text-xs text-muted-foreground mt-1">{t('pipeline.emptyHint1')}</p>
              <p className="text-xs text-muted-foreground mt-1">{t('pipeline.emptyHint2')}</p>
            </div>
          </div>
        )}
      </div>

      {/* ====== Dialog Ø§Ù„Ø¯ÙˆØ±Ø© ====== */}
      <Dialog open={cycleDialogOpen} onOpenChange={setCycleDialogOpen}>
        <DialogContent className="sm:max-w-md" dir={dir()}>
          <DialogHeader>
            <DialogTitle className="flex items-center gap-2">
              <RotateCw className="w-5 h-5 text-amber-400" />
              {t('loop.detected')}
            </DialogTitle>
            <DialogDescription>
              {t('loop.desc')}
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-4 py-4">
            {/* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙˆØ±Ø© */}
            {detectedCycle && (
              <div className="p-3 rounded-lg bg-amber-400/5 border border-amber-400/20 text-sm">
                <p className="font-semibold text-amber-400 mb-2">
                  {t('loop.backEdges')}
                </p>
                {detectedCycle.backEdges.map((be) => {
                  const sourceNode = nodes.find((n) => n.id === be.source);
                  const targetNode = nodes.find((n) => n.id === be.target);
                  const sourceName = (sourceNode?.data as any)?.label || be.source;
                  const targetName = (targetNode?.data as any)?.label || be.target;
                  return (
                    <p key={be.id} className="text-xs text-muted-foreground mr-4">
                      â† {sourceName} â†’ {targetName}
                    </p>
                  );
                })}
              </div>
            )}

            {/* Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª */}
            <div>
              <label className="text-sm font-medium text-foreground block mb-2">
                {t('loop.iterations')}
              </label>
              <div className="flex gap-2 items-center">
                <Input
                  type="number"
                  min={1}
                  max={10}
                  value={loopIterations}
                  onChange={(e) => setLoopIterations(Math.min(10, Math.max(1, Number(e.target.value) || 1)))}
                  className="w-24 h-9 text-center"
                />
                <div className="flex gap-1">
                  {[1, 2, 3, 5, 10].map((n) => (
                    <Button
                      key={n}
                      variant={loopIterations === n ? 'default' : 'outline'}
                      size="sm"
                      className="h-8 w-8 p-0 text-xs"
                      onClick={() => setLoopIterations(n)}
                    >
                      {n}
                    </Button>
                  ))}
                </div>
              </div>
              <p className="text-[11px] text-muted-foreground mt-2">
                {t('loop.iterationHint').replace('{n}', String(loopIterations))}
              </p>
            </div>
          </div>

          <DialogFooter className="flex gap-2">
            <Button variant="destructive" size="sm" onClick={handleLoopCancel}>
              <Trash2 className="w-3.5 h-3.5 ml-1" /> {t('loop.cancel')}
            </Button>
            <Button size="sm" onClick={handleLoopConfirm}>
              <RotateCw className="w-3.5 h-3.5 ml-1" /> {t('loop.confirm')} {loopIterations}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div >
  );
}
</file>

<file path="agent-orchestrator-hub/src/pages/SettingsPage.tsx">
import { useState } from 'react';
import { PageHeader } from '@/components/PageHeader';
import { useApiKeyStore, generateToken, type ApiToken, type ApiKeyEntry } from '@/store/apiKeyStore';
import { AI_PROVIDERS } from '@/types';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { Label } from '@/components/ui/label';
import { Checkbox } from '@/components/ui/checkbox';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import {
  Eye, EyeOff, Save, Trash2, Key, Shield, Download, Smartphone,
  Plus, Copy, Code, Globe, Palette, RefreshCw, Database, Tag,
} from 'lucide-react';
import { toast } from 'sonner';
import { motion } from 'framer-motion';

export default function SettingsPage() {
  const {
    apiKeys, addApiKey, removeApiKey,
    tokens, addToken, removeToken,
  } = useApiKeyStore();

  const [visibleKeys, setVisibleKeys] = useState<Set<string>>(new Set());
  const [newKeyValues, setNewKeyValues] = useState<Record<string, { label: string; key: string }>>({});
  const [deferredPrompt, setDeferredPrompt] = useState<Event & { prompt: () => void; userChoice: Promise<{ outcome: string }> } | null>(null);
  const [newTokenName, setNewTokenName] = useState('');
  const [newTokenPerms, setNewTokenPerms] = useState<ApiToken['permissions']>(['chat', 'agents']);
  const [showNewToken, setShowNewToken] = useState<string | null>(null);

  if (typeof window !== 'undefined') {
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      setDeferredPrompt(e as Event & { prompt: () => void; userChoice: Promise<{ outcome: string }> });
    });
  }

  const toggleVisibility = (id: string) => {
    setVisibleKeys((prev) => {
      const next = new Set(prev);
      if (next.has(id)) next.delete(id);
      else next.add(id);
      return next;
    });
  };

  const handleSaveKey = (providerId: string) => {
    const values = newKeyValues[providerId];
    const key = values?.key?.trim();
    const label = values?.label?.trim() || `Ù…ÙØªØ§Ø­ ${AI_PROVIDERS.find((p) => p.id === providerId)?.name}`;
    if (!key) { toast.error('Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø£ÙˆÙ„Ø§Ù‹'); return; }
    addApiKey(providerId, label, key);
    setNewKeyValues((prev) => ({ ...prev, [providerId]: { label: '', key: '' } }));
    toast.success(`ØªÙ… Ø­ÙØ¸ Ù…ÙØªØ§Ø­ ${label}`);
  };

  const handleInstall = async () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === 'accepted') toast.success('ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚!');
      setDeferredPrompt(null);
    }
  };

  const maskKey = (key: string) => {
    if (key.length <= 8) return 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
    return key.slice(0, 4) + 'â€¢'.repeat(key.length - 8) + key.slice(-4);
  };

  const handleCreateToken = () => {
    if (!newTokenName.trim()) { toast.error('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ØªÙˆÙƒÙ†'); return; }
    if (newTokenPerms.length === 0) { toast.error('Ø§Ø®ØªØ± ØµÙ„Ø§Ø­ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„'); return; }
    const token = generateToken();
    addToken({
      id: crypto.randomUUID(),
      name: newTokenName.trim(),
      token,
      createdAt: new Date().toISOString(),
      permissions: newTokenPerms,
    });
    setShowNewToken(token);
    setNewTokenName('');
    toast.success('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙˆÙƒÙ† Ø¨Ù†Ø¬Ø§Ø­');
  };

  const copyToken = (token: string) => {
    navigator.clipboard.writeText(token);
    toast.success('ØªÙ… Ù†Ø³Ø® Ø§Ù„ØªÙˆÙƒÙ†');
  };

  const allPerms: { id: ApiToken['permissions'][number]; label: string }[] = [
    { id: 'chat', label: 'Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©' },
    { id: 'compare', label: 'Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©' },
    { id: 'pipeline', label: 'Pipeline' },
    { id: 'agents', label: 'Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡' },
    { id: 'dialogue', label: 'Ø§Ù„Ø­ÙˆØ§Ø± Ø§Ù„Ø¢Ù„ÙŠ' },
  ];

  const togglePerm = (perm: ApiToken['permissions'][number]) => {
    setNewTokenPerms((prev) =>
      prev.includes(perm) ? prev.filter((p) => p !== perm) : [...prev, perm]
    );
  };

  const sectionAnim = { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 } };

  return (
    <div className="p-4 md:p-6 lg:p-8 max-w-4xl pt-14 md:pt-6 lg:pt-8">
      <PageHeader title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" description="Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ØŒ Ø§Ù„ØªÙˆÙƒÙ†Ø§ØªØŒ ÙˆØ§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª" />

      <Tabs defaultValue="keys" className="space-y-6">
        <TabsList className="bg-card border border-border">
          <TabsTrigger value="keys" className="gap-1.5"><Key className="w-3.5 h-3.5" /> Ù…ÙØ§ØªÙŠØ­ API</TabsTrigger>
          <TabsTrigger value="tokens" className="gap-1.5"><Code className="w-3.5 h-3.5" /> ØªÙˆÙƒÙ†Ø§Øª API</TabsTrigger>
          <TabsTrigger value="general" className="gap-1.5"><Palette className="w-3.5 h-3.5" /> Ø¹Ø§Ù…</TabsTrigger>
        </TabsList>

        {/* ============ Ù…ÙØ§ØªÙŠØ­ API ============ */}
        <TabsContent value="keys" className="space-y-6">
          <motion.div {...sectionAnim} className="glass-card p-5">
            <div className="flex items-center gap-3 mb-5">
              <div className="w-10 h-10 rounded-xl bg-accent/10 flex items-center justify-center">
                <Key className="w-5 h-5 text-accent" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Ù…ÙØ§ØªÙŠØ­ Ù…Ø²ÙˆØ¯ÙŠ AI</h3>
                <p className="text-xs text-muted-foreground">Ø£Ø¶Ù Ø¹Ø¯Ø© Ù…ÙØ§ØªÙŠØ­ Ù„ÙƒÙ„ Ù…Ø²ÙˆØ¯ â€” ÙƒÙ„ ÙˆÙƒÙŠÙ„ ÙŠØ®ØªØ§Ø± Ù…ÙØªØ§Ø­Ù‡</p>
              </div>
            </div>

            <div className="space-y-5">
              {AI_PROVIDERS.map((provider) => {
                const providerKeys = apiKeys.filter((k) => k.providerId === provider.id);
                const newVal = newKeyValues[provider.id] || { label: '', key: '' };

                return (
                  <div key={provider.id} className="p-4 rounded-xl bg-secondary/50 border border-border/50">
                    <div className="flex items-center justify-between mb-3">
                      <div className="flex items-center gap-2">
                        <span className="text-lg">{provider.icon}</span>
                        <Label className="font-semibold">{provider.name}</Label>
                      </div>
                      <span className="text-[10px] text-muted-foreground bg-secondary px-2 py-0.5 rounded-full">
                        {providerKeys.length} Ù…ÙØªØ§Ø­
                      </span>
                    </div>

                    {/* Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø­Ø§Ù„ÙŠØ© */}
                    {providerKeys.length > 0 && (
                      <div className="space-y-2 mb-3">
                        {providerKeys.map((entry) => (
                          <div key={entry.id} className="flex items-center gap-2 p-2 rounded-lg bg-background border border-border/50">
                            <Tag className="w-3.5 h-3.5 text-muted-foreground shrink-0" />
                            <span className="text-xs font-semibold text-foreground min-w-[60px] truncate">{entry.label}</span>
                            <div className="flex-1 text-xs font-mono text-muted-foreground truncate">
                              {visibleKeys.has(entry.id) ? entry.key : maskKey(entry.key)}
                            </div>
                            <Button variant="ghost" size="icon" className="h-7 w-7 shrink-0" onClick={() => toggleVisibility(entry.id)}>
                              {visibleKeys.has(entry.id) ? <EyeOff className="w-3.5 h-3.5" /> : <Eye className="w-3.5 h-3.5" />}
                            </Button>
                            <Button variant="ghost" size="icon" className="h-7 w-7 shrink-0 text-destructive hover:text-destructive" onClick={() => { removeApiKey(entry.id); toast.success(`ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙØªØ§Ø­: ${entry.label}`); }}>
                              <Trash2 className="w-3.5 h-3.5" />
                            </Button>
                          </div>
                        ))}
                      </div>
                    )}

                    {/* Ø¥Ø¶Ø§ÙØ© Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯ */}
                    <div className="flex gap-2">
                      <Input
                        type="text"
                        value={newVal.label}
                        onChange={(e) => setNewKeyValues((prev) => ({ ...prev, [provider.id]: { ...newVal, label: e.target.value } }))}
                        placeholder="ØªØ³Ù…ÙŠØ© (Ù…Ø«Ø§Ù„: Ø­Ø³Ø§Ø¨ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ)"
                        className="bg-background border-border text-sm w-40"
                      />
                      <Input
                        type="password"
                        value={newVal.key}
                        onChange={(e) => setNewKeyValues((prev) => ({ ...prev, [provider.id]: { ...newVal, key: e.target.value } }))}
                        placeholder={`Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ ${provider.name} API...`}
                        className="bg-background border-border text-sm flex-1"
                      />
                      <Button size="sm" onClick={() => handleSaveKey(provider.id)} disabled={!newVal.key?.trim()} className="gap-1.5 shrink-0">
                        <Plus className="w-3.5 h-3.5" /> Ø£Ø¶Ù
                      </Button>
                    </div>
                  </div>
                );
              })}
            </div>

            <div className="mt-4 p-3 rounded-lg bg-chart-4/5 border border-chart-4/20">
              <p className="text-xs text-chart-4">
                âš ï¸ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ØªÙØ­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙŠ Ù…ØªØµÙØ­Ùƒ ÙÙ‚Ø· ÙˆÙ„Ø§ ØªÙØ±Ø³Ù„ Ù„Ø£ÙŠ Ø®Ø§Ø¯Ù… Ø®Ø§Ø±Ø¬ÙŠ. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø¹Ø¯Ø© Ù…ÙØ§ØªÙŠØ­ Ù„Ù†ÙØ³ Ø§Ù„Ù…Ø²ÙˆØ¯ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„ ÙˆÙƒÙŠÙ„.
              </p>
            </div>
          </motion.div>
        </TabsContent>

        {/* ============ ØªÙˆÙƒÙ†Ø§Øª API ============ */}
        <TabsContent value="tokens" className="space-y-6">
          {/* Ø¥Ù†Ø´Ø§Ø¡ ØªÙˆÙƒÙ† Ø¬Ø¯ÙŠØ¯ */}
          <motion.div {...sectionAnim} className="glass-card p-5">
            <div className="flex items-center gap-3 mb-5">
              <div className="w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center">
                <Code className="w-5 h-5 text-primary" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Ø¥Ù†Ø´Ø§Ø¡ ØªÙˆÙƒÙ† API</h3>
                <p className="text-xs text-muted-foreground">Ø£Ù†Ø´Ø¦ ØªÙˆÙƒÙ† Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ API Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ â€” ÙŠØ¬Ø¨ Ø¥Ø±Ø³Ø§Ù„ apiKey Ø§Ù„Ù…Ø²ÙˆØ¯ Ù…Ø¹ ÙƒÙ„ Ø·Ù„Ø¨</p>
              </div>
            </div>

            <div className="space-y-4">
              <div>
                <Label className="text-sm mb-1.5 block">Ø§Ø³Ù… Ø§Ù„ØªÙˆÙƒÙ†</Label>
                <Input
                  value={newTokenName}
                  onChange={(e) => setNewTokenName(e.target.value)}
                  placeholder="Ù…Ø«Ø§Ù„: ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„..."
                  className="bg-background border-border"
                />
              </div>

              <div>
                <Label className="text-sm mb-2 block">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</Label>
                <div className="flex flex-wrap gap-3">
                  {allPerms.map((perm) => (
                    <label
                      key={perm.id}
                      className={`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-all border ${newTokenPerms.includes(perm.id) ? 'border-primary bg-primary/10' : 'border-border bg-secondary/50'
                        }`}
                    >
                      <Checkbox
                        checked={newTokenPerms.includes(perm.id)}
                        onCheckedChange={() => togglePerm(perm.id)}
                      />
                      <span className="text-sm">{perm.label}</span>
                    </label>
                  ))}
                </div>
              </div>

              <Button onClick={handleCreateToken} className="gap-1.5">
                <Plus className="w-4 h-4" /> Ø¥Ù†Ø´Ø§Ø¡ ØªÙˆÙƒÙ†
              </Button>

              {showNewToken && (
                <motion.div {...sectionAnim} className="p-4 rounded-xl bg-primary/5 border border-primary/20">
                  <p className="text-xs text-primary font-semibold mb-2">âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙˆÙƒÙ† â€” Ø§Ù†Ø³Ø®Ù‡ Ø§Ù„Ø¢Ù† ÙÙ„Ù† ÙŠØ¸Ù‡Ø± Ù…Ø¬Ø¯Ø¯Ø§Ù‹</p>
                  <div className="flex gap-2 items-center">
                    <code className="flex-1 text-xs font-mono bg-background p-2 rounded-lg border border-border overflow-x-auto">
                      {showNewToken}
                    </code>
                    <Button size="icon" variant="outline" onClick={() => copyToken(showNewToken)}>
                      <Copy className="w-4 h-4" />
                    </Button>
                  </div>
                  <Button size="sm" variant="ghost" className="mt-2 text-xs" onClick={() => setShowNewToken(null)}>
                    Ø¥Ø®ÙØ§Ø¡
                  </Button>
                </motion.div>
              )}
            </div>
          </motion.div>

          {/* Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© */}
          <motion.div {...sectionAnim} transition={{ delay: 0.1 }} className="glass-card p-5">
            <h3 className="font-semibold text-foreground mb-4">Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© ({tokens.length})</h3>
            {tokens.length === 0 ? (
              <p className="text-sm text-muted-foreground text-center py-6">Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠ ØªÙˆÙƒÙ†Ø§Øª Ø¨Ø¹Ø¯</p>
            ) : (
              <div className="space-y-3">
                {tokens.map((t) => (
                  <div key={t.id} className="flex items-center gap-3 p-3 rounded-xl bg-secondary/50 border border-border/50">
                    <div className="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center shrink-0">
                      <Key className="w-4 h-4 text-primary" />
                    </div>
                    <div className="flex-1 min-w-0">
                      <p className="text-sm font-semibold text-foreground">{t.name}</p>
                      <div className="flex gap-2 mt-0.5">
                        <span className="text-[10px] text-muted-foreground font-mono">wkp_â€¢â€¢â€¢â€¢{t.token.slice(-4)}</span>
                        <span className="text-[10px] text-muted-foreground">Â·</span>
                        <span className="text-[10px] text-muted-foreground">
                          {t.permissions.length} ØµÙ„Ø§Ø­ÙŠØ§Øª
                        </span>
                      </div>
                    </div>
                    <Button
                      variant="ghost"
                      size="icon"
                      onClick={() => { removeToken(t.id); toast.success('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙˆÙƒÙ†'); }}
                      className="shrink-0 text-destructive hover:text-destructive"
                    >
                      <Trash2 className="w-4 h-4" />
                    </Button>
                  </div>
                ))}
              </div>
            )}
          </motion.div>

          <div className="p-3 rounded-lg bg-chart-3/5 border border-chart-3/20">
            <p className="text-xs text-chart-3">
              ğŸ’¡ Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… API Ø®Ø§Ø±Ø¬ÙŠØ§Ù‹ØŒ Ø£Ø±Ø³Ù„ <code className="bg-background px-1 rounded">apiKey</code> Ø§Ù„Ø®Ø§Øµ Ø¨Ù…Ø²ÙˆØ¯ AI Ø¶Ù…Ù† body Ø§Ù„Ø·Ù„Ø¨.
              Ø§Ù„ØªÙˆÙƒÙ† ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©ØŒ Ø£Ù…Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ù„Ù…Ø²ÙˆØ¯ ÙŠÙØ±Ø³Ù„ Ù…Ø¹ ÙƒÙ„ Ø·Ù„Ø¨.
            </p>
          </div>
        </TabsContent>

        {/* ============ Ø¹Ø§Ù… ============ */}
        <TabsContent value="general" className="space-y-6">
          {/* PWA */}
          <motion.div {...sectionAnim} className="glass-card p-5">
            <div className="flex items-center gap-3 mb-3">
              <div className="w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center">
                <Smartphone className="w-5 h-5 text-primary" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h3>
                <p className="text-xs text-muted-foreground">Ø«Ø¨Ù‘Øª ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ ÙƒØªØ·Ø¨ÙŠÙ‚ Ù…Ø³ØªÙ‚Ù„</p>
              </div>
            </div>
            {deferredPrompt ? (
              <Button onClick={handleInstall} className="gap-2">
                <Download className="w-4 h-4" /> ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¢Ù†
              </Button>
            ) : (
              <p className="text-xs text-muted-foreground">
                ğŸ’¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„: Ø§Ø¶ØºØ· "Ù…Ø´Ø§Ø±ÙƒØ©" Ø«Ù… "Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"
                <br />
                ğŸ’¡ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ«Ø¨ÙŠØª ÙÙŠ Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
              </p>
            )}
          </motion.div>

          {/* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… */}
          <motion.div {...sectionAnim} transition={{ delay: 0.1 }} className="glass-card p-5">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-10 h-10 rounded-xl bg-chart-3/10 flex items-center justify-center">
                <Globe className="w-5 h-5 text-chart-3" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                <p className="text-xs text-muted-foreground">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ© ÙˆØ§Ù„Ø¥ØµØ¯Ø§Ø±</p>
              </div>
            </div>
            <div className="space-y-2">
              {[
                { label: 'Ø§Ù„Ø¥ØµØ¯Ø§Ø±', value: '1.0.0' },
                { label: 'Ø§Ù„Ù†ÙˆØ¹', value: 'PWA - ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ ØªÙ‚Ø¯Ù…ÙŠ' },
                { label: 'Ø§Ù„Ù…Ø²ÙˆØ¯ÙˆÙ† Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…ÙˆÙ†', value: AI_PROVIDERS.map(p => p.name).join('ØŒ ') },
                { label: 'Ø§Ù„ØªØ®Ø²ÙŠÙ†', value: 'Ù…Ø­Ù„ÙŠ (LocalStorage)' },
                { label: 'Ø§Ù„ØªØ±Ø®ÙŠØµ', value: 'MIT' },
              ].map(item => (
                <div key={item.label} className="flex justify-between items-center py-2 border-b border-border/30 last:border-0">
                  <span className="text-sm text-muted-foreground">{item.label}</span>
                  <span className="text-sm text-foreground font-medium">{item.value}</span>
                </div>
              ))}
            </div>
          </motion.div>

          {/* ØªØµØ¯ÙŠØ±/Ø§Ø³ØªÙŠØ±Ø§Ø¯ */}
          <motion.div {...sectionAnim} transition={{ delay: 0.2 }} className="glass-card p-5">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-10 h-10 rounded-xl bg-chart-4/10 flex items-center justify-center">
                <Database className="w-5 h-5 text-chart-4" />
              </div>
              <div>
                <h3 className="font-semibold text-foreground">Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</h3>
                <p className="text-xs text-muted-foreground">ØªØµØ¯ÙŠØ± ÙˆØ§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØµØ©</p>
              </div>
            </div>
            <div className="flex gap-2">
              <Button variant="outline" className="gap-1.5" onClick={() => {
                const data = {
                  store: JSON.parse(localStorage.getItem('wakil-plus-store') || '{}'),
                  apiKeys: JSON.parse(localStorage.getItem('wakil-plus-api-keys') || '{}'),
                };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url; a.download = `wakil-plus-backup-${Date.now()}.json`; a.click();
                URL.revokeObjectURL(url);
                toast.success('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
              }}>
                <Download className="w-4 h-4" /> ØªØµØ¯ÙŠØ±
              </Button>
              <Button variant="outline" className="gap-1.5" onClick={() => {
                const input = document.createElement('input');
                input.type = 'file'; input.accept = '.json';
                input.onchange = (e) => {
                  const file = (e.target as HTMLInputElement).files?.[0];
                  if (!file) return;
                  const reader = new FileReader();
                  reader.onload = (ev) => {
                    try {
                      const data = JSON.parse(ev.target?.result as string);
                      if (data.store) localStorage.setItem('wakil-plus-store', JSON.stringify(data.store));
                      if (data.apiKeys) localStorage.setItem('wakil-plus-api-keys', JSON.stringify(data.apiKeys));
                      toast.success('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â€” Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©');
                    } catch { toast.error('Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­'); }
                  };
                  reader.readAsText(file);
                };
                input.click();
              }}>
                <RefreshCw className="w-4 h-4" /> Ø§Ø³ØªÙŠØ±Ø§Ø¯
              </Button>
            </div>
          </motion.div>
        </TabsContent>
      </Tabs>
    </div>
  );
}
</file>

<file path="agent-orchestrator-hub/src/store/agentStore.ts">
import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import type { Agent, Pipeline, Conversation, ChatMessage } from '@/types';

function generateId() {
  return crypto.randomUUID();
}

interface AgentStore {
  agents: Agent[];
  pipelines: Pipeline[];
  conversations: Conversation[];
  
  // Agents
  addAgent: (agent: Omit<Agent, 'id' | 'createdAt' | 'updatedAt'>) => Agent;
  updateAgent: (id: string, data: Partial<Agent>) => void;
  deleteAgent: (id: string) => void;
  getAgent: (id: string) => Agent | undefined;
  
  // Pipelines
  addPipeline: (pipeline: Omit<Pipeline, 'id' | 'createdAt' | 'updatedAt'>) => Pipeline;
  updatePipeline: (id: string, data: Partial<Pipeline>) => void;
  deletePipeline: (id: string) => void;
  
  // Conversations
  addConversation: (agentId: string, title: string) => Conversation;
  addMessage: (conversationId: string, message: Omit<ChatMessage, 'id' | 'timestamp'>) => void;
  deleteConversation: (id: string) => void;
}

const SAMPLE_AGENTS: Agent[] = [
  {
    id: '1',
    name: 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¹Ø§Ù…',
    description: 'ÙˆÙƒÙŠÙ„ Ø°ÙƒÙŠ Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©',
    systemPrompt: 'Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…Ø­ØªØ±Ù. Ø£Ø¬Ø¨ Ø¨ÙˆØ¶ÙˆØ­ ÙˆØ¯Ù‚Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.',
    modelProvider: 'googleai',
    modelId: 'gemini-2.5-flash',
    avatarUrl: '',
    createdAt: new Date().toISOString(),
    updatedAt: new Date().toISOString(),
  },
  {
    id: '2',
    name: 'Ù…Ø·ÙˆØ± Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª',
    description: 'Ù…ØªØ®ØµØµ ÙÙŠ ÙƒØªØ§Ø¨Ø© ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©',
    systemPrompt: 'Ø£Ù†Øª Ù…Ø·ÙˆØ± Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø®Ø¨ÙŠØ±. Ø³Ø§Ø¹Ø¯ ÙÙŠ ÙƒØªØ§Ø¨Ø© Ø£ÙƒÙˆØ§Ø¯ Ù†Ø¸ÙŠÙØ© ÙˆÙØ¹Ø§Ù„Ø©.',
    modelProvider: 'openai',
    modelId: 'gpt-4',
    avatarUrl: '',
    createdAt: new Date().toISOString(),
    updatedAt: new Date().toISOString(),
  },
  {
    id: '3',
    name: 'ÙƒØ§ØªØ¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰',
    description: 'Ù…ØªØ®ØµØµ ÙÙŠ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ',
    systemPrompt: 'Ø£Ù†Øª ÙƒØ§ØªØ¨ Ù…Ø­ØªÙˆÙ‰ Ù…Ø­ØªØ±Ù. Ø§ÙƒØªØ¨ Ù…Ø­ØªÙˆÙ‰ Ø¬Ø°Ø§Ø¨ ÙˆØ¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø©.',
    modelProvider: 'anthropic',
    modelId: 'claude-3.5-sonnet',
    avatarUrl: '',
    createdAt: new Date().toISOString(),
    updatedAt: new Date().toISOString(),
  },
];

export const useAgentStore = create<AgentStore>()(
  persist(
    (set, get) => ({
      agents: SAMPLE_AGENTS,
      pipelines: [],
      conversations: [],

      addAgent: (data) => {
        const agent: Agent = {
          ...data,
          id: generateId(),
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
        };
        set((s) => ({ agents: [...s.agents, agent] }));
        return agent;
      },
      updateAgent: (id, data) =>
        set((s) => ({
          agents: s.agents.map((a) =>
            a.id === id ? { ...a, ...data, updatedAt: new Date().toISOString() } : a
          ),
        })),
      deleteAgent: (id) => set((s) => ({ agents: s.agents.filter((a) => a.id !== id) })),
      getAgent: (id) => get().agents.find((a) => a.id === id),

      addPipeline: (data) => {
        const pipeline: Pipeline = {
          ...data,
          id: generateId(),
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
        };
        set((s) => ({ pipelines: [...s.pipelines, pipeline] }));
        return pipeline;
      },
      updatePipeline: (id, data) =>
        set((s) => ({
          pipelines: s.pipelines.map((p) =>
            p.id === id ? { ...p, ...data, updatedAt: new Date().toISOString() } : p
          ),
        })),
      deletePipeline: (id) => set((s) => ({ pipelines: s.pipelines.filter((p) => p.id !== id) })),

      addConversation: (agentId, title) => {
        const conv: Conversation = {
          id: generateId(),
          agentId,
          title,
          messages: [],
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
        };
        set((s) => ({ conversations: [...s.conversations, conv] }));
        return conv;
      },
      addMessage: (conversationId, message) =>
        set((s) => ({
          conversations: s.conversations.map((c) =>
            c.id === conversationId
              ? {
                  ...c,
                  messages: [
                    ...c.messages,
                    { ...message, id: generateId(), timestamp: new Date().toISOString() },
                  ],
                  updatedAt: new Date().toISOString(),
                }
              : c
          ),
        })),
      deleteConversation: (id) =>
        set((s) => ({ conversations: s.conversations.filter((c) => c.id !== id) })),
    }),
    { name: 'wakil-plus-store' }
  )
);
</file>

<file path="agent-orchestrator-hub/src/store/apiKeyStore.ts">
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

/** Ù…ÙØªØ§Ø­ API Ù…Ø¹ ØªØ³Ù…ÙŠØ© */
export interface ApiKeyEntry {
  id: string;
  providerId: string;
  label: string;
  key: string;
  createdAt: string;
}

/** ØªÙˆÙƒÙ†Ø§Øª API Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ */
export interface ApiToken {
  id: string;
  name: string;
  token: string;
  createdAt: string;
  lastUsed?: string;
  permissions: ('chat' | 'compare' | 'pipeline' | 'agents' | 'dialogue')[];
}

/** Ù…Ø®Ø²Ù† Ù…ÙØ§ØªÙŠØ­ API ÙˆØªÙˆÙƒÙ†Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„ */
interface ApiKeyStore {
  /** Ù…ÙØ§ØªÙŠØ­ API Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© Ù„ÙƒÙ„ Ù…Ø²ÙˆØ¯ */
  apiKeys: ApiKeyEntry[];
  tokens: ApiToken[];

  // Ù…ÙØ§ØªÙŠØ­ API
  addApiKey: (providerId: string, label: string, key: string) => ApiKeyEntry;
  removeApiKey: (keyId: string) => void;
  getApiKey: (keyId: string) => ApiKeyEntry | undefined;
  getKeysByProvider: (providerId: string) => ApiKeyEntry[];
  getActualKey: (keyId: string) => string | undefined;

  // ØªÙˆÙƒÙ†Ø§Øª
  addToken: (token: ApiToken) => void;
  removeToken: (tokenId: string) => void;
  updateTokenLastUsed: (tokenId: string) => void;

  // --- Legacy compatibility ---
  /** @deprecated use apiKeys */
  keys: Record<string, string>;
  /** @deprecated */
  setKey: (providerId: string, key: string) => void;
  /** @deprecated */
  removeKey: (providerId: string) => void;
  /** @deprecated */
  getKey: (providerId: string) => string | undefined;
  /** @deprecated */
  hasKey: (providerId: string) => boolean;
}

export function generateToken(): string {
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  let result = 'wkp_';
  for (let i = 0; i < 40; i++) {
    result += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return result;
}

export const useApiKeyStore = create<ApiKeyStore>()(
  persist(
    (set, get) => ({
      apiKeys: [],
      tokens: [],

      // --- Legacy (kept for backward compatibility) ---
      keys: {},
      setKey: (providerId, key) =>
        set((s) => ({ keys: { ...s.keys, [providerId]: key } })),
      removeKey: (providerId) =>
        set((s) => {
          const { [providerId]: _, ...rest } = s.keys;
          return { keys: rest };
        }),
      getKey: (providerId) => get().keys[providerId],
      hasKey: (providerId) => !!get().keys[providerId],

      // --- New multi-key system ---
      addApiKey: (providerId, label, key) => {
        const entry: ApiKeyEntry = {
          id: crypto.randomUUID(),
          providerId,
          label,
          key,
          createdAt: new Date().toISOString(),
        };
        set((s) => ({ apiKeys: [...s.apiKeys, entry] }));
        return entry;
      },
      removeApiKey: (keyId) =>
        set((s) => ({ apiKeys: s.apiKeys.filter((k) => k.id !== keyId) })),
      getApiKey: (keyId) => get().apiKeys.find((k) => k.id === keyId),
      getKeysByProvider: (providerId) =>
        get().apiKeys.filter((k) => k.providerId === providerId),
      getActualKey: (keyId) => get().apiKeys.find((k) => k.id === keyId)?.key,

      // --- Tokens ---
      addToken: (token) =>
        set((s) => ({ tokens: [...s.tokens, token] })),
      removeToken: (tokenId) =>
        set((s) => ({ tokens: s.tokens.filter((t) => t.id !== tokenId) })),
      updateTokenLastUsed: (tokenId) =>
        set((s) => ({
          tokens: s.tokens.map((t) =>
            t.id === tokenId ? { ...t, lastUsed: new Date().toISOString() } : t
          ),
        })),
    }),
    { name: 'wakil-plus-api-keys' }
  )
);
</file>

<file path="agent-orchestrator-hub/src/test/agentStore.test.ts">
import { describe, it, expect, beforeEach } from 'vitest';
import { useAgentStore } from '@/store/agentStore';

describe('Agent Store', () => {
    beforeEach(() => {
        // Reset the store before each test
        const store = useAgentStore.getState();
        useAgentStore.setState({
            agents: [],
            pipelines: [],
            conversations: [],
        });
    });

    describe('Agents CRUD', () => {
        it('should add a new agent', () => {
            const store = useAgentStore.getState();
            const agent = store.addAgent({
                name: 'Test Agent',
                description: 'A test agent',
                systemPrompt: 'You are a test agent',
                modelProvider: 'openai',
                modelId: 'gpt-4',
                avatarUrl: '',
            });

            expect(agent).toBeDefined();
            expect(agent.id).toBeDefined();
            expect(agent.name).toBe('Test Agent');
            expect(agent.createdAt).toBeDefined();
            expect(agent.updatedAt).toBeDefined();

            const agents = useAgentStore.getState().agents;
            expect(agents).toHaveLength(1);
            expect(agents[0].name).toBe('Test Agent');
        });

        it('should get agent by id', () => {
            const store = useAgentStore.getState();
            const agent = store.addAgent({
                name: 'Find Me',
                description: 'Agent to find',
                systemPrompt: 'prompt',
                modelProvider: 'googleai',
                modelId: 'gemini-2.5-flash',
            });

            const found = useAgentStore.getState().getAgent(agent.id);
            expect(found).toBeDefined();
            expect(found?.name).toBe('Find Me');
        });

        it('should return undefined for non-existent agent', () => {
            const store = useAgentStore.getState();
            const found = store.getAgent('non-existent-id');
            expect(found).toBeUndefined();
        });

        it('should update an agent', () => {
            const store = useAgentStore.getState();
            const agent = store.addAgent({
                name: 'Original Name',
                description: 'Original description',
                systemPrompt: 'prompt',
                modelProvider: 'openai',
                modelId: 'gpt-4',
            });

            useAgentStore.getState().updateAgent(agent.id, {
                name: 'Updated Name',
                description: 'Updated description',
            });

            const updated = useAgentStore.getState().getAgent(agent.id);
            expect(updated?.name).toBe('Updated Name');
            expect(updated?.description).toBe('Updated description');
            expect(updated?.updatedAt).not.toBe(agent.updatedAt);
        });

        it('should delete an agent', () => {
            const store = useAgentStore.getState();
            const agent = store.addAgent({
                name: 'To Delete',
                description: 'Will be deleted',
                systemPrompt: 'prompt',
                modelProvider: 'anthropic',
                modelId: 'claude-3.5-sonnet',
            });

            expect(useAgentStore.getState().agents).toHaveLength(1);
            useAgentStore.getState().deleteAgent(agent.id);
            expect(useAgentStore.getState().agents).toHaveLength(0);
        });

        it('should handle multiple agents', () => {
            const store = useAgentStore.getState();
            store.addAgent({
                name: 'Agent 1',
                systemPrompt: 'prompt1',
                modelProvider: 'openai',
                modelId: 'gpt-4',
            });
            store.addAgent({
                name: 'Agent 2',
                systemPrompt: 'prompt2',
                modelProvider: 'googleai',
                modelId: 'gemini-2.5-pro',
            });
            store.addAgent({
                name: 'Agent 3',
                systemPrompt: 'prompt3',
                modelProvider: 'anthropic',
                modelId: 'claude-3.5-sonnet',
            });

            // Need to re-read state since addAgent doesn't return the latest state
            const agents = useAgentStore.getState().agents;
            expect(agents).toHaveLength(3);
        });
    });

    describe('Pipelines CRUD', () => {
        it('should add a pipeline', () => {
            const store = useAgentStore.getState();
            const pipeline = store.addPipeline({
                name: 'Test Pipeline',
                description: 'A test pipeline',
                nodes: [],
                edges: [],
            });

            expect(pipeline).toBeDefined();
            expect(pipeline.id).toBeDefined();
            expect(pipeline.name).toBe('Test Pipeline');
            expect(useAgentStore.getState().pipelines).toHaveLength(1);
        });

        it('should update a pipeline', () => {
            const store = useAgentStore.getState();
            const pipeline = store.addPipeline({
                name: 'Original Pipeline',
                nodes: [],
                edges: [],
            });

            useAgentStore.getState().updatePipeline(pipeline.id, {
                name: 'Updated Pipeline',
            });

            const updated = useAgentStore.getState().pipelines.find(p => p.id === pipeline.id);
            expect(updated?.name).toBe('Updated Pipeline');
        });

        it('should delete a pipeline', () => {
            const store = useAgentStore.getState();
            const pipeline = store.addPipeline({
                name: 'To Delete',
                nodes: [],
                edges: [],
            });

            expect(useAgentStore.getState().pipelines).toHaveLength(1);
            useAgentStore.getState().deletePipeline(pipeline.id);
            expect(useAgentStore.getState().pipelines).toHaveLength(0);
        });
    });

    describe('Conversations', () => {
        it('should add a conversation', () => {
            const store = useAgentStore.getState();
            const agent = store.addAgent({
                name: 'Chat Agent',
                systemPrompt: 'prompt',
                modelProvider: 'openai',
                modelId: 'gpt-4',
            });

            const conv = useAgentStore.getState().addConversation(agent.id, 'Test Chat');
            expect(conv).toBeDefined();
            expect(conv.id).toBeDefined();
            expect(conv.agentId).toBe(agent.id);
            expect(conv.title).toBe('Test Chat');
            expect(conv.messages).toHaveLength(0);
        });

        it('should add messages to a conversation', () => {
            const store = useAgentStore.getState();
            const agent = store.addAgent({
                name: 'Chat Agent',
                systemPrompt: 'prompt',
                modelProvider: 'openai',
                modelId: 'gpt-4',
            });

            const conv = useAgentStore.getState().addConversation(agent.id, 'Test Chat');

            useAgentStore.getState().addMessage(conv.id, {
                role: 'user',
                content: 'Hello!',
            });

            useAgentStore.getState().addMessage(conv.id, {
                role: 'assistant',
                content: 'Hi! How can I help you?',
                agentId: agent.id,
            });

            const updatedConv = useAgentStore.getState().conversations.find(c => c.id === conv.id);
            expect(updatedConv?.messages).toHaveLength(2);
            expect(updatedConv?.messages[0].role).toBe('user');
            expect(updatedConv?.messages[0].content).toBe('Hello!');
            expect(updatedConv?.messages[1].role).toBe('assistant');
            expect(updatedConv?.messages[1].content).toBe('Hi! How can I help you?');
        });

        it('should delete a conversation', () => {
            const store = useAgentStore.getState();
            const agent = store.addAgent({
                name: 'Agent',
                systemPrompt: 'prompt',
                modelProvider: 'openai',
                modelId: 'gpt-4',
            });
            const conv = useAgentStore.getState().addConversation(agent.id, 'To Delete');

            expect(useAgentStore.getState().conversations).toHaveLength(1);
            useAgentStore.getState().deleteConversation(conv.id);
            expect(useAgentStore.getState().conversations).toHaveLength(0);
        });
    });
});
</file>

<file path="agent-orchestrator-hub/src/test/example.test.ts">
import { describe, it, expect } from "vitest";

describe("example", () => {
  it("should pass", () => {
    expect(true).toBe(true);
  });
});
</file>

<file path="agent-orchestrator-hub/src/test/setup.ts">
import "@testing-library/jest-dom";

Object.defineProperty(window, "matchMedia", {
  writable: true,
  value: (query: string) => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: () => {},
    removeListener: () => {},
    addEventListener: () => {},
    removeEventListener: () => {},
    dispatchEvent: () => {},
  }),
});
</file>

<file path="agent-orchestrator-hub/src/test/types.test.ts">
import { describe, it, expect } from 'vitest';
import { AI_PROVIDERS, AI_MODELS } from '@/types';

describe('Types and Constants', () => {
    describe('AI_PROVIDERS', () => {
        it('should have 4 providers', () => {
            expect(AI_PROVIDERS).toHaveLength(4);
        });

        it('should include all expected providers', () => {
            const providerIds = AI_PROVIDERS.map(p => p.id);
            expect(providerIds).toContain('googleai');
            expect(providerIds).toContain('openai');
            expect(providerIds).toContain('anthropic');
            expect(providerIds).toContain('mistral');
        });

        it('each provider should have id, name, and icon', () => {
            for (const provider of AI_PROVIDERS) {
                expect(provider.id).toBeDefined();
                expect(provider.name).toBeDefined();
                expect(provider.icon).toBeDefined();
                expect(typeof provider.id).toBe('string');
                expect(typeof provider.name).toBe('string');
                expect(typeof provider.icon).toBe('string');
            }
        });
    });

    describe('AI_MODELS', () => {
        it('should have models for each provider', () => {
            for (const provider of AI_PROVIDERS) {
                expect(AI_MODELS[provider.id]).toBeDefined();
                expect(AI_MODELS[provider.id].length).toBeGreaterThan(0);
            }
        });

        it('Google AI should have Gemini models', () => {
            const googleModels = AI_MODELS.googleai;
            expect(googleModels.length).toBeGreaterThanOrEqual(3);
            const modelIds = googleModels.map(m => m.id);
            expect(modelIds).toContain('gemini-2.5-pro');
            expect(modelIds).toContain('gemini-2.5-flash');
        });

        it('OpenAI models should include GPT-4', () => {
            const openaiModels = AI_MODELS.openai;
            const modelIds = openaiModels.map(m => m.id);
            expect(modelIds).toContain('gpt-4');
        });

        it('Anthropic should have Claude models', () => {
            const anthropicModels = AI_MODELS.anthropic;
            const modelIds = anthropicModels.map(m => m.id);
            expect(modelIds).toContain('claude-3.5-sonnet');
        });

        it('each model should have id and name', () => {
            for (const providerId of Object.keys(AI_MODELS)) {
                for (const model of AI_MODELS[providerId]) {
                    expect(model.id).toBeDefined();
                    expect(model.name).toBeDefined();
                    expect(typeof model.id).toBe('string');
                    expect(typeof model.name).toBe('string');
                }
            }
        });
    });
});
</file>

<file path="agent-orchestrator-hub/src/types/index.ts">
export interface Agent {
  id: string;
  name: string;
  description?: string;
  avatarUrl?: string;
  systemPrompt: string;
  modelProvider: string;
  modelId: string;
  apiKeyId?: string;
  modelConfig?: {
    temperature?: number;
    maxTokens?: number;
    topP?: number;
  };
  createdAt: string;
  updatedAt: string;
}

export interface ChatMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  agentId?: string;
  timestamp: string;
}

export interface Conversation {
  id: string;
  agentId: string;
  title: string;
  messages: ChatMessage[];
  createdAt: string;
  updatedAt: string;
}

export interface PipelineNode {
  id: string;
  agentId: string;
  position: { x: number; y: number };
  config?: {
    timeout?: number;
    retries?: number;
    label?: string;
    provider?: string;
    icon?: string;
  };
}

export interface PipelineEdge {
  id: string;
  source: string;
  target: string;
  condition?: {
    type: 'always' | 'conditional' | 'on_success' | 'on_error';
    expression?: string;
  };
}

export interface Pipeline {
  id: string;
  name: string;
  description?: string;
  nodes: PipelineNode[];
  edges: PipelineEdge[];
  createdAt: string;
  updatedAt: string;
}

export interface ExecutionTrace {
  nodeId: string;
  agentId: string;
  input: string;
  output: string;
  startTime: string;
  endTime: string;
  duration: number;
  tokenUsage?: {
    prompt: number;
    completion: number;
    total: number;
  };
}

export interface Execution {
  id: string;
  pipelineId: string;
  input: string;
  status: 'pending' | 'running' | 'completed' | 'failed';
  result?: string;
  trace?: ExecutionTrace[];
  startedAt: string;
  completedAt?: string;
  error?: string;
}

export const AI_PROVIDERS = [
  { id: 'googleai', name: 'Google Gemini', icon: 'âœ¦' },
  { id: 'openai', name: 'OpenAI', icon: 'â—' },
  { id: 'anthropic', name: 'Anthropic Claude', icon: 'â—†' },
  { id: 'mistral', name: 'Mistral AI', icon: 'â—‡' },
] as const;

export const AI_MODELS: Record<string, { id: string; name: string }[]> = {
  googleai: [
    // === 2026 / Late 2025 (Preview & Cutting Edge) ===
    { id: 'gemini-3-pro-preview', name: 'Gemini 3 Pro (Preview) Cutting Edge' },
    { id: 'gemini-3-flash-preview', name: 'Gemini 3 Flash (Preview) Cutting Edge' },

    // === 2025 (Production Ready) ===
    { id: 'gemini-2.5-pro', name: 'Gemini 2.5 Pro Production' },
    { id: 'gemini-2.5-flash', name: 'Gemini 2.5 Flash Production' },
    { id: 'gemini-2.5-flash-lite', name: 'Gemini 2.5 Flash-Lite Production' },
    { id: 'gemini-2.0-flash', name: 'Gemini 2.0 Flash Production' },

    // === Legacy / Stable (2024) ===
    { id: 'gemini-1.5-pro', name: 'Gemini 1.5 Pro Legacy' },
    { id: 'gemini-1.5-flash', name: 'Gemini 1.5 Flash Legacy' },
    { id: 'gemini-1.0-pro', name: 'Gemini 1.0 Pro Legacy' },
  ],
  openai: [
    // === Reasoning & Advanced (o-series) ===
    { id: 'o1', name: 'OpenAI o1 Reasoning' },
    { id: 'o1-mini', name: 'OpenAI o1-mini Reasoning' },
    { id: 'o3-mini', name: 'OpenAI o3-mini Reasoning' },

    // === GPT-4.5 / 4.1 Series (2025/2026) ===
    { id: 'gpt-4.5-preview', name: 'GPT-4.5 Preview Series' },
    { id: 'gpt-4.5-preview-2025-02-27', name: 'GPT-4.5 (Feb 2026) Series' },

    // === Flagship (GPT-4o) ===
    { id: 'gpt-4o', name: 'GPT-4o Flagship' },
    { id: 'gpt-4o-mini', name: 'GPT-4o mini Flagship' },

    // === Legacy GPT-4 ===
    { id: 'gpt-4-turbo', name: 'GPT-4 Legacy Turbo' },
    { id: 'gpt-4', name: 'GPT-4 Legacy' },

    // === Classic ===
    { id: 'gpt-3.5-turbo', name: 'GPT-3.5 Classic Turbo' },
  ],
  anthropic: [
    // === Claude 3.5 (2024/2025) ===
    { id: 'claude-3-5-sonnet-20240620', name: 'Claude 3.5 Sonnet' },
    { id: 'claude-3-5-haiku-20241022', name: 'Claude 3.5 Haiku' },

    // === Claude 3 (Legacy) ===
    { id: 'claude-3-opus-20240229', name: 'Claude 3 Legacy Opus' },
    { id: 'claude-3-sonnet-20240229', name: 'Claude 3 Legacy Sonnet' },
    { id: 'claude-3-haiku-20240307', name: 'Claude 3 Legacy Haiku' },
  ],
  mistral: [
    // === Premier / Large ===
    { id: 'mistral-large-latest', name: 'Mistral Premier Large (Latest)' },
    { id: 'mistral-medium-latest', name: 'Mistral Premier Medium (Latest)' },
    { id: 'mistral-small-latest', name: 'Mistral Premier Small (Latest)' },

    // === Codestral ===
    { id: 'codestral-latest', name: 'Codestral ( LatestCode)' },
    { id: 'codestral-2501', name: 'Codestral (Code) 25.01' },

    // === Ministral (Edge/Efficient) ===
    { id: 'ministral-8b-latest', name: 'Ministral (Edge/Efficient) 8B' },
    { id: 'ministral-3b-latest', name: 'Ministral (Edge/Efficient) 3B' },

    // === Open Options ===
    { id: 'open-mixtral-8x22b', name: 'Mixtral Open Option 8x22B' },
    { id: 'open-mistral-7b', name: 'Mistral Open Option 7B' },
  ],
};
</file>

<file path="agent-orchestrator-hub/src/vite-env.d.ts">
/// <reference types="vite/client" />
</file>

<file path="agent-orchestrator-hub/tailwind.config.ts">
import type { Config } from "tailwindcss";

export default {
  darkMode: ["class"],
  content: ["./pages/**/*.{ts,tsx}", "./components/**/*.{ts,tsx}", "./app/**/*.{ts,tsx}", "./src/**/*.{ts,tsx}"],
  prefix: "",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      fontFamily: {
        sans: ['IBM Plex Sans Arabic', 'sans-serif'],
        mono: ['JetBrains Mono', 'monospace'],
      },
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        sidebar: {
          DEFAULT: "hsl(var(--sidebar-background))",
          foreground: "hsl(var(--sidebar-foreground))",
          primary: "hsl(var(--sidebar-primary))",
          "primary-foreground": "hsl(var(--sidebar-primary-foreground))",
          accent: "hsl(var(--sidebar-accent))",
          "accent-foreground": "hsl(var(--sidebar-accent-foreground))",
          border: "hsl(var(--sidebar-border))",
          ring: "hsl(var(--sidebar-ring))",
        },
        "surface-elevated": "hsl(var(--surface-elevated))",
        chart: {
          1: "hsl(var(--chart-1))",
          2: "hsl(var(--chart-2))",
          3: "hsl(var(--chart-3))",
          4: "hsl(var(--chart-4))",
          5: "hsl(var(--chart-5))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
        "slide-in-right": {
          from: { transform: "translateX(100%)", opacity: "0" },
          to: { transform: "translateX(0)", opacity: "1" },
        },
        "fade-in": {
          from: { opacity: "0", transform: "translateY(8px)" },
          to: { opacity: "1", transform: "translateY(0)" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
        "slide-in-right": "slide-in-right 0.3s ease-out",
        "fade-in": "fade-in 0.4s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config;
</file>

<file path="agent-orchestrator-hub/tsconfig.app.json">
{
  "compilerOptions": {
    "types": ["vitest/globals"],
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": false,
    "noUnusedLocals": false,
    "noUnusedParameters": false,
    "noImplicitAny": false,
    "noFallthroughCasesInSwitch": false,

    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"]
}
</file>

<file path="agent-orchestrator-hub/tsconfig.json">
{
  "files": [],
  "references": [{ "path": "./tsconfig.app.json" }, { "path": "./tsconfig.node.json" }],
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "noImplicitAny": false,
    "noUnusedParameters": false,
    "skipLibCheck": true,
    "allowJs": true,
    "noUnusedLocals": false,
    "strictNullChecks": false
  }
}
</file>

<file path="agent-orchestrator-hub/tsconfig.node.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": false,
    "noUnusedParameters": false,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="agent-orchestrator-hub/vite.config.ts">
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react-swc";
import path from "path";
import { componentTagger } from "lovable-tagger";
import { VitePWA } from "vite-plugin-pwa";

// https://vitejs.dev/config/
export default defineConfig(({ mode }) => ({
  server: {
    host: "::",
    port: 8080,
    hmr: {
      overlay: false,
    },
  },
  plugins: [
    react(),
    mode === "development" && componentTagger(),
    VitePWA({
      registerType: "autoUpdate",
      includeAssets: ["favicon.ico", "pwa-192.png", "pwa-512.png"],
      workbox: {
        navigateFallbackDenylist: [/^\/~oauth/],
        globPatterns: ["**/*.{js,css,html,ico,png,svg,woff2}"],
      },
      manifest: {
        name: "ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³ - AI Orchestration",
        short_name: "ÙˆÙƒÙŠÙ„ Ø¨Ù„Ø³",
        description: "Ù…Ù†ØµØ© ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠØ©",
        theme_color: "#29a800",
        background_color: "#0a0a0a",
        display: "standalone",
        dir: "rtl",
        lang: "ar",
        start_url: "/",
        icons: [
          { src: "pwa-192.png", sizes: "192x192", type: "image/png" },
          { src: "pwa-512.png", sizes: "512x512", type: "image/png" },
          { src: "pwa-512.png", sizes: "512x512", type: "image/png", purpose: "maskable" },
        ],
      },
    }),
  ].filter(Boolean),
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
}));
</file>

<file path="agent-orchestrator-hub/vitest.config.ts">
import { defineConfig } from "vitest/config";
import react from "@vitejs/plugin-react-swc";
import path from "path";

export default defineConfig({
  plugins: [react()],
  test: {
    environment: "jsdom",
    globals: true,
    setupFiles: ["./src/test/setup.ts"],
    include: ["src/**/*.{test,spec}.{ts,tsx}"],
  },
  resolve: {
    alias: { "@": path.resolve(__dirname, "./src") },
  },
});
</file>

</files>
